import{r as g,j as e,C as j,i as $,D as E,d as I}from"./index-B5o3Cck4.js";const w=g.memo(({quote:t,aspectRatio:u,id:A,isDailyQuote:r})=>{const i=u==="1:1",h=1080,b=i?h:1920;let d="";if(r)try{const a=t.id.startsWith("daily-")?t.id.replace("daily-",""):null;d=(a?new Date(a+"T12:00:00"):new Date).toLocaleDateString("pt-BR",{day:"numeric",month:"long"})}catch{d=new Date().toLocaleDateString("pt-BR",{day:"numeric",month:"long"})}const l=r?{bgColor:"#1c1917",gradient:`
            radial-gradient(circle at 0% 0%, rgba(217, 119, 6, 0.4) 0%, transparent 60%),
            radial-gradient(circle at 100% 100%, rgba(180, 83, 9, 0.3) 0%, transparent 60%),
            url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEUAAAA5OTkAAABERERmZmYzMzMyMjJEREQwMDBCwYnOAAAACHRSTlMAMwA1MzMzM7O0s14AAABwSURBVDjLxZFBCgAhDANGU/Bc5v3PomsWQwUP4t7yqog01qbZ/ko8O+NO3u3k3c5825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm2/55z/0B8405wZq1sYoAAAAASUVORK5CYII=")
        `,accentColor:"bg-amber-500",quoteMarkColor:"text-amber-500/60",badgeBorder:"border-amber-500/30",badgeText:"text-amber-200",authorColor:"text-amber-50"}:{bgColor:"#09090b",gradient:`
            radial-gradient(circle at 0% 0%, rgba(124, 58, 237, 0.4) 0%, transparent 50%),
            radial-gradient(circle at 100% 100%, rgba(236, 72, 153, 0.3) 0%, transparent 50%),
            url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEUAAAA5OTkAAABERERmZmYzMzMyMjJEREQwMDBCwYnOAAAACHRSTlMAMwA1MzMzM7O0s14AAABwSURBVDjLxZFBCgAhDANGU/Bc5v3PomsWQwUP4t7yqog01qbZ/ko8O+NO3u3k3c5825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm285825lvO/NtZ77tzLed+bYz33bm2/55z/0B8405wZq1sYoAAAAASUVORK5CYII=")
        `,accentColor:"bg-violet-500",quoteMarkColor:"text-violet-500/60",badgeBorder:"border-white/20",badgeText:"text-white/80",authorColor:"text-white/95"},c={backgroundColor:l.bgColor,backgroundImage:l.gradient,backgroundSize:"cover, cover, auto"},x=()=>{const a=t.text.length;return i?a<40?"80px":a<80?"64px":a<120?"52px":"42px":a<40?"90px":a<80?"72px":a<120?"60px":"48px"},p=()=>{const a=t.author?t.author.length:0;return a>35?"text-[28px]":a>25?"text-[32px]":"text-[40px]"};return e.jsxs("div",{id:A,className:"relative flex flex-col justify-between text-white overflow-hidden font-sora",style:{...c,width:`${h}px`,height:`${b}px`,padding:i?"80px":"120px 80px"},children:[e.jsxs("div",{className:"flex-grow flex flex-col justify-center relative z-10 px-2",children:[e.jsx("div",{className:`flex items-end mb-8 ${r?"ml-0":"ml-[-4px]"}`,children:r?e.jsx("span",{className:`text-2xl font-bold tracking-[0.2em] uppercase ${l.badgeText} border-b-4 ${l.badgeBorder} pb-3 mb-2 shadow-sm`,children:d}):e.jsx("span",{className:`text-[130px] font-serif ${l.quoteMarkColor} leading-[0.6]`,style:{fontFamily:"Playfair Display, serif"},children:'"'})}),e.jsx("h1",{className:"font-bold leading-[1.15] text-left text-white drop-shadow-2xl relative z-10",style:{fontSize:x(),textWrap:"balance"},children:t.text}),t.author&&e.jsxs("div",{className:"mt-12 flex items-center gap-6 relative z-10 w-full",children:[e.jsx("div",{className:`h-[4px] w-20 ${l.accentColor} rounded-full flex-shrink-0`}),e.jsx("p",{className:`${p()} font-medium uppercase tracking-widest ${l.authorColor} drop-shadow-md whitespace-nowrap`,children:t.author})]})]}),e.jsx("div",{className:"w-full flex justify-center items-center mt-8 mb-12 relative z-20",children:e.jsxs("div",{className:`bg-black/40 backdrop-blur-xl border ${l.badgeBorder} px-10 py-5 rounded-full flex items-center gap-4 shadow-xl`,children:[e.jsx("span",{className:"text-3xl",children:"✨"}),e.jsx("span",{className:"text-2xl font-semibold text-white tracking-wider",children:"inspiramais.app"})]})})]})}),Z=({quote:t,onClose:u,isClosing:A})=>{const[r,i]=g.useState("1:1"),[h,b]=g.useState(!1),[d,l]=g.useState(!1),[c,x]=g.useState(null),p=h||d,a=typeof navigator.share=="function",n=t.id.startsWith("daily-")||t.category==="MOTIVAÇÃO",m=(s,o)=>{x({type:s,text:o}),setTimeout(()=>x(null),3e3)},y=async()=>{try{const s=document.getElementById(`share-card-${r}`);if(!s)throw new Error("Share card element not found for generation.");return await domtoimage.toPng(s,{quality:1,width:1080,height:r==="1:1"?1080:1920,style:{transform:"scale(1)",transformOrigin:"top left"},cacheBust:!0})}catch(s){return console.error("Error generating image from DOM:",s),null}},N=async()=>{l(!0),x(null);const s=await y();if(s){const o=document.createElement("a");o.download=`inspira-${t.id}-${r}.png`,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),m("success","Salvo na galeria!")}else m("error","Erro ao salvar imagem.");l(!1)},z=async()=>{if(!a){m("error","Navegador não suporta compartilhamento.");return}b(!0),x(null);const s=await y();if(s)try{const M=await(await fetch(s)).blob(),k=new File([M],`inspira-${t.id}.png`,{type:"image/png"});await navigator.share({files:[k],title:"Inspira+",text:`"${t.text}"`})}catch(o){o.name!=="AbortError"&&(console.error("Web Share API failed:",o),m("error","Falha ao compartilhar."))}else m("error","Falha ao gerar imagem.");b(!1)},f=260,C=f/1080,O=r==="1:1"?f:f*(16/9),v=n?"bg-amber-500":"bg-violet-600",S=n?"bg-amber-500 hover:bg-amber-600":"bg-violet-600 hover:bg-violet-700",B=n?"border-amber-500 text-amber-600":"border-violet-600 text-violet-600";return e.jsx("div",{role:"dialog","aria-modal":"true","aria-label":"Compartilhar Citação",className:"fixed inset-0 bg-black/40 backdrop-blur-md z-50 flex items-end justify-center",children:e.jsxs("div",{className:`bg-white text-gray-900 w-full max-w-lg rounded-t-3xl shadow-2xl flex flex-col max-h-[90vh] ${A?"animate-slide-out-down":"animate-slide-in-bottom"}`,children:[e.jsxs("header",{className:"flex items-center justify-between p-4 flex-shrink-0 border-b border-gray-100",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 font-sora",children:"Compartilhar"}),e.jsx("button",{onClick:u,className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors","aria-label":"Fechar",children:e.jsx(j,{className:"text-2xl text-gray-600"})})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto scrollbar-hide space-y-6 p-6 bg-gray-50",children:[e.jsxs("div",{role:"radiogroup","aria-label":"Escolher formato",className:"flex justify-center p-1 bg-white rounded-full shadow-sm ring-1 ring-gray-200",children:[e.jsx("button",{onClick:()=>i("1:1"),className:`flex-1 py-2.5 rounded-full text-sm font-bold transition-all ${r==="1:1"?`${v} text-white shadow-md`:"text-gray-500 hover:text-gray-900"}`,children:"Post (1:1)"}),e.jsx("button",{onClick:()=>i("9:16"),className:`flex-1 py-2.5 rounded-full text-sm font-bold transition-all ${r==="9:16"?`${v} text-white shadow-md`:"text-gray-500 hover:text-gray-900"}`,children:"Story (9:16)"})]}),e.jsx("div",{className:"flex justify-center items-center py-4 min-h-[320px]",children:e.jsx("div",{className:"relative shadow-2xl rounded-2xl overflow-hidden ring-4 ring-white/50 transition-all duration-300 ease-in-out",style:{width:`${f}px`,height:`${O}px`},children:e.jsx("div",{style:{transform:`scale(${C})`,transformOrigin:"top left",width:"1080px",height:r==="1:1"?"1080px":"1920px",pointerEvents:"none"},children:e.jsx(w,{quote:t,aspectRatio:r,id:"preview-render",isDailyQuote:n})})})}),e.jsxs("div",{style:{position:"absolute",width:0,height:0,overflow:"hidden",left:0,top:0},children:[e.jsx(w,{quote:t,aspectRatio:"1:1",id:"share-card-1:1",isDailyQuote:n}),e.jsx(w,{quote:t,aspectRatio:"9:16",id:"share-card-9:16",isDailyQuote:n})]})]}),e.jsxs("div",{className:"p-6 bg-white border-t border-gray-100 space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[a&&e.jsxs("button",{onClick:z,disabled:p,className:`flex-1 ${S} text-white font-bold py-4 rounded-xl transition-all active:scale-95 disabled:opacity-70 flex items-center justify-center gap-2 shadow-lg`,children:[h?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}):e.jsx($,{className:"text-2xl"}),e.jsx("span",{children:"Postar"})]}),e.jsxs("button",{onClick:N,disabled:p,className:`flex-1 font-bold py-4 rounded-xl transition-all active:scale-95 flex items-center justify-center gap-2 border-2 ${a?"bg-white border-gray-200 text-gray-700 hover:bg-gray-50":`${B} hover:bg-gray-50`}`,children:[d?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-400 border-t-transparent"}):e.jsx(E,{className:"text-2xl"}),e.jsx("span",{children:"Baixar"})]})]}),c&&e.jsxs("div",{className:`text-center text-sm font-medium flex items-center justify-center gap-2 py-2 rounded-lg ${c.type==="success"?"text-green-600 bg-green-50":"text-red-600 bg-red-50"}`,children:[c.type==="success"?e.jsx(I,{className:"text-lg"}):e.jsx(j,{className:"text-lg"}),e.jsx("span",{children:c.text})]})]})]})})};export{Z as ShareModal};
