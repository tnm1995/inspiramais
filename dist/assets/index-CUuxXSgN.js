(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function hS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xm={exports:{}},ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function tI(){if(t0)return ou;t0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:l}}return ou.Fragment=e,ou.jsx=t,ou.jsxs=t,ou}var n0;function nI(){return n0||(n0=1,xm.exports=tI()),xm.exports}var T=nI(),wm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function iI(){if(i0)return Ne;i0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=A&&q[A]||q["@@iterator"],typeof q=="function"?q:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function $(q,ne,le){this.props=q,this.context=ne,this.refs=B,this.updater=le||L}$.prototype.isReactComponent={},$.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},$.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function X(){}X.prototype=$.prototype;function W(q,ne,le){this.props=q,this.context=ne,this.refs=B,this.updater=le||L}var ae=W.prototype=new X;ae.constructor=W,F(ae,$.prototype),ae.isPureReactComponent=!0;var de=Array.isArray;function ce(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(q,ne,le){var me=le.ref;return{$$typeof:n,type:q,key:ne,ref:me!==void 0?me:null,props:le}}function k(q,ne){return R(q.type,ne,q.props)}function P(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function U(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(le){return ne[le]})}var M=/\/+/g;function Se(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?U(""+q.key):ne.toString(36)}function Ie(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ce,ce):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function J(q,ne,le,me,Ce){var Re=typeof q;(Re==="undefined"||Re==="boolean")&&(q=null);var Ue=!1;if(q===null)Ue=!0;else switch(Re){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(q.$$typeof){case n:case e:Ue=!0;break;case v:return Ue=q._init,J(Ue(q._payload),ne,le,me,Ce)}}if(Ue)return Ce=Ce(q),Ue=me===""?"."+Se(q,0):me,de(Ce)?(le="",Ue!=null&&(le=Ue.replace(M,"$&/")+"/"),J(Ce,ne,le,"",function(Di){return Di})):Ce!=null&&(P(Ce)&&(Ce=k(Ce,le+(Ce.key==null||q&&q.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+Ue)),ne.push(Ce)),1;Ue=0;var xt=me===""?".":me+":";if(de(q))for(var ht=0;ht<q.length;ht++)me=q[ht],Re=xt+Se(me,ht),Ue+=J(me,ne,le,Re,Ce);else if(ht=w(q),typeof ht=="function")for(q=ht.call(q),ht=0;!(me=q.next()).done;)me=me.value,Re=xt+Se(me,ht++),Ue+=J(me,ne,le,Re,Ce);else if(Re==="object"){if(typeof q.then=="function")return J(Ie(q),ne,le,me,Ce);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function re(q,ne,le){if(q==null)return q;var me=[],Ce=0;return J(q,me,"","",function(Re){return ne.call(le,Re,Ce++)}),me}function he(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(le){(q._status===0||q._status===-1)&&(q._status=1,q._result=le)},function(le){(q._status===0||q._status===-1)&&(q._status=2,q._result=le)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var Fe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Qe={map:re,forEach:function(q,ne,le){re(q,function(){ne.apply(this,arguments)},le)},count:function(q){var ne=0;return re(q,function(){ne++}),ne},toArray:function(q){return re(q,function(ne){return ne})||[]},only:function(q){if(!P(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ne.Activity=E,Ne.Children=Qe,Ne.Component=$,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=i,Ne.Suspense=m,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(q){return D.H.useMemoCache(q)}},Ne.cache=function(q){return function(){return q.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(q,ne,le){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=F({},q.props),Ce=q.key;if(ne!=null)for(Re in ne.key!==void 0&&(Ce=""+ne.key),ne)!N.call(ne,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ne.ref===void 0||(me[Re]=ne[Re]);var Re=arguments.length-2;if(Re===1)me.children=le;else if(1<Re){for(var Ue=Array(Re),xt=0;xt<Re;xt++)Ue[xt]=arguments[xt+2];me.children=Ue}return R(q.type,Ce,me)},Ne.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Ne.createElement=function(q,ne,le){var me,Ce={},Re=null;if(ne!=null)for(me in ne.key!==void 0&&(Re=""+ne.key),ne)N.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=ne[me]);var Ue=arguments.length-2;if(Ue===1)Ce.children=le;else if(1<Ue){for(var xt=Array(Ue),ht=0;ht<Ue;ht++)xt[ht]=arguments[ht+2];Ce.children=xt}if(q&&q.defaultProps)for(me in Ue=q.defaultProps,Ue)Ce[me]===void 0&&(Ce[me]=Ue[me]);return R(q,Re,Ce)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(q){return{$$typeof:f,render:q}},Ne.isValidElement=P,Ne.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:he}},Ne.memo=function(q,ne){return{$$typeof:p,type:q,compare:ne===void 0?null:ne}},Ne.startTransition=function(q){var ne=D.T,le={};D.T=le;try{var me=q(),Ce=D.S;Ce!==null&&Ce(le,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ce,Fe)}catch(Re){Fe(Re)}finally{ne!==null&&le.types!==null&&(ne.types=le.types),D.T=ne}},Ne.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ne.use=function(q){return D.H.use(q)},Ne.useActionState=function(q,ne,le){return D.H.useActionState(q,ne,le)},Ne.useCallback=function(q,ne){return D.H.useCallback(q,ne)},Ne.useContext=function(q){return D.H.useContext(q)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(q,ne){return D.H.useDeferredValue(q,ne)},Ne.useEffect=function(q,ne){return D.H.useEffect(q,ne)},Ne.useEffectEvent=function(q){return D.H.useEffectEvent(q)},Ne.useId=function(){return D.H.useId()},Ne.useImperativeHandle=function(q,ne,le){return D.H.useImperativeHandle(q,ne,le)},Ne.useInsertionEffect=function(q,ne){return D.H.useInsertionEffect(q,ne)},Ne.useLayoutEffect=function(q,ne){return D.H.useLayoutEffect(q,ne)},Ne.useMemo=function(q,ne){return D.H.useMemo(q,ne)},Ne.useOptimistic=function(q,ne){return D.H.useOptimistic(q,ne)},Ne.useReducer=function(q,ne,le){return D.H.useReducer(q,ne,le)},Ne.useRef=function(q){return D.H.useRef(q)},Ne.useState=function(q){return D.H.useState(q)},Ne.useSyncExternalStore=function(q,ne,le){return D.H.useSyncExternalStore(q,ne,le)},Ne.useTransition=function(){return D.H.useTransition()},Ne.version="19.2.1",Ne}var s0;function kp(){return s0||(s0=1,wm.exports=iI()),wm.exports}var ee=kp();const mS=hS(ee);var Im={exports:{}},au={},Rm={exports:{}},bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function sI(){return r0||(r0=1,(function(n){function e(J,re){var he=J.length;J.push(re);e:for(;0<he;){var Fe=he-1>>>1,Qe=J[Fe];if(0<o(Qe,re))J[Fe]=re,J[he]=Qe,he=Fe;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var re=J[0],he=J.pop();if(he!==re){J[0]=he;e:for(var Fe=0,Qe=J.length,q=Qe>>>1;Fe<q;){var ne=2*(Fe+1)-1,le=J[ne],me=ne+1,Ce=J[me];if(0>o(le,he))me<Qe&&0>o(Ce,le)?(J[Fe]=Ce,J[me]=he,Fe=me):(J[Fe]=le,J[ne]=he,Fe=ne);else if(me<Qe&&0>o(Ce,he))J[Fe]=Ce,J[me]=he,Fe=me;else break e}}return re}function o(J,re){var he=J.sortIndex-re.sortIndex;return he!==0?he:J.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],p=[],v=1,E=null,A=3,w=!1,L=!1,F=!1,B=!1,$=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ae(J){for(var re=t(p);re!==null;){if(re.callback===null)i(p);else if(re.startTime<=J)i(p),re.sortIndex=re.expirationTime,e(m,re);else break;re=t(p)}}function de(J){if(F=!1,ae(J),!L)if(t(m)!==null)L=!0,ce||(ce=!0,U());else{var re=t(p);re!==null&&Ie(de,re.startTime-J)}}var ce=!1,D=-1,N=5,R=-1;function k(){return B?!0:!(n.unstable_now()-R<N)}function P(){if(B=!1,ce){var J=n.unstable_now();R=J;var re=!0;try{e:{L=!1,F&&(F=!1,X(D),D=-1),w=!0;var he=A;try{t:{for(ae(J),E=t(m);E!==null&&!(E.expirationTime>J&&k());){var Fe=E.callback;if(typeof Fe=="function"){E.callback=null,A=E.priorityLevel;var Qe=Fe(E.expirationTime<=J);if(J=n.unstable_now(),typeof Qe=="function"){E.callback=Qe,ae(J),re=!0;break t}E===t(m)&&i(m),ae(J)}else i(m);E=t(m)}if(E!==null)re=!0;else{var q=t(p);q!==null&&Ie(de,q.startTime-J),re=!1}}break e}finally{E=null,A=he,w=!1}re=void 0}}finally{re?U():ce=!1}}}var U;if(typeof W=="function")U=function(){W(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Se=M.port2;M.port1.onmessage=P,U=function(){Se.postMessage(null)}}else U=function(){$(P,0)};function Ie(J,re){D=$(function(){J(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(J){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var he=A;A=re;try{return J()}finally{A=he}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=A;A=J;try{return re()}finally{A=he}},n.unstable_scheduleCallback=function(J,re,he){var Fe=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Fe+he:Fe):he=Fe,J){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=he+Qe,J={id:v++,callback:re,priorityLevel:J,startTime:he,expirationTime:Qe,sortIndex:-1},he>Fe?(J.sortIndex=he,e(p,J),t(m)===null&&J===t(p)&&(F?(X(D),D=-1):F=!0,Ie(de,he-Fe))):(J.sortIndex=Qe,e(m,J),L||w||(L=!0,ce||(ce=!0,U()))),J},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(J){var re=A;return function(){var he=A;A=re;try{return J.apply(this,arguments)}finally{A=he}}}})(bm)),bm}var o0;function rI(){return o0||(o0=1,Rm.exports=sI()),Rm.exports}var Nm={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function oI(){if(a0)return an;a0=1;var n=kp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},an.flushSync=function(m){var p=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=v,i.d.f()}},an.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},an.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},an.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:w}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:A,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},an.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},an.requestFormReset=function(m){i.d.r(m)},an.unstable_batchedUpdates=function(m,p){return m(p)},an.useFormState=function(m,p,v){return u.H.useFormState(m,p,v)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.2.1",an}var l0;function aI(){if(l0)return Nm.exports;l0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nm.exports=oI(),Nm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function lI(){if(u0)return au;u0=1;var n=rI(),e=kp(),t=aI();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,a=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(a=r.return),s=r.return;while(s)}return r.tag===3?a:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(i(188))}function p(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var a=s,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return m(y),s;if(_===c)return m(y),r;_=_.sibling}throw Error(i(188))}if(a.return!==c.return)a=y,c=_;else{for(var C=!1,I=y.child;I;){if(I===a){C=!0,a=y,c=_;break}if(I===c){C=!0,c=y,a=_;break}I=I.sibling}if(!C){for(I=_.child;I;){if(I===a){C=!0,a=_,c=y;break}if(I===c){C=!0,c=_,a=y;break}I=I.sibling}if(!C)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function Se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case $:return"Profiler";case B:return"StrictMode";case de:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case W:return s.displayName||"Context";case X:return(s._context.displayName||"Context")+".Consumer";case ae:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return r=s.displayName||null,r!==null?r:Se(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return Se(s(r))}catch{}}return null}var Ie=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Fe=[],Qe=-1;function q(s){return{current:s}}function ne(s){0>Qe||(s.current=Fe[Qe],Fe[Qe]=null,Qe--)}function le(s,r){Qe++,Fe[Qe]=s.current,s.current=r}var me=q(null),Ce=q(null),Re=q(null),Ue=q(null);function xt(s,r){switch(le(Re,r),le(Ce,s),le(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Cv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Cv(r),s=xv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(me),le(me,s)}function ht(){ne(me),ne(Ce),ne(Re)}function Di(s){s.memoizedState!==null&&le(Ue,s);var r=me.current,a=xv(r,s.type);r!==a&&(le(Ce,s),le(me,a))}function mi(s){Ce.current===s&&(ne(me),ne(Ce)),Ue.current===s&&(ne(Ue),nu._currentValue=he)}var pi,Un;function En(s){if(pi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);pi=r&&r[1]||"",Un=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pi+s+Un}var Pi=!1;function is(s,r){if(!s||Pi)return"";Pi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var K=Q}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(Q){K=Q}s.call(ie.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),C=_[0],I=_[1];if(C&&I){var V=C.split(`
`),Y=I.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===Y.length)for(c=V.length-1,y=Y.length-1;1<=c&&0<=y&&V[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==Y[y]){var Z=`
`+V[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=y);break}}}finally{Pi=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?En(a):""}function Os(s,r){switch(s.tag){case 26:case 27:case 5:return En(s.type);case 16:return En("Lazy");case 13:return s.child!==r&&r!==null?En("Suspense Fallback"):En("Suspense");case 19:return En("SuspenseList");case 0:case 15:return is(s.type,!1);case 11:return is(s.type.render,!1);case 1:return is(s.type,!0);case 31:return En("Activity");default:return""}}function qs(s){try{var r="",a=null;do r+=Os(s,a),a=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var wt=Object.prototype.hasOwnProperty,It=n.unstable_scheduleCallback,gi=n.unstable_cancelCallback,Fs=n.unstable_shouldYield,Go=n.unstable_requestPaint,Kt=n.unstable_now,ki=n.unstable_getCurrentPriorityLevel,Bs=n.unstable_ImmediatePriority,Kr=n.unstable_UserBlockingPriority,yi=n.unstable_NormalPriority,Ho=n.unstable_LowPriority,jr=n.unstable_IdlePriority,Qr=n.log,$r=n.unstable_setDisableYieldValue,Ln=null,kt=null;function pn(s){if(typeof Qr=="function"&&$r(s),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Ln,s)}catch{}}var Et=Math.clz32?Math.clz32:Xr,Yo=Math.log,ss=Math.LN2;function Xr(s){return s>>>=0,s===0?32:31-(Yo(s)/ss|0)|0}var $n=256,rs=262144,pt=4194304;function Sn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Xn(s,r,a){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=Sn(c):(C&=I,C!==0?y=Sn(C):a||(a=I&~s,a!==0&&(y=Sn(a))))):(I=c&~_,I!==0?y=Sn(I):C!==0?y=Sn(C):a||(a=c&~s,a!==0&&(y=Sn(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function An(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Jo(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(){var s=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),s}function On(s){for(var r=[],a=0;31>a;a++)r.push(s);return r}function os(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ul(s,r,a,c,y,_){var C=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var I=s.entanglements,V=s.expirationTimes,Y=s.hiddenUpdates;for(a=C&~a;0<a;){var Z=31-Et(a),ie=1<<Z;I[Z]=0,V[Z]=-1;var K=Y[Z];if(K!==null)for(Y[Z]=null,Z=0;Z<K.length;Z++){var Q=K[Z];Q!==null&&(Q.lane&=-536870913)}a&=~ie}c!==0&&Vi(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(C&~r))}function Vi(s,r,a){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Et(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|a&261930}function zs(s,r){var a=s.entangledLanes|=r;for(s=s.entanglements;a;){var c=31-Et(a),y=1<<c;y&r|s[c]&r&&(s[c]|=r),a&=~y}}function Gs(s,r){var a=r&-r;return a=(a&42)!==0?1:as(a),(a&(s.suspendedLanes|r))!==0?0:a}function as(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function _i(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Wr(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:jv(s.type))}function qn(s,r){var a=re.p;try{return re.p=s,r()}finally{re.p=a}}var gn=Math.random().toString(36).slice(2),it="__reactFiber$"+gn,Vt="__reactProps$"+gn,Wn="__reactContainer$"+gn,Hs="__reactEvents$"+gn,cl="__reactListeners$"+gn,jo="__reactHandles$"+gn,Zr="__reactResources$"+gn,Zn="__reactMarker$"+gn;function ls(s){delete s[it],delete s[Vt],delete s[Hs],delete s[cl],delete s[jo]}function Fn(s){var r=s[it];if(r)return r;for(var a=s.parentNode;a;){if(r=a[Wn]||a[it]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(s=Dv(s);s!==null;){if(a=s[it])return a;s=Dv(s)}return r}s=a,a=s.parentNode}return null}function ye(s){if(s=s[it]||s[Wn]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function je(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function $e(s){var r=s[Zr];return r||(r=s[Zr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ve(s){s[Zn]=!0}var yn=new Set,Cn={};function xn(s,r){Ui(s,r),Ui(s+"Capture",r)}function Ui(s,r){for(Cn[s]=r,s=0;s<r.length;s++)yn.add(r[s])}var dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fl={},hl={};function Ku(s){return wt.call(hl,s)?!0:wt.call(fl,s)?!1:dl.test(s)?hl[s]=!0:(fl[s]=!0,!1)}function Qo(s,r,a){if(Ku(r))if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+a)}}function Bn(s,r,a){if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+a)}}function Ut(s,r,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(r,a,""+c)}}function jt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ys(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ml(s,r,a){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){a=""+C,_.call(this,C)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function st(s){if(!s._valueTracker){var r=Ys(s)?"checked":"value";s._valueTracker=ml(s,r,""+s[r])}}function eo(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return s&&(c=Ys(s)?s.checked?"true":"false":s.value),s=c,s!==a?(r.setValue(s),!0):!1}function Li(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var to=/[\n"\\]/g;function wn(s){return s.replace(to,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function $o(s,r,a,c,y,_,C,I){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),r!=null?C==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+jt(r)):s.value!==""+jt(r)&&(s.value=""+jt(r)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),r!=null?pl(s,C,jt(r)):a!=null?pl(s,C,jt(a)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+jt(I):s.removeAttribute("name")}function ju(s,r,a,c,y,_,C,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){st(s);return}a=a!=null?""+jt(a):"",r=r!=null?""+jt(r):a,I||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),st(s)}function pl(s,r,a){r==="number"&&Li(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function Js(s,r,a,c){if(s=s.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<s.length;a++)y=r.hasOwnProperty("$"+s[a].value),s[a].selected!==y&&(s[a].selected=y),y&&c&&(s[a].defaultSelected=!0)}else{for(a=""+jt(a),r=null,y=0;y<s.length;y++){if(s[y].value===a){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Qu(s,r,a){if(r!=null&&(r=""+jt(r),r!==s.value&&(s.value=r),a==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=a!=null?""+jt(a):""}function Ks(s,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(i(92));if(Ie(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=jt(r),s.defaultValue=a,c=s.textContent,c===a&&c!==""&&c!==null&&(s.value=c),st(s)}function In(s,r){if(r){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=r;return}}s.textContent=r}var $u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(s,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,a):typeof a!="number"||a===0||$u.has(r)?r==="float"?s.cssFloat=a:s[r]=(""+a).trim():s[r]=a+"px"}function yl(s,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&gl(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&gl(s,_,r[_])}function Xo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(s){return js.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function vi(){}var _l=null;function ei(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qs=null,Oi=null;function no(s){var r=ye(s);if(r&&(s=r.stateNode)){var a=s[Vt]||null;e:switch(s=r.stateNode,r.type){case"input":if($o(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==s&&c.form===s.form){var y=c[Vt]||null;if(!y)throw Error(i(90));$o(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===s.form&&eo(c)}break e;case"textarea":Qu(s,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Js(s,!!a.multiple,r,!1)}}}var Zo=!1;function $s(s,r,a){if(Zo)return s(r,a);Zo=!0;try{var c=s(r);return c}finally{if(Zo=!1,(Qs!==null||Oi!==null)&&(Hc(),Qs&&(r=Qs,s=Oi,Oi=Qs=null,no(r),s)))for(r=0;r<s.length;r++)no(s[r])}}function Ti(s,r){var a=s.stateNode;if(a===null)return null;var c=a[Vt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),io=!1;if(ti)try{var at={};Object.defineProperty(at,"passive",{get:function(){io=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{io=!1}var qi=null,vl=null,so=null;function Tl(){if(so)return so;var s,r=vl,a=r.length,c,y="value"in qi?qi.value:qi.textContent,_=y.length;for(s=0;s<a&&r[s]===y[s];s++);var C=a-s;for(c=1;c<=C&&r[a-c]===y[_-c];c++);return so=y.slice(s,1<c?1-c:void 0)}function ro(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function us(){return!0}function Ei(){return!1}function Wt(s){function r(a,c,y,_,C){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(a=s[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?us:Ei,this.isPropagationStopped=Ei,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),r}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fi=Wt(cs),Xs=E({},cs,{view:0,detail:0}),El=Wt(Xs),Ws,ea,Bi,ta=E({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bi&&(Bi&&s.type==="mousemove"?(Ws=s.screenX-Bi.screenX,ea=s.screenY-Bi.screenY):ea=Ws=0,Bi=s),Ws)},movementY:function(s){return"movementY"in s?s.movementY:ea}}),Sl=Wt(ta),oo=E({},ta,{dataTransfer:0}),Wu=Wt(oo),Zu=E({},Xs,{relatedTarget:0}),ao=Wt(Zu),Al=E({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=Wt(Al),na=E({},cs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),tc=Wt(na),nc=E({},cs,{data:0}),zi=Wt(nc),ic={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=rc[s])?!!r[s]:!1}function Zs(){return oc}var _n=E({},Xs,{key:function(s){if(s.key){var r=ic[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=ro(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?sc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zs,charCode:function(s){return s.type==="keypress"?ro(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ro(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ac=Wt(_n),lc=E({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ds=Wt(lc),g=E({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zs}),S=Wt(g),x=E({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Wt(x),G=E({},ta,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),j=Wt(G),ue=E({},cs,{newState:0,oldState:0}),De=Wt(ue),Nt=[9,13,27,32],et=ti&&"CompositionEvent"in window,St=null;ti&&"documentMode"in document&&(St=document.documentMode);var ni=ti&&"TextEvent"in window&&!St,Gi=ti&&(!et||St&&8<St&&11>=St),Si=" ",Ai=!1;function lo(s,r){switch(s){case"keyup":return Nt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ia(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var sa=!1;function xx(s,r){switch(s){case"compositionend":return ia(r);case"keypress":return r.which!==32?null:(Ai=!0,Si);case"textInput":return s=r.data,s===Si&&Ai?null:s;default:return null}}function wx(s,r){if(sa)return s==="compositionend"||!et&&lo(s,r)?(s=Tl(),so=vl=qi=null,sa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Gi&&r.locale!=="ko"?null:r.data;default:return null}}var Ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Ix[s.type]:r==="textarea"}function Ug(s,r,a,c){Qs?Oi?Oi.push(c):Oi=[c]:Qs=c,r=Xc(r,"onChange"),0<r.length&&(a=new Fi("onChange","change",null,a,c),s.push({event:a,listeners:r}))}var Cl=null,xl=null;function Rx(s){_v(s,0)}function uc(s){var r=je(s);if(eo(r))return s}function Lg(s,r){if(s==="change")return r}var Og=!1;if(ti){var Df;if(ti){var Pf="oninput"in document;if(!Pf){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),Pf=typeof qg.oninput=="function"}Df=Pf}else Df=!1;Og=Df&&(!document.documentMode||9<document.documentMode)}function Fg(){Cl&&(Cl.detachEvent("onpropertychange",Bg),xl=Cl=null)}function Bg(s){if(s.propertyName==="value"&&uc(xl)){var r=[];Ug(r,xl,s,ei(s)),$s(Rx,r)}}function bx(s,r,a){s==="focusin"?(Fg(),Cl=r,xl=a,Cl.attachEvent("onpropertychange",Bg)):s==="focusout"&&Fg()}function Nx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return uc(xl)}function Mx(s,r){if(s==="click")return uc(r)}function Dx(s,r){if(s==="input"||s==="change")return uc(r)}function Px(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var zn=typeof Object.is=="function"?Object.is:Px;function wl(s,r){if(zn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var a=Object.keys(s),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!wt.call(r,y)||!zn(s[y],r[y]))return!1}return!0}function zg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Gg(s,r){var a=zg(s);s=0;for(var c;a;){if(a.nodeType===3){if(c=s+a.textContent.length,s<=r&&c>=r)return{node:a,offset:r-s};s=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zg(a)}}function Hg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Hg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Yg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Li(s.document);r instanceof s.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)s=r.contentWindow;else break;r=Li(s.document)}return r}function kf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var kx=ti&&"documentMode"in document&&11>=document.documentMode,ra=null,Vf=null,Il=null,Uf=!1;function Jg(s,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uf||ra==null||ra!==Li(c)||(c=ra,"selectionStart"in c&&kf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&wl(Il,c)||(Il=c,c=Xc(Vf,"onSelect"),0<c.length&&(r=new Fi("onSelect","select",null,r,a),s.push({event:r,listeners:c}),r.target=ra)))}function uo(s,r){var a={};return a[s.toLowerCase()]=r.toLowerCase(),a["Webkit"+s]="webkit"+r,a["Moz"+s]="moz"+r,a}var oa={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Lf={},Kg={};ti&&(Kg=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function co(s){if(Lf[s])return Lf[s];if(!oa[s])return s;var r=oa[s],a;for(a in r)if(r.hasOwnProperty(a)&&a in Kg)return Lf[s]=r[a];return s}var jg=co("animationend"),Qg=co("animationiteration"),$g=co("animationstart"),Vx=co("transitionrun"),Ux=co("transitionstart"),Lx=co("transitioncancel"),Xg=co("transitionend"),Wg=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Of.push("scrollEnd");function Ci(s,r){Wg.set(s,r),xn(r,[s])}var cc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ii=[],aa=0,qf=0;function dc(){for(var s=aa,r=qf=aa=0;r<s;){var a=ii[r];ii[r++]=null;var c=ii[r];ii[r++]=null;var y=ii[r];ii[r++]=null;var _=ii[r];if(ii[r++]=null,c!==null&&y!==null){var C=c.pending;C===null?y.next=y:(y.next=C.next,C.next=y),c.pending=y}_!==0&&Zg(a,y,_)}}function fc(s,r,a,c){ii[aa++]=s,ii[aa++]=r,ii[aa++]=a,ii[aa++]=c,qf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Ff(s,r,a,c){return fc(s,r,a,c),hc(s)}function fo(s,r){return fc(s,null,null,r),hc(s)}function Zg(s,r,a){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=s.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-Et(a),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function hc(s){if(50<Ql)throw Ql=0,Qh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var la={};function Ox(s,r,a,c){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,r,a,c){return new Ox(s,r,a,c)}function Bf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function fs(s,r){var a=s.alternate;return a===null?(a=Gn(s.tag,r,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=r,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,r=s.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function ey(s,r){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function mc(s,r,a,c,y,_){var C=0;if(c=s,typeof s=="function")Bf(s)&&(C=1);else if(typeof s=="string")C=Gw(s,a,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=Gn(31,a,r,y),s.elementType=R,s.lanes=_,s;case F:return ho(a.children,y,_,r);case B:C=8,y|=24;break;case $:return s=Gn(12,a,r,y|2),s.elementType=$,s.lanes=_,s;case de:return s=Gn(13,a,r,y),s.elementType=de,s.lanes=_,s;case ce:return s=Gn(19,a,r,y),s.elementType=ce,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:C=10;break e;case X:C=9;break e;case ae:C=11;break e;case D:C=14;break e;case N:C=16,c=null;break e}C=29,a=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Gn(C,a,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function ho(s,r,a,c){return s=Gn(7,s,c,r),s.lanes=a,s}function zf(s,r,a){return s=Gn(6,s,null,r),s.lanes=a,s}function ty(s){var r=Gn(18,null,null,0);return r.stateNode=s,r}function Gf(s,r,a){return r=Gn(4,s.children!==null?s.children:[],s.key,r),r.lanes=a,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var ny=new WeakMap;function si(s,r){if(typeof s=="object"&&s!==null){var a=ny.get(s);return a!==void 0?a:(r={value:s,source:r,stack:qs(r)},ny.set(s,r),r)}return{value:s,source:r,stack:qs(r)}}var ua=[],ca=0,pc=null,Rl=0,ri=[],oi=0,er=null,Hi=1,Yi="";function hs(s,r){ua[ca++]=Rl,ua[ca++]=pc,pc=s,Rl=r}function iy(s,r,a){ri[oi++]=Hi,ri[oi++]=Yi,ri[oi++]=er,er=s;var c=Hi;s=Yi;var y=32-Et(c)-1;c&=~(1<<y),a+=1;var _=32-Et(r)+y;if(30<_){var C=y-y%5;_=(c&(1<<C)-1).toString(32),c>>=C,y-=C,Hi=1<<32-Et(r)+y|a<<y|c,Yi=_+s}else Hi=1<<_|a<<y|c,Yi=s}function Hf(s){s.return!==null&&(hs(s,1),iy(s,1,0))}function Yf(s){for(;s===pc;)pc=ua[--ca],ua[ca]=null,Rl=ua[--ca],ua[ca]=null;for(;s===er;)er=ri[--oi],ri[oi]=null,Yi=ri[--oi],ri[oi]=null,Hi=ri[--oi],ri[oi]=null}function sy(s,r){ri[oi++]=Hi,ri[oi++]=Yi,ri[oi++]=er,Hi=r.id,Yi=r.overflow,er=s}var Zt=null,gt=null,Je=!1,tr=null,ai=!1,Jf=Error(i(519));function nr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(si(r,s)),Jf}function ry(s){var r=s.stateNode,a=s.type,c=s.memoizedProps;switch(r[it]=s,r[Vt]=c,a){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(a=0;a<Xl.length;a++)Oe(Xl[a],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),ju(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Ks(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||Sv(r.textContent,a)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=vi),r=!0):r=!1,r||nr(s,!0)}function oy(s){for(Zt=s.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Zt=Zt.return}}function da(s){if(s!==Zt)return!1;if(!Je)return oy(s),Je=!0,!1;var r=s.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||cm(s.type,s.memoizedProps)),a=!a),a&&gt&&nr(s),oy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=Mv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=Mv(s)}else r===27?(r=gt,gr(s.type)?(s=pm,pm=null,gt=s):gt=r):gt=Zt?ui(s.stateNode.nextSibling):null;return!0}function mo(){gt=Zt=null,Je=!1}function Kf(){var s=tr;return s!==null&&(Mn===null?Mn=s:Mn.push.apply(Mn,s),tr=null),s}function bl(s){tr===null?tr=[s]:tr.push(s)}var jf=q(null),po=null,ms=null;function ir(s,r,a){le(jf,r._currentValue),r._currentValue=a}function ps(s){s._currentValue=jf.current,ne(jf)}function Qf(s,r,a){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===a)break;s=s.return}}function $f(s,r,a,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var V=0;V<r.length;V++)if(I.context===r[V]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Qf(_.return,a,s),c||(C=null);break e}_=I.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=a,_=C.alternate,_!==null&&(_.lanes|=a),Qf(C,a,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function fa(s,r,a,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var I=y.type;zn(y.pendingProps.value,C.value)||(s!==null?s.push(I):s=[I])}}else if(y===Ue.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(nu):s=[nu])}y=y.return}s!==null&&$f(r,s,a,c),r.flags|=262144}function gc(s){for(s=s.firstContext;s!==null;){if(!zn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function go(s){po=s,ms=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function en(s){return ay(po,s)}function yc(s,r){return po===null&&go(s),ay(s,r)}function ay(s,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ms===null){if(s===null)throw Error(i(308));ms=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ms=ms.next=r;return a}var qx=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(a,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(a){return a()})}},Fx=n.unstable_scheduleCallback,Bx=n.unstable_NormalPriority,Lt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new qx,data:new Map,refCount:0}}function Nl(s){s.refCount--,s.refCount===0&&Fx(Bx,function(){s.controller.abort()})}var Ml=null,Wf=0,ha=0,ma=null;function zx(s,r){if(Ml===null){var a=Ml=[];Wf=0,ha=tm(),ma={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Wf++,r.then(ly,ly),r}function ly(){if(--Wf===0&&Ml!==null){ma!==null&&(ma.status="fulfilled");var s=Ml;Ml=null,ha=0,ma=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Gx(s,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var uy=J.S;J.S=function(s,r){J_=Kt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&zx(s,r),uy!==null&&uy(s,r)};var yo=q(null);function Zf(){var s=yo.current;return s!==null?s:dt.pooledCache}function _c(s,r){r===null?le(yo,yo.current):le(yo,r.pool)}function cy(){var s=Zf();return s===null?null:{parent:Lt._currentValue,pool:s}}var pa=Error(i(460)),eh=Error(i(474)),vc=Error(i(542)),Tc={then:function(){}};function dy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function fy(s,r,a){switch(a=s[a],a===void 0?s.push(r):a!==r&&(r.then(vi,vi),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,my(s),s;default:if(typeof r.status=="string")r.then(vi,vi);else{if(s=dt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,my(s),s}throw vo=r,pa}}function _o(s){try{var r=s._init;return r(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(vo=a,pa):a}}var vo=null;function hy(){if(vo===null)throw Error(i(459));var s=vo;return vo=null,s}function my(s){if(s===pa||s===vc)throw Error(i(483))}var ga=null,Dl=0;function Ec(s){var r=Dl;return Dl+=1,ga===null&&(ga=[]),fy(ga,s,r)}function Pl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Sc(s,r){throw r.$$typeof===A?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function py(s){function r(z,O){if(s){var H=z.deletions;H===null?(z.deletions=[O],z.flags|=16):H.push(O)}}function a(z,O){if(!s)return null;for(;O!==null;)r(z,O),O=O.sibling;return null}function c(z){for(var O=new Map;z!==null;)z.key!==null?O.set(z.key,z):O.set(z.index,z),z=z.sibling;return O}function y(z,O){return z=fs(z,O),z.index=0,z.sibling=null,z}function _(z,O,H){return z.index=H,s?(H=z.alternate,H!==null?(H=H.index,H<O?(z.flags|=67108866,O):H):(z.flags|=67108866,O)):(z.flags|=1048576,O)}function C(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function I(z,O,H,te){return O===null||O.tag!==6?(O=zf(H,z.mode,te),O.return=z,O):(O=y(O,H),O.return=z,O)}function V(z,O,H,te){var Te=H.type;return Te===F?Z(z,O,H.props.children,te,H.key):O!==null&&(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&_o(Te)===O.type)?(O=y(O,H.props),Pl(O,H),O.return=z,O):(O=mc(H.type,H.key,H.props,null,z.mode,te),Pl(O,H),O.return=z,O)}function Y(z,O,H,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=Gf(H,z.mode,te),O.return=z,O):(O=y(O,H.children||[]),O.return=z,O)}function Z(z,O,H,te,Te){return O===null||O.tag!==7?(O=ho(H,z.mode,te,Te),O.return=z,O):(O=y(O,H),O.return=z,O)}function ie(z,O,H){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=zf(""+O,z.mode,H),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return H=mc(O.type,O.key,O.props,null,z.mode,H),Pl(H,O),H.return=z,H;case L:return O=Gf(O,z.mode,H),O.return=z,O;case N:return O=_o(O),ie(z,O,H)}if(Ie(O)||U(O))return O=ho(O,z.mode,H,null),O.return=z,O;if(typeof O.then=="function")return ie(z,Ec(O),H);if(O.$$typeof===W)return ie(z,yc(z,O),H);Sc(z,O)}return null}function K(z,O,H,te){var Te=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:I(z,O,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===Te?V(z,O,H,te):null;case L:return H.key===Te?Y(z,O,H,te):null;case N:return H=_o(H),K(z,O,H,te)}if(Ie(H)||U(H))return Te!==null?null:Z(z,O,H,te,null);if(typeof H.then=="function")return K(z,O,Ec(H),te);if(H.$$typeof===W)return K(z,O,yc(z,H),te);Sc(z,H)}return null}function Q(z,O,H,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(H)||null,I(O,z,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return z=z.get(te.key===null?H:te.key)||null,V(O,z,te,Te);case L:return z=z.get(te.key===null?H:te.key)||null,Y(O,z,te,Te);case N:return te=_o(te),Q(z,O,H,te,Te)}if(Ie(te)||U(te))return z=z.get(H)||null,Z(O,z,te,Te,null);if(typeof te.then=="function")return Q(z,O,H,Ec(te),Te);if(te.$$typeof===W)return Q(z,O,H,yc(O,te),Te);Sc(O,te)}return null}function ge(z,O,H,te){for(var Te=null,Xe=null,_e=O,ke=O=0,ze=null;_e!==null&&ke<H.length;ke++){_e.index>ke?(ze=_e,_e=null):ze=_e.sibling;var We=K(z,_e,H[ke],te);if(We===null){_e===null&&(_e=ze);break}s&&_e&&We.alternate===null&&r(z,_e),O=_(We,O,ke),Xe===null?Te=We:Xe.sibling=We,Xe=We,_e=ze}if(ke===H.length)return a(z,_e),Je&&hs(z,ke),Te;if(_e===null){for(;ke<H.length;ke++)_e=ie(z,H[ke],te),_e!==null&&(O=_(_e,O,ke),Xe===null?Te=_e:Xe.sibling=_e,Xe=_e);return Je&&hs(z,ke),Te}for(_e=c(_e);ke<H.length;ke++)ze=Q(_e,z,ke,H[ke],te),ze!==null&&(s&&ze.alternate!==null&&_e.delete(ze.key===null?ke:ze.key),O=_(ze,O,ke),Xe===null?Te=ze:Xe.sibling=ze,Xe=ze);return s&&_e.forEach(function(Er){return r(z,Er)}),Je&&hs(z,ke),Te}function Ae(z,O,H,te){if(H==null)throw Error(i(151));for(var Te=null,Xe=null,_e=O,ke=O=0,ze=null,We=H.next();_e!==null&&!We.done;ke++,We=H.next()){_e.index>ke?(ze=_e,_e=null):ze=_e.sibling;var Er=K(z,_e,We.value,te);if(Er===null){_e===null&&(_e=ze);break}s&&_e&&Er.alternate===null&&r(z,_e),O=_(Er,O,ke),Xe===null?Te=Er:Xe.sibling=Er,Xe=Er,_e=ze}if(We.done)return a(z,_e),Je&&hs(z,ke),Te;if(_e===null){for(;!We.done;ke++,We=H.next())We=ie(z,We.value,te),We!==null&&(O=_(We,O,ke),Xe===null?Te=We:Xe.sibling=We,Xe=We);return Je&&hs(z,ke),Te}for(_e=c(_e);!We.done;ke++,We=H.next())We=Q(_e,z,ke,We.value,te),We!==null&&(s&&We.alternate!==null&&_e.delete(We.key===null?ke:We.key),O=_(We,O,ke),Xe===null?Te=We:Xe.sibling=We,Xe=We);return s&&_e.forEach(function(eI){return r(z,eI)}),Je&&hs(z,ke),Te}function ct(z,O,H,te){if(typeof H=="object"&&H!==null&&H.type===F&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var Te=H.key;O!==null;){if(O.key===Te){if(Te=H.type,Te===F){if(O.tag===7){a(z,O.sibling),te=y(O,H.props.children),te.return=z,z=te;break e}}else if(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&_o(Te)===O.type){a(z,O.sibling),te=y(O,H.props),Pl(te,H),te.return=z,z=te;break e}a(z,O);break}else r(z,O);O=O.sibling}H.type===F?(te=ho(H.props.children,z.mode,te,H.key),te.return=z,z=te):(te=mc(H.type,H.key,H.props,null,z.mode,te),Pl(te,H),te.return=z,z=te)}return C(z);case L:e:{for(Te=H.key;O!==null;){if(O.key===Te)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){a(z,O.sibling),te=y(O,H.children||[]),te.return=z,z=te;break e}else{a(z,O);break}else r(z,O);O=O.sibling}te=Gf(H,z.mode,te),te.return=z,z=te}return C(z);case N:return H=_o(H),ct(z,O,H,te)}if(Ie(H))return ge(z,O,H,te);if(U(H)){if(Te=U(H),typeof Te!="function")throw Error(i(150));return H=Te.call(H),Ae(z,O,H,te)}if(typeof H.then=="function")return ct(z,O,Ec(H),te);if(H.$$typeof===W)return ct(z,O,yc(z,H),te);Sc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,O!==null&&O.tag===6?(a(z,O.sibling),te=y(O,H),te.return=z,z=te):(a(z,O),te=zf(H,z.mode,te),te.return=z,z=te),C(z)):a(z,O)}return function(z,O,H,te){try{Dl=0;var Te=ct(z,O,H,te);return ga=null,Te}catch(_e){if(_e===pa||_e===vc)throw _e;var Xe=Gn(29,_e,null,z.mode);return Xe.lanes=te,Xe.return=z,Xe}finally{}}}var To=py(!0),gy=py(!1),sr=!1;function th(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function rr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function or(s,r,a){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=hc(s),Zg(s,null,a),r}return fc(s,c,r,a),hc(s)}function kl(s,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,a|=c,r.lanes=a,zs(s,a)}}function ih(s,r){var a=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=r:s.next=r,a.lastBaseUpdate=r}var sh=!1;function Vl(){if(sh){var s=ma;if(s!==null)throw s}}function Ul(s,r,a,c){sh=!1;var y=s.updateQueue;sr=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var V=I,Y=V.next;V.next=null,C===null?_=Y:C.next=Y,C=V;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==C&&(I===null?Z.firstBaseUpdate=Y:I.next=Y,Z.lastBaseUpdate=V))}if(_!==null){var ie=y.baseState;C=0,Z=Y=V=null,I=_;do{var K=I.lane&-536870913,Q=K!==I.lane;if(Q?(Be&K)===K:(c&K)===K){K!==0&&K===ha&&(sh=!0),Z!==null&&(Z=Z.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ge=s,Ae=I;K=r;var ct=a;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){ie=ge.call(ct,ie,K);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,K=typeof ge=="function"?ge.call(ct,ie,K):ge,K==null)break e;ie=E({},ie,K);break e;case 2:sr=!0}}K=I.callback,K!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?(Y=Z=Q,V=ie):Z=Z.next=Q,C|=K;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Q=I,I=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);Z===null&&(V=ie),y.baseState=V,y.firstBaseUpdate=Y,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),dr|=C,s.lanes=C,s.memoizedState=ie}}function yy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function _y(s,r){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)yy(a[s],r)}var ya=q(null),Ac=q(0);function vy(s,r){s=Cs,le(Ac,s),le(ya,r),Cs=s|r.baseLanes}function rh(){le(Ac,Cs),le(ya,ya.current)}function oh(){Cs=Ac.current,ne(ya),ne(Ac)}var Hn=q(null),li=null;function ar(s){var r=s.alternate;le(Mt,Mt.current&1),le(Hn,s),li===null&&(r===null||ya.current!==null||r.memoizedState!==null)&&(li=s)}function ah(s){le(Mt,Mt.current),le(Hn,s),li===null&&(li=s)}function Ty(s){s.tag===22?(le(Mt,Mt.current),le(Hn,s),li===null&&(li=s)):lr()}function lr(){le(Mt,Mt.current),le(Hn,Hn.current)}function Yn(s){ne(Hn),li===s&&(li=null),ne(Mt)}var Mt=q(0);function Cc(s){for(var r=s;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hm(a)||mm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var gs=0,Pe=null,lt=null,Ot=null,xc=!1,_a=!1,Eo=!1,wc=0,Ll=0,va=null,Hx=0;function Rt(){throw Error(i(321))}function lh(s,r){if(r===null)return!1;for(var a=0;a<r.length&&a<s.length;a++)if(!zn(s[a],r[a]))return!1;return!0}function uh(s,r,a,c,y,_){return gs=_,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=s===null||s.memoizedState===null?i_:Ch,Eo=!1,_=a(c,y),Eo=!1,_a&&(_=Sy(r,a,c,y)),Ey(s),_}function Ey(s){J.H=Fl;var r=lt!==null&&lt.next!==null;if(gs=0,Ot=lt=Pe=null,xc=!1,Ll=0,va=null,r)throw Error(i(300));s===null||qt||(s=s.dependencies,s!==null&&gc(s)&&(qt=!0))}function Sy(s,r,a,c){Pe=s;var y=0;do{if(_a&&(va=null),Ll=0,_a=!1,25<=y)throw Error(i(301));if(y+=1,Ot=lt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}J.H=s_,_=r(a,c)}while(_a);return _}function Yx(){var s=J.H,r=s.useState()[0];return r=typeof r.then=="function"?Ol(r):r,s=s.useState()[0],(lt!==null?lt.memoizedState:null)!==s&&(Pe.flags|=1024),r}function ch(){var s=wc!==0;return wc=0,s}function dh(s,r,a){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~a}function fh(s){if(xc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}xc=!1}gs=0,Ot=lt=Pe=null,_a=!1,Ll=wc=0,va=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Pe.memoizedState=Ot=s:Ot=Ot.next=s,Ot}function Dt(){if(lt===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=lt.next;var r=Ot===null?Pe.memoizedState:Ot.next;if(r!==null)Ot=r,lt=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));lt=s,s={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Ot===null?Pe.memoizedState=Ot=s:Ot=Ot.next=s}return Ot}function Ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(s){var r=Ll;return Ll+=1,va===null&&(va=[]),s=fy(va,s,r),r=Pe,(Ot===null?r.memoizedState:Ot.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?i_:Ch),s}function Rc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ol(s);if(s.$$typeof===W)return en(s)}throw Error(i(438,String(s)))}function hh(s){var r=null,a=Pe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ic(),Pe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(s),c=0;c<s;c++)a[c]=k;return r.index++,a}function ys(s,r){return typeof r=="function"?r(s):r}function bc(s){var r=Dt();return mh(r,lt,s)}function mh(s,r,a){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var I=C=null,V=null,Y=r,Z=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(Be&ie)===ie:(gs&ie)===ie){var K=Y.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===ha&&(Z=!0);else if((gs&K)===K){Y=Y.next,K===ha&&(Z=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(I=V=ie,C=_):V=V.next=ie,Pe.lanes|=K,dr|=K;ie=Y.action,Eo&&a(_,ie),_=Y.hasEagerState?Y.eagerState:a(_,ie)}else K={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(I=V=K,C=_):V=V.next=K,Pe.lanes|=ie,dr|=ie;Y=Y.next}while(Y!==null&&Y!==r);if(V===null?C=_:V.next=I,!zn(_,s.memoizedState)&&(qt=!0,Z&&(a=ma,a!==null)))throw a;s.memoizedState=_,s.baseState=C,s.baseQueue=V,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function ph(s){var r=Dt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var C=y=y.next;do _=s(_,C.action),C=C.next;while(C!==y);zn(_,r.memoizedState)||(qt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function Ay(s,r,a){var c=Pe,y=Dt(),_=Je;if(_){if(a===void 0)throw Error(i(407));a=a()}else a=r();var C=!zn((lt||y).memoizedState,a);if(C&&(y.memoizedState=a,qt=!0),y=y.queue,_h(wy.bind(null,c,y,s),[s]),y.getSnapshot!==r||C||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,Ta(9,{destroy:void 0},xy.bind(null,c,y,a,r),null),dt===null)throw Error(i(349));_||(gs&127)!==0||Cy(c,r,a)}return a}function Cy(s,r,a){s.flags|=16384,s={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r=Ic(),Pe.updateQueue=r,r.stores=[s]):(a=r.stores,a===null?r.stores=[s]:a.push(s))}function xy(s,r,a,c){r.value=a,r.getSnapshot=c,Iy(r)&&Ry(s)}function wy(s,r,a){return a(function(){Iy(r)&&Ry(s)})}function Iy(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!zn(s,a)}catch{return!0}}function Ry(s){var r=fo(s,2);r!==null&&Dn(r,s,2)}function gh(s){var r=vn();if(typeof s=="function"){var a=s;if(s=a(),Eo){pn(!0);try{a()}finally{pn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:s},r}function by(s,r,a,c){return s.baseState=a,mh(s,lt,typeof c=="function"?c:ys)}function Jx(s,r,a,c,y){if(Dc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};J.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,Ny(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Ny(s,r){var a=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=J.T,C={};J.T=C;try{var I=a(y,c),V=J.S;V!==null&&V(C,I),My(s,r,I)}catch(Y){yh(s,r,Y)}finally{_!==null&&C.types!==null&&(_.types=C.types),J.T=_}}else try{_=a(y,c),My(s,r,_)}catch(Y){yh(s,r,Y)}}function My(s,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Dy(s,r,c)},function(c){return yh(s,r,c)}):Dy(s,r,a)}function Dy(s,r,a){r.status="fulfilled",r.value=a,Py(r),s.state=a,r=s.pending,r!==null&&(a=r.next,a===r?s.pending=null:(a=a.next,r.next=a,Ny(s,a)))}function yh(s,r,a){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Py(r),r=r.next;while(r!==c)}s.action=null}function Py(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function ky(s,r){return r}function Vy(s,r){if(Je){var a=dt.formState;if(a!==null){e:{var c=Pe;if(Je){if(gt){t:{for(var y=gt,_=ai;y.nodeType!==8;){if(!_){y=null;break t}if(y=ui(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){gt=ui(y.nextSibling),c=y.data==="F!";break e}}nr(c)}c=!1}c&&(r=a[0])}}return a=vn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ky,lastRenderedState:r},a.queue=c,a=e_.bind(null,Pe,c),c.dispatch=a,c=gh(!1),_=Ah.bind(null,Pe,!1,c.queue),c=vn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,a=Jx.bind(null,Pe,y,_,a),y.dispatch=a,c.memoizedState=s,[r,a,!1]}function Uy(s){var r=Dt();return Ly(r,lt,s)}function Ly(s,r,a){if(r=mh(s,r,ky)[0],s=bc(ys)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Ol(r)}catch(C){throw C===pa?vc:C}else c=r;r=Dt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Pe.flags|=2048,Ta(9,{destroy:void 0},Kx.bind(null,y,a),null)),[c,_,s]}function Kx(s,r){s.action=r}function Oy(s){var r=Dt(),a=lt;if(a!==null)return Ly(r,a,s);Dt(),r=r.memoizedState,a=Dt();var c=a.queue.dispatch;return a.memoizedState=s,[r,c,!1]}function Ta(s,r,a,c){return s={tag:s,create:a,deps:c,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Ic(),Pe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=s.next=s:(c=a.next,a.next=s,s.next=c,r.lastEffect=s),s}function qy(){return Dt().memoizedState}function Nc(s,r,a,c){var y=vn();Pe.flags|=s,y.memoizedState=Ta(1|r,{destroy:void 0},a,c===void 0?null:c)}function Mc(s,r,a,c){var y=Dt();c=c===void 0?null:c;var _=y.memoizedState.inst;lt!==null&&c!==null&&lh(c,lt.memoizedState.deps)?y.memoizedState=Ta(r,_,a,c):(Pe.flags|=s,y.memoizedState=Ta(1|r,_,a,c))}function Fy(s,r){Nc(8390656,8,s,r)}function _h(s,r){Mc(2048,8,s,r)}function jx(s){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=Ic(),Pe.updateQueue=r,r.events=[s];else{var a=r.events;a===null?r.events=[s]:a.push(s)}}function By(s){var r=Dt().memoizedState;return jx({ref:r,nextImpl:s}),function(){if((tt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function zy(s,r){return Mc(4,2,s,r)}function Gy(s,r){return Mc(4,4,s,r)}function Hy(s,r){if(typeof r=="function"){s=s();var a=r(s);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Yy(s,r,a){a=a!=null?a.concat([s]):null,Mc(4,4,Hy.bind(null,r,s),a)}function vh(){}function Jy(s,r){var a=Dt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&lh(r,c[1])?c[0]:(a.memoizedState=[s,r],s)}function Ky(s,r){var a=Dt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&lh(r,c[1]))return c[0];if(c=s(),Eo){pn(!0);try{s()}finally{pn(!1)}}return a.memoizedState=[c,r],c}function Th(s,r,a){return a===void 0||(gs&1073741824)!==0&&(Be&261930)===0?s.memoizedState=r:(s.memoizedState=a,s=j_(),Pe.lanes|=s,dr|=s,a)}function jy(s,r,a,c){return zn(a,r)?a:ya.current!==null?(s=Th(s,a,c),zn(s,r)||(qt=!0),s):(gs&42)===0||(gs&1073741824)!==0&&(Be&261930)===0?(qt=!0,s.memoizedState=a):(s=j_(),Pe.lanes|=s,dr|=s,r)}function Qy(s,r,a,c,y){var _=re.p;re.p=_!==0&&8>_?_:8;var C=J.T,I={};J.T=I,Ah(s,!1,r,a);try{var V=y(),Y=J.S;if(Y!==null&&Y(I,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=Gx(V,c);ql(s,r,Z,jn(s))}else ql(s,r,c,jn(s))}catch(ie){ql(s,r,{then:function(){},status:"rejected",reason:ie},jn())}finally{re.p=_,C!==null&&I.types!==null&&(C.types=I.types),J.T=C}}function Qx(){}function Eh(s,r,a,c){if(s.tag!==5)throw Error(i(476));var y=$y(s).queue;Qy(s,y,r,he,a===null?Qx:function(){return Xy(s),a(c)})}function $y(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:he},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:a},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Xy(s){var r=$y(s);r.next===null&&(r=s.alternate.memoizedState),ql(s,r.next.queue,{},jn())}function Sh(){return en(nu)}function Wy(){return Dt().memoizedState}function Zy(){return Dt().memoizedState}function $x(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var a=jn();s=rr(a);var c=or(r,s,a);c!==null&&(Dn(c,r,a),kl(c,r,a)),r={cache:Xf()},s.payload=r;return}r=r.return}}function Xx(s,r,a){var c=jn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Dc(s)?t_(r,a):(a=Ff(s,r,a,c),a!==null&&(Dn(a,s,c),n_(a,r,c)))}function e_(s,r,a){var c=jn();ql(s,r,a,c)}function ql(s,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dc(s))t_(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,I=_(C,a);if(y.hasEagerState=!0,y.eagerState=I,zn(I,C))return fc(s,r,y,0),dt===null&&dc(),!1}catch{}finally{}if(a=Ff(s,r,y,c),a!==null)return Dn(a,s,c),n_(a,r,c),!0}return!1}function Ah(s,r,a,c){if(c={lane:2,revertLane:tm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Dc(s)){if(r)throw Error(i(479))}else r=Ff(s,a,c,2),r!==null&&Dn(r,s,2)}function Dc(s){var r=s.alternate;return s===Pe||r!==null&&r===Pe}function t_(s,r){_a=xc=!0;var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}function n_(s,r,a){if((a&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,a|=c,r.lanes=a,zs(s,a)}}var Fl={readContext:en,use:Rc,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Fl.useEffectEvent=Rt;var i_={readContext:en,use:Rc,useCallback:function(s,r){return vn().memoizedState=[s,r===void 0?null:r],s},useContext:en,useEffect:Fy,useImperativeHandle:function(s,r,a){a=a!=null?a.concat([s]):null,Nc(4194308,4,Hy.bind(null,r,s),a)},useLayoutEffect:function(s,r){return Nc(4194308,4,s,r)},useInsertionEffect:function(s,r){Nc(4,2,s,r)},useMemo:function(s,r){var a=vn();r=r===void 0?null:r;var c=s();if(Eo){pn(!0);try{s()}finally{pn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(s,r,a){var c=vn();if(a!==void 0){var y=a(r);if(Eo){pn(!0);try{a(r)}finally{pn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Xx.bind(null,Pe,s),[c.memoizedState,s]},useRef:function(s){var r=vn();return s={current:s},r.memoizedState=s},useState:function(s){s=gh(s);var r=s.queue,a=e_.bind(null,Pe,r);return r.dispatch=a,[s.memoizedState,a]},useDebugValue:vh,useDeferredValue:function(s,r){var a=vn();return Th(a,s,r)},useTransition:function(){var s=gh(!1);return s=Qy.bind(null,Pe,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,a){var c=Pe,y=vn();if(Je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),dt===null)throw Error(i(349));(Be&127)!==0||Cy(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,Fy(wy.bind(null,c,_,s),[s]),c.flags|=2048,Ta(9,{destroy:void 0},xy.bind(null,c,_,a,r),null),a},useId:function(){var s=vn(),r=dt.identifierPrefix;if(Je){var a=Yi,c=Hi;a=(c&~(1<<32-Et(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=wc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Hx++,r="_"+r+"r_"+a.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Sh,useFormState:Vy,useActionState:Vy,useOptimistic:function(s){var r=vn();r.memoizedState=r.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Ah.bind(null,Pe,!0,a),a.dispatch=r,[s,r]},useMemoCache:hh,useCacheRefresh:function(){return vn().memoizedState=$x.bind(null,Pe)},useEffectEvent:function(s){var r=vn(),a={impl:s};return r.memoizedState=a,function(){if((tt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Ch={readContext:en,use:Rc,useCallback:Jy,useContext:en,useEffect:_h,useImperativeHandle:Yy,useInsertionEffect:zy,useLayoutEffect:Gy,useMemo:Ky,useReducer:bc,useRef:qy,useState:function(){return bc(ys)},useDebugValue:vh,useDeferredValue:function(s,r){var a=Dt();return jy(a,lt.memoizedState,s,r)},useTransition:function(){var s=bc(ys)[0],r=Dt().memoizedState;return[typeof s=="boolean"?s:Ol(s),r]},useSyncExternalStore:Ay,useId:Wy,useHostTransitionStatus:Sh,useFormState:Uy,useActionState:Uy,useOptimistic:function(s,r){var a=Dt();return by(a,lt,s,r)},useMemoCache:hh,useCacheRefresh:Zy};Ch.useEffectEvent=By;var s_={readContext:en,use:Rc,useCallback:Jy,useContext:en,useEffect:_h,useImperativeHandle:Yy,useInsertionEffect:zy,useLayoutEffect:Gy,useMemo:Ky,useReducer:ph,useRef:qy,useState:function(){return ph(ys)},useDebugValue:vh,useDeferredValue:function(s,r){var a=Dt();return lt===null?Th(a,s,r):jy(a,lt.memoizedState,s,r)},useTransition:function(){var s=ph(ys)[0],r=Dt().memoizedState;return[typeof s=="boolean"?s:Ol(s),r]},useSyncExternalStore:Ay,useId:Wy,useHostTransitionStatus:Sh,useFormState:Oy,useActionState:Oy,useOptimistic:function(s,r){var a=Dt();return lt!==null?by(a,lt,s,r):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:hh,useCacheRefresh:Zy};s_.useEffectEvent=By;function xh(s,r,a,c){r=s.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var wh={enqueueSetState:function(s,r,a){s=s._reactInternals;var c=jn(),y=rr(c);y.payload=r,a!=null&&(y.callback=a),r=or(s,y,c),r!==null&&(Dn(r,s,c),kl(r,s,c))},enqueueReplaceState:function(s,r,a){s=s._reactInternals;var c=jn(),y=rr(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=or(s,y,c),r!==null&&(Dn(r,s,c),kl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var a=jn(),c=rr(a);c.tag=2,r!=null&&(c.callback=r),r=or(s,c,a),r!==null&&(Dn(r,s,a),kl(r,s,a))}};function r_(s,r,a,c,y,_,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,C):r.prototype&&r.prototype.isPureReactComponent?!wl(a,c)||!wl(y,_):!0}function o_(s,r,a,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==s&&wh.enqueueReplaceState(r,r.state,null)}function So(s,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(s=s.defaultProps){a===r&&(a=E({},a));for(var y in s)a[y]===void 0&&(a[y]=s[y])}return a}function a_(s){cc(s)}function l_(s){console.error(s)}function u_(s){cc(s)}function Pc(s,r){try{var a=s.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function c_(s,r,a){try{var c=s.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ih(s,r,a){return a=rr(a),a.tag=3,a.payload={element:null},a.callback=function(){Pc(s,r)},a}function d_(s){return s=rr(s),s.tag=3,s}function f_(s,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){c_(r,a,c)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){c_(r,a,c),typeof y!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function Wx(s,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&fa(r,a,y,!0),a=Hn.current,a!==null){switch(a.tag){case 31:case 13:return li===null?Yc():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Tc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Wh(s,c,y)),!1;case 22:return a.flags|=65536,c===Tc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Wh(s,c,y)),!1}throw Error(i(435,a.tag))}return Wh(s,c,y),Yc(),!1}if(Je)return r=Hn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Jf&&(s=Error(i(422),{cause:c}),bl(si(s,a)))):(c!==Jf&&(r=Error(i(423),{cause:c}),bl(si(r,a))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=si(c,a),y=Ih(s.stateNode,c,y),ih(s,y),bt!==4&&(bt=2)),!1;var _=Error(i(520),{cause:c});if(_=si(_,a),jl===null?jl=[_]:jl.push(_),bt!==4&&(bt=2),r===null)return!0;c=si(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,s=y&-y,a.lanes|=s,s=Ih(a.stateNode,c,s),ih(a,s),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fr===null||!fr.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=d_(y),f_(y,s,a,c),ih(a,y),!1}a=a.return}while(a!==null);return!1}var Rh=Error(i(461)),qt=!1;function tn(s,r,a,c){r.child=s===null?gy(r,null,a,c):To(r,s.child,a,c)}function h_(s,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var C={};for(var I in c)I!=="ref"&&(C[I]=c[I])}else C=c;return go(r),c=uh(s,r,a,C,_,y),I=ch(),s!==null&&!qt?(dh(s,r,y),_s(s,r,y)):(Je&&I&&Hf(r),r.flags|=1,tn(s,r,c,y),r.child)}function m_(s,r,a,c,y){if(s===null){var _=a.type;return typeof _=="function"&&!Bf(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,p_(s,r,_,c,y)):(s=mc(a.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Uh(s,y)){var C=_.memoizedProps;if(a=a.compare,a=a!==null?a:wl,a(C,c)&&s.ref===r.ref)return _s(s,r,y)}return r.flags|=1,s=fs(_,c),s.ref=r.ref,s.return=r,r.child=s}function p_(s,r,a,c,y){if(s!==null){var _=s.memoizedProps;if(wl(_,c)&&s.ref===r.ref)if(qt=!1,r.pendingProps=c=_,Uh(s,y))(s.flags&131072)!==0&&(qt=!0);else return r.lanes=s.lanes,_s(s,r,y)}return bh(s,r,a,c,y)}function g_(s,r,a,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return y_(s,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&_c(r,_!==null?_.cachePool:null),_!==null?vy(r,_):rh(),Ty(r);else return c=r.lanes=536870912,y_(s,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(_c(r,_.cachePool),vy(r,_),lr(),r.memoizedState=null):(s!==null&&_c(r,null),rh(),lr());return tn(s,r,y,a),r.child}function Bl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function y_(s,r,a,c,y){var _=Zf();return _=_===null?null:{parent:Lt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},s!==null&&_c(r,null),rh(),Ty(r),s!==null&&fa(s,r,c,!0),r.childLanes=y,null}function kc(s,r){return r=Uc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function __(s,r,a){return To(r,s.child,null,a),s=kc(r,r.pendingProps),s.flags|=2,Yn(r),r.memoizedState=null,s}function Zx(s,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Je){if(c.mode==="hidden")return s=kc(r,c),r.lanes=536870912,Bl(null,s);if(ah(r),(s=gt)?(s=Nv(s,ai),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:er!==null?{id:Hi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},a=ty(s),a.return=r,r.child=a,Zt=r,gt=null)):s=null,s===null)throw nr(r);return r.lanes=536870912,null}return kc(r,c)}var _=s.memoizedState;if(_!==null){var C=_.dehydrated;if(ah(r),y)if(r.flags&256)r.flags&=-257,r=__(s,r,a);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(qt||fa(s,r,a,!1),y=(a&s.childLanes)!==0,qt||y){if(c=dt,c!==null&&(C=Gs(c,a),C!==0&&C!==_.retryLane))throw _.retryLane=C,fo(s,C),Dn(c,s,C),Rh;Yc(),r=__(s,r,a)}else s=_.treeContext,gt=ui(C.nextSibling),Zt=r,Je=!0,tr=null,ai=!1,s!==null&&sy(r,s),r=kc(r,c),r.flags|=4096;return r}return s=fs(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Vc(s,r){var a=r.ref;if(a===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(r.flags|=4194816)}}function bh(s,r,a,c,y){return go(r),a=uh(s,r,a,c,void 0,y),c=ch(),s!==null&&!qt?(dh(s,r,y),_s(s,r,y)):(Je&&c&&Hf(r),r.flags|=1,tn(s,r,a,y),r.child)}function v_(s,r,a,c,y,_){return go(r),r.updateQueue=null,a=Sy(r,c,a,y),Ey(s),c=ch(),s!==null&&!qt?(dh(s,r,_),_s(s,r,_)):(Je&&c&&Hf(r),r.flags|=1,tn(s,r,a,_),r.child)}function T_(s,r,a,c,y){if(go(r),r.stateNode===null){var _=la,C=a.contextType;typeof C=="object"&&C!==null&&(_=en(C)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=wh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},th(r),C=a.contextType,_.context=typeof C=="object"&&C!==null?en(C):la,_.state=r.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(xh(r,a,C,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&wh.enqueueReplaceState(_,_.state,null),Ul(r,c,_,y),Vl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var I=r.memoizedProps,V=So(a,I);_.props=V;var Y=_.context,Z=a.contextType;C=la,typeof Z=="object"&&Z!==null&&(C=en(Z));var ie=a.getDerivedStateFromProps;Z=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||Y!==C)&&o_(r,_,c,C),sr=!1;var K=r.memoizedState;_.state=K,Ul(r,c,_,y),Vl(),Y=r.memoizedState,I||K!==Y||sr?(typeof ie=="function"&&(xh(r,a,ie,c),Y=r.memoizedState),(V=sr||r_(r,a,V,c,K,Y,C))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=C,c=V):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,nh(s,r),C=r.memoizedProps,Z=So(a,C),_.props=Z,ie=r.pendingProps,K=_.context,Y=a.contextType,V=la,typeof Y=="object"&&Y!==null&&(V=en(Y)),I=a.getDerivedStateFromProps,(Y=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ie||K!==V)&&o_(r,_,c,V),sr=!1,K=r.memoizedState,_.state=K,Ul(r,c,_,y),Vl();var Q=r.memoizedState;C!==ie||K!==Q||sr||s!==null&&s.dependencies!==null&&gc(s.dependencies)?(typeof I=="function"&&(xh(r,a,I,c),Q=r.memoizedState),(Z=sr||r_(r,a,Z,c,K,Q,V)||s!==null&&s.dependencies!==null&&gc(s.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=V,c=Z):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Vc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=To(r,s.child,null,y),r.child=To(r,null,a,y)):tn(s,r,a,y),r.memoizedState=_.state,s=r.child):s=_s(s,r,y),s}function E_(s,r,a,c){return mo(),r.flags|=256,tn(s,r,a,c),r.child}var Nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mh(s){return{baseLanes:s,cachePool:cy()}}function Dh(s,r,a){return s=s!==null?s.childLanes&~a:0,r&&(s|=Kn),s}function S_(s,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=s!==null&&s.memoizedState===null?!1:(Mt.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,s===null){if(Je){if(y?ar(r):lr(),(s=gt)?(s=Nv(s,ai),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:er!==null?{id:Hi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},a=ty(s),a.return=r,r.child=a,Zt=r,gt=null)):s=null,s===null)throw nr(r);return mm(s)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(lr(),y=r.mode,I=Uc({mode:"hidden",children:I},y),c=ho(c,y,a,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=Mh(a),c.childLanes=Dh(s,C,a),r.memoizedState=Nh,Bl(null,c)):(ar(r),Ph(r,I))}var V=s.memoizedState;if(V!==null&&(I=V.dehydrated,I!==null)){if(_)r.flags&256?(ar(r),r.flags&=-257,r=kh(s,r,a)):r.memoizedState!==null?(lr(),r.child=s.child,r.flags|=128,r=null):(lr(),I=c.fallback,y=r.mode,c=Uc({mode:"visible",children:c.children},y),I=ho(I,y,a,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,To(r,s.child,null,a),c=r.child,c.memoizedState=Mh(a),c.childLanes=Dh(s,C,a),r.memoizedState=Nh,r=Bl(null,c));else if(ar(r),mm(I)){if(C=I.nextSibling&&I.nextSibling.dataset,C)var Y=C.dgst;C=Y,c=Error(i(419)),c.stack="",c.digest=C,bl({value:c,source:null,stack:null}),r=kh(s,r,a)}else if(qt||fa(s,r,a,!1),C=(a&s.childLanes)!==0,qt||C){if(C=dt,C!==null&&(c=Gs(C,a),c!==0&&c!==V.retryLane))throw V.retryLane=c,fo(s,c),Dn(C,s,c),Rh;hm(I)||Yc(),r=kh(s,r,a)}else hm(I)?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,gt=ui(I.nextSibling),Zt=r,Je=!0,tr=null,ai=!1,s!==null&&sy(r,s),r=Ph(r,c.children),r.flags|=4096);return r}return y?(lr(),I=c.fallback,y=r.mode,V=s.child,Y=V.sibling,c=fs(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,Y!==null?I=fs(Y,I):(I=ho(I,y,a,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,Bl(null,c),c=r.child,I=s.child.memoizedState,I===null?I=Mh(a):(y=I.cachePool,y!==null?(V=Lt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=cy(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=Dh(s,C,a),r.memoizedState=Nh,Bl(s.child,c)):(ar(r),a=s.child,s=a.sibling,a=fs(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,s!==null&&(C=r.deletions,C===null?(r.deletions=[s],r.flags|=16):C.push(s)),r.child=a,r.memoizedState=null,a)}function Ph(s,r){return r=Uc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Uc(s,r){return s=Gn(22,s,null,r),s.lanes=0,s}function kh(s,r,a){return To(r,s.child,null,a),s=Ph(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function A_(s,r,a){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Qf(s.return,r,a)}function Vh(s,r,a,c,y,_){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=a,C.tailMode=y,C.treeForkCount=_)}function C_(s,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var C=Mt.current,I=(C&2)!==0;if(I?(C=C&1|2,r.flags|=128):C&=1,le(Mt,C),tn(s,r,c,a),c=Je?Rl:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&A_(s,a,r);else if(s.tag===19)A_(s,a,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)s=a.alternate,s!==null&&Cc(s)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Vh(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Cc(s)===null){r.child=y;break}s=y.sibling,y.sibling=a,a=y,y=s}Vh(r,!0,a,null,_,c);break;case"together":Vh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function _s(s,r,a){if(s!==null&&(r.dependencies=s.dependencies),dr|=r.lanes,(a&r.childLanes)===0)if(s!==null){if(fa(s,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,a=fs(s,s.pendingProps),r.child=a,a.return=r;s.sibling!==null;)s=s.sibling,a=a.sibling=fs(s,s.pendingProps),a.return=r;a.sibling=null}return r.child}function Uh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&gc(s)))}function ew(s,r,a){switch(r.tag){case 3:xt(r,r.stateNode.containerInfo),ir(r,Lt,s.memoizedState.cache),mo();break;case 27:case 5:Di(r);break;case 4:xt(r,r.stateNode.containerInfo);break;case 10:ir(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ah(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ar(r),r.flags|=128,null):(a&r.child.childLanes)!==0?S_(s,r,a):(ar(r),s=_s(s,r,a),s!==null?s.sibling:null);ar(r);break;case 19:var y=(s.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(fa(s,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return C_(s,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Mt,Mt.current),c)break;return null;case 22:return r.lanes=0,g_(s,r,a,r.pendingProps);case 24:ir(r,Lt,s.memoizedState.cache)}return _s(s,r,a)}function x_(s,r,a){if(s!==null)if(s.memoizedProps!==r.pendingProps)qt=!0;else{if(!Uh(s,a)&&(r.flags&128)===0)return qt=!1,ew(s,r,a);qt=(s.flags&131072)!==0}else qt=!1,Je&&(r.flags&1048576)!==0&&iy(r,Rl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=_o(r.elementType),r.type=s,typeof s=="function")Bf(s)?(c=So(s,c),r.tag=1,r=T_(null,r,s,c,a)):(r.tag=0,r=bh(null,r,s,c,a));else{if(s!=null){var y=s.$$typeof;if(y===ae){r.tag=11,r=h_(null,r,s,c,a);break e}else if(y===D){r.tag=14,r=m_(null,r,s,c,a);break e}}throw r=Se(s)||s,Error(i(306,r,""))}}return r;case 0:return bh(s,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=So(c,r.pendingProps),T_(s,r,c,y,a);case 3:e:{if(xt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,nh(s,r),Ul(r,c,null,a);var C=r.memoizedState;if(c=C.cache,ir(r,Lt,c),c!==_.cache&&$f(r,[Lt],a,!0),Vl(),c=C.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=E_(s,r,c,a);break e}else if(c!==y){y=si(Error(i(424)),r),bl(y),r=E_(s,r,c,a);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gt=ui(s.firstChild),Zt=r,Je=!0,tr=null,ai=!0,a=gy(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(mo(),c===y){r=_s(s,r,a);break e}tn(s,r,c,a)}r=r.child}return r;case 26:return Vc(s,r),s===null?(a=Uv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Je||(a=r.type,s=r.pendingProps,c=Wc(Re.current).createElement(a),c[it]=r,c[Vt]=s,nn(c,a,s),Ve(c),r.stateNode=c):r.memoizedState=Uv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Di(r),s===null&&Je&&(c=r.stateNode=Pv(r.type,r.pendingProps,Re.current),Zt=r,ai=!0,y=gt,gr(r.type)?(pm=y,gt=ui(c.firstChild)):gt=y),tn(s,r,r.pendingProps.children,a),Vc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Je&&((y=c=gt)&&(c=Nw(c,r.type,r.pendingProps,ai),c!==null?(r.stateNode=c,Zt=r,gt=ui(c.firstChild),ai=!1,y=!0):y=!1),y||nr(r)),Di(r),y=r.type,_=r.pendingProps,C=s!==null?s.memoizedProps:null,c=_.children,cm(y,_)?c=null:C!==null&&cm(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=uh(s,r,Yx,null,null,a),nu._currentValue=y),Vc(s,r),tn(s,r,c,a),r.child;case 6:return s===null&&Je&&((s=a=gt)&&(a=Mw(a,r.pendingProps,ai),a!==null?(r.stateNode=a,Zt=r,gt=null,s=!0):s=!1),s||nr(r)),null;case 13:return S_(s,r,a);case 4:return xt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=To(r,null,c,a):tn(s,r,c,a),r.child;case 11:return h_(s,r,r.type,r.pendingProps,a);case 7:return tn(s,r,r.pendingProps,a),r.child;case 8:return tn(s,r,r.pendingProps.children,a),r.child;case 12:return tn(s,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,ir(r,r.type,c.value),tn(s,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,go(r),y=en(y),c=c(y),r.flags|=1,tn(s,r,c,a),r.child;case 14:return m_(s,r,r.type,r.pendingProps,a);case 15:return p_(s,r,r.type,r.pendingProps,a);case 19:return C_(s,r,a);case 31:return Zx(s,r,a);case 22:return g_(s,r,a,r.pendingProps);case 24:return go(r),c=en(Lt),s===null?(y=Zf(),y===null&&(y=dt,_=Xf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},th(r),ir(r,Lt,y)):((s.lanes&a)!==0&&(nh(s,r),Ul(r,null,null,a),Vl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),ir(r,Lt,c)):(c=_.cache,ir(r,Lt,c),c!==y.cache&&$f(r,[Lt],a,!0))),tn(s,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function vs(s){s.flags|=4}function Lh(s,r,a,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(W_())s.flags|=8192;else throw vo=Tc,eh}else s.flags&=-16777217}function w_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Bv(r))if(W_())s.flags|=8192;else throw vo=Tc,eh}function Lc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Ko():536870912,s.lanes|=r,Ca|=r)}function zl(s,r){if(!Je)switch(s.tailMode){case"hidden":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function yt(s){var r=s.alternate!==null&&s.alternate.child===s.child,a=0,c=0;if(r)for(var y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=a,r}function tw(s,r,a){var c=r.pendingProps;switch(Yf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(r),null;case 1:return yt(r),null;case 3:return a=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ps(Lt),ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(da(r)?vs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Kf())),yt(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(vs(r),_!==null?(yt(r),w_(r,_)):(yt(r),Lh(r,y,null,c,a))):_?_!==s.memoizedState?(vs(r),yt(r),w_(r,_)):(yt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&vs(r),yt(r),Lh(r,y,s,c,a)),null;case 27:if(mi(r),a=Re.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&vs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return yt(r),null}s=me.current,da(r)?ry(r):(s=Pv(y,c,a),r.stateNode=s,vs(r))}return yt(r),null;case 5:if(mi(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&vs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return yt(r),null}if(_=me.current,da(r))ry(r);else{var C=Wc(Re.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?C.createElement(y,{is:c.is}):C.createElement(y)}}_[it]=r,_[Vt]=c;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(nn(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&vs(r)}}return yt(r),Lh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,a),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&vs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Re.current,da(r)){if(s=r.stateNode,a=r.memoizedProps,c=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[it]=r,s=!!(s.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Sv(s.nodeValue,a)),s||nr(r,!0)}else s=Wc(s).createTextNode(c),s[it]=r,r.stateNode=s}return yt(r),null;case 31:if(a=r.memoizedState,s===null||s.memoizedState!==null){if(c=da(r),a!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[it]=r}else mo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;yt(r),s=!1}else a=Kf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return r.flags&256?(Yn(r),r):(Yn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return yt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=da(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[it]=r}else mo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;yt(r),y=!1}else y=Kf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Yn(r),r):(Yn(r),null)}return Yn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,s=s!==null&&s.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==s&&a&&(r.child.flags|=8192),Lc(r,r.updateQueue),yt(r),null);case 4:return ht(),s===null&&rm(r.stateNode.containerInfo),yt(r),null;case 10:return ps(r.type),yt(r),null;case 19:if(ne(Mt),c=r.memoizedState,c===null)return yt(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)zl(c,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=Cc(s),_!==null){for(r.flags|=128,zl(c,!1),s=_.updateQueue,r.updateQueue=s,Lc(r,s),r.subtreeFlags=0,s=a,a=r.child;a!==null;)ey(a,s),a=a.sibling;return le(Mt,Mt.current&1|2),Je&&hs(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Kt()>zc&&(r.flags|=128,y=!0,zl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Cc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Lc(r,s),zl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Je)return yt(r),null}else 2*Kt()-c.renderingStartTime>zc&&a!==536870912&&(r.flags|=128,y=!0,zl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Kt(),s.sibling=null,a=Mt.current,le(Mt,y?a&1|2:a&1),Je&&hs(r,c.treeForkCount),s):(yt(r),null);case 22:case 23:return Yn(r),oh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(yt(r),r.subtreeFlags&6&&(r.flags|=8192)):yt(r),a=r.updateQueue,a!==null&&Lc(r,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),s!==null&&ne(yo),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ps(Lt),yt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function nw(s,r){switch(Yf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ps(Lt),ht(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return mi(r),null;case 31:if(r.memoizedState!==null){if(Yn(r),r.alternate===null)throw Error(i(340));mo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Yn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));mo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ne(Mt),null;case 4:return ht(),null;case 10:return ps(r.type),null;case 22:case 23:return Yn(r),oh(),s!==null&&ne(yo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ps(Lt),null;case 25:return null;default:return null}}function I_(s,r){switch(Yf(r),r.tag){case 3:ps(Lt),ht();break;case 26:case 27:case 5:mi(r);break;case 4:ht();break;case 31:r.memoizedState!==null&&Yn(r);break;case 13:Yn(r);break;case 19:ne(Mt);break;case 10:ps(r.type);break;case 22:case 23:Yn(r),oh(),s!==null&&ne(yo);break;case 24:ps(Lt)}}function Gl(s,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&s)===s){c=void 0;var _=a.create,C=a.inst;c=_(),C.destroy=c}a=a.next}while(a!==y)}}catch(I){ot(r,r.return,I)}}function ur(s,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var C=c.inst,I=C.destroy;if(I!==void 0){C.destroy=void 0,y=r;var V=a,Y=I;try{Y()}catch(Z){ot(y,V,Z)}}}c=c.next}while(c!==_)}}catch(Z){ot(r,r.return,Z)}}function R_(s){var r=s.updateQueue;if(r!==null){var a=s.stateNode;try{_y(r,a)}catch(c){ot(s,s.return,c)}}}function b_(s,r,a){a.props=So(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(c){ot(s,r,c)}}function Hl(s,r){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof a=="function"?s.refCleanup=a(c):a.current=c}}catch(y){ot(s,r,y)}}function Ji(s,r){var a=s.ref,c=s.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){ot(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){ot(s,r,y)}else a.current=null}function N_(s){var r=s.type,a=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){ot(s,s.return,y)}}function Oh(s,r,a){try{var c=s.stateNode;Cw(c,s.type,a,r),c[Vt]=r}catch(y){ot(s,s.return,y)}}function M_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&gr(s.type)||s.tag===4}function qh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||M_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&gr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fh(s,r,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(s),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=vi));else if(c!==4&&(c===27&&gr(s.type)&&(a=s.stateNode,r=null),s=s.child,s!==null))for(Fh(s,r,a),s=s.sibling;s!==null;)Fh(s,r,a),s=s.sibling}function Oc(s,r,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?a.insertBefore(s,r):a.appendChild(s);else if(c!==4&&(c===27&&gr(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(Oc(s,r,a),s=s.sibling;s!==null;)Oc(s,r,a),s=s.sibling}function D_(s){var r=s.stateNode,a=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);nn(r,c,a),r[it]=s,r[Vt]=a}catch(_){ot(s,s.return,_)}}var Ts=!1,Ft=!1,Bh=!1,P_=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function iw(s,r){if(s=s.containerInfo,lm=rd,s=Yg(s),kf(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var C=0,I=-1,V=-1,Y=0,Z=0,ie=s,K=null;t:for(;;){for(var Q;ie!==a||y!==0&&ie.nodeType!==3||(I=C+y),ie!==_||c!==0&&ie.nodeType!==3||(V=C+c),ie.nodeType===3&&(C+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)K=ie,ie=Q;for(;;){if(ie===s)break t;if(K===a&&++Y===y&&(I=C),K===_&&++Z===c&&(V=C),(Q=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Q}a=I===-1||V===-1?null:{start:I,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(um={focusedElem:s,selectionRange:a},rd=!1,Qt=r;Qt!==null;)if(r=Qt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Qt=s;else for(;Qt!==null;){switch(r=Qt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)y=s[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var ge=So(a.type,y);s=c.getSnapshotBeforeUpdate(ge,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){ot(a,a.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,a=s.nodeType,a===9)fm(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":fm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Qt=s;break}Qt=r.return}}function k_(s,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Ss(s,a),c&4&&Gl(5,a);break;case 1:if(Ss(s,a),c&4)if(s=a.stateNode,r===null)try{s.componentDidMount()}catch(C){ot(a,a.return,C)}else{var y=So(a.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(C){ot(a,a.return,C)}}c&64&&R_(a),c&512&&Hl(a,a.return);break;case 3:if(Ss(s,a),c&64&&(s=a.updateQueue,s!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{_y(s,r)}catch(C){ot(a,a.return,C)}}break;case 27:r===null&&c&4&&D_(a);case 26:case 5:Ss(s,a),r===null&&c&4&&N_(a),c&512&&Hl(a,a.return);break;case 12:Ss(s,a);break;case 31:Ss(s,a),c&4&&L_(s,a);break;case 13:Ss(s,a),c&4&&O_(s,a),c&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=fw.bind(null,a),Dw(s,a))));break;case 22:if(c=a.memoizedState!==null||Ts,!c){r=r!==null&&r.memoizedState!==null||Ft,y=Ts;var _=Ft;Ts=c,(Ft=r)&&!_?As(s,a,(a.subtreeFlags&8772)!==0):Ss(s,a),Ts=y,Ft=_}break;case 30:break;default:Ss(s,a)}}function V_(s){var r=s.alternate;r!==null&&(s.alternate=null,V_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&ls(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var At=null,Rn=!1;function Es(s,r,a){for(a=a.child;a!==null;)U_(s,r,a),a=a.sibling}function U_(s,r,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Ln,a)}catch{}switch(a.tag){case 26:Ft||Ji(a,r),Es(s,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ft||Ji(a,r);var c=At,y=Rn;gr(a.type)&&(At=a.stateNode,Rn=!1),Es(s,r,a),Zl(a.stateNode),At=c,Rn=y;break;case 5:Ft||Ji(a,r);case 6:if(c=At,y=Rn,At=null,Es(s,r,a),At=c,Rn=y,At!==null)if(Rn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(a.stateNode)}catch(_){ot(a,r,_)}else try{At.removeChild(a.stateNode)}catch(_){ot(a,r,_)}break;case 18:At!==null&&(Rn?(s=At,Rv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),Da(s)):Rv(At,a.stateNode));break;case 4:c=At,y=Rn,At=a.stateNode.containerInfo,Rn=!0,Es(s,r,a),At=c,Rn=y;break;case 0:case 11:case 14:case 15:ur(2,a,r),Ft||ur(4,a,r),Es(s,r,a);break;case 1:Ft||(Ji(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&b_(a,r,c)),Es(s,r,a);break;case 21:Es(s,r,a);break;case 22:Ft=(c=Ft)||a.memoizedState!==null,Es(s,r,a),Ft=c;break;default:Es(s,r,a)}}function L_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Da(s)}catch(a){ot(r,r.return,a)}}}function O_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Da(s)}catch(a){ot(r,r.return,a)}}function sw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new P_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new P_),r;default:throw Error(i(435,s.tag))}}function qc(s,r){var a=sw(s);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=hw.bind(null,s,c);c.then(y,y)}})}function bn(s,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=s,C=r,I=C;e:for(;I!==null;){switch(I.tag){case 27:if(gr(I.type)){At=I.stateNode,Rn=!1;break e}break;case 5:At=I.stateNode,Rn=!1;break e;case 3:case 4:At=I.stateNode.containerInfo,Rn=!0;break e}I=I.return}if(At===null)throw Error(i(160));U_(_,C,y),At=null,Rn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)q_(r,s),r=r.sibling}var xi=null;function q_(s,r){var a=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bn(r,s),Nn(s),c&4&&(ur(3,s,s.return),Gl(3,s),ur(5,s,s.return));break;case 1:bn(r,s),Nn(s),c&512&&(Ft||a===null||Ji(a,a.return)),c&64&&Ts&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=xi;if(bn(r,s),Nn(s),c&512&&(Ft||a===null||Ji(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=s.memoizedState,a===null)if(c===null)if(s.stateNode===null){e:{c=s.type,a=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Zn]||_[it]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),nn(_,c,a),_[it]=s,Ve(_),c=_;break e;case"link":var C=qv("link","href",y).get(c+(a.href||""));if(C){for(var I=0;I<C.length;I++)if(_=C[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(I,1);break t}}_=y.createElement(c),nn(_,c,a),y.head.appendChild(_);break;case"meta":if(C=qv("meta","content",y).get(c+(a.content||""))){for(I=0;I<C.length;I++)if(_=C[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(I,1);break t}}_=y.createElement(c),nn(_,c,a),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[it]=s,Ve(_),c=_}s.stateNode=c}else Fv(y,s.type,s.stateNode);else s.stateNode=Ov(y,c,s.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?Fv(y,s.type,s.stateNode):Ov(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Oh(s,s.memoizedProps,a.memoizedProps)}break;case 27:bn(r,s),Nn(s),c&512&&(Ft||a===null||Ji(a,a.return)),a!==null&&c&4&&Oh(s,s.memoizedProps,a.memoizedProps);break;case 5:if(bn(r,s),Nn(s),c&512&&(Ft||a===null||Ji(a,a.return)),s.flags&32){y=s.stateNode;try{In(y,"")}catch(ge){ot(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Oh(s,y,a!==null?a.memoizedProps:y)),c&1024&&(Bh=!0);break;case 6:if(bn(r,s),Nn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,a=s.stateNode;try{a.nodeValue=c}catch(ge){ot(s,s.return,ge)}}break;case 3:if(td=null,y=xi,xi=Zc(r.containerInfo),bn(r,s),xi=y,Nn(s),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Da(r.containerInfo)}catch(ge){ot(s,s.return,ge)}Bh&&(Bh=!1,F_(s));break;case 4:c=xi,xi=Zc(s.stateNode.containerInfo),bn(r,s),Nn(s),xi=c;break;case 12:bn(r,s),Nn(s);break;case 31:bn(r,s),Nn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,qc(s,c)));break;case 13:bn(r,s),Nn(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bc=Kt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,qc(s,c)));break;case 22:y=s.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Y=Ts,Z=Ft;if(Ts=Y||y,Ft=Z||V,bn(r,s),Ft=Z,Ts=Y,Nn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||V||Ts||Ft||Ao(s)),a=null,r=s;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(_=V.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{I=V.stateNode;var ie=V.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ge){ot(V,V.return,ge)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ge){ot(V,V.return,ge)}}}else if(r.tag===18){if(a===null){V=r;try{var Q=V.stateNode;y?bv(Q,!0):bv(V.stateNode,!1)}catch(ge){ot(V,V.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,qc(s,a))));break;case 19:bn(r,s),Nn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,qc(s,c)));break;case 30:break;case 21:break;default:bn(r,s),Nn(s)}}function Nn(s){var r=s.flags;if(r&2){try{for(var a,c=s.return;c!==null;){if(M_(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,_=qh(s);Oc(s,_,y);break;case 5:var C=a.stateNode;a.flags&32&&(In(C,""),a.flags&=-33);var I=qh(s);Oc(s,I,C);break;case 3:case 4:var V=a.stateNode.containerInfo,Y=qh(s);Fh(s,Y,V);break;default:throw Error(i(161))}}catch(Z){ot(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function F_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;F_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Ss(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)k_(s,r.alternate,r),r=r.sibling}function Ao(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ur(4,r,r.return),Ao(r);break;case 1:Ji(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&b_(r,r.return,a),Ao(r);break;case 27:Zl(r.stateNode);case 26:case 5:Ji(r,r.return),Ao(r);break;case 22:r.memoizedState===null&&Ao(r);break;case 30:Ao(r);break;default:Ao(r)}s=s.sibling}}function As(s,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:As(y,_,a),Gl(4,_);break;case 1:if(As(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){ot(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)yy(V[y],I)}catch(Y){ot(c,c.return,Y)}}a&&C&64&&R_(_),Hl(_,_.return);break;case 27:D_(_);case 26:case 5:As(y,_,a),a&&c===null&&C&4&&N_(_),Hl(_,_.return);break;case 12:As(y,_,a);break;case 31:As(y,_,a),a&&C&4&&L_(y,_);break;case 13:As(y,_,a),a&&C&4&&O_(y,_);break;case 22:_.memoizedState===null&&As(y,_,a),Hl(_,_.return);break;case 30:break;default:As(y,_,a)}r=r.sibling}}function zh(s,r){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&Nl(a))}function Gh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Nl(s))}function wi(s,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)B_(s,r,a,c),r=r.sibling}function B_(s,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:wi(s,r,a,c),y&2048&&Gl(9,r);break;case 1:wi(s,r,a,c);break;case 3:wi(s,r,a,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Nl(s)));break;case 12:if(y&2048){wi(s,r,a,c),s=r.stateNode;try{var _=r.memoizedProps,C=_.id,I=_.onPostCommit;typeof I=="function"&&I(C,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ot(r,r.return,V)}}else wi(s,r,a,c);break;case 31:wi(s,r,a,c);break;case 13:wi(s,r,a,c);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?wi(s,r,a,c):Yl(s,r):_._visibility&2?wi(s,r,a,c):(_._visibility|=2,Ea(s,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&zh(C,r);break;case 24:wi(s,r,a,c),y&2048&&Gh(r.alternate,r);break;default:wi(s,r,a,c)}}function Ea(s,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,C=r,I=a,V=c,Y=C.flags;switch(C.tag){case 0:case 11:case 15:Ea(_,C,I,V,y),Gl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&2?Ea(_,C,I,V,y):Yl(_,C):(Z._visibility|=2,Ea(_,C,I,V,y)),y&&Y&2048&&zh(C.alternate,C);break;case 24:Ea(_,C,I,V,y),y&&Y&2048&&Gh(C.alternate,C);break;default:Ea(_,C,I,V,y)}r=r.sibling}}function Yl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=s,c=r,y=c.flags;switch(c.tag){case 22:Yl(a,c),y&2048&&zh(c.alternate,c);break;case 24:Yl(a,c),y&2048&&Gh(c.alternate,c);break;default:Yl(a,c)}r=r.sibling}}var Jl=8192;function Sa(s,r,a){if(s.subtreeFlags&Jl)for(s=s.child;s!==null;)z_(s,r,a),s=s.sibling}function z_(s,r,a){switch(s.tag){case 26:Sa(s,r,a),s.flags&Jl&&s.memoizedState!==null&&Hw(a,xi,s.memoizedState,s.memoizedProps);break;case 5:Sa(s,r,a);break;case 3:case 4:var c=xi;xi=Zc(s.stateNode.containerInfo),Sa(s,r,a),xi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Jl,Jl=16777216,Sa(s,r,a),Jl=c):Sa(s,r,a));break;default:Sa(s,r,a)}}function G_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Kl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Qt=c,Y_(c,s)}G_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)H_(s),s=s.sibling}function H_(s){switch(s.tag){case 0:case 11:case 15:Kl(s),s.flags&2048&&ur(9,s,s.return);break;case 3:Kl(s);break;case 12:Kl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Fc(s)):Kl(s);break;default:Kl(s)}}function Fc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Qt=c,Y_(c,s)}G_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ur(8,r,r.return),Fc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Fc(r));break;default:Fc(r)}s=s.sibling}}function Y_(s,r){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:ur(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Qt=c;else e:for(a=s;Qt!==null;){c=Qt;var y=c.sibling,_=c.return;if(V_(c),c===a){Qt=null;break e}if(y!==null){y.return=_,Qt=y;break e}Qt=_}}}var rw={getCacheForType:function(s){var r=en(Lt),a=r.data.get(s);return a===void 0&&(a=s(),r.data.set(s,a)),a},cacheSignal:function(){return en(Lt).controller.signal}},ow=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,Le=null,Be=0,rt=0,Jn=null,cr=!1,Aa=!1,Hh=!1,Cs=0,bt=0,dr=0,Co=0,Yh=0,Kn=0,Ca=0,jl=null,Mn=null,Jh=!1,Bc=0,J_=0,zc=1/0,Gc=null,fr=null,Ht=0,hr=null,xa=null,xs=0,Kh=0,jh=null,K_=null,Ql=0,Qh=null;function jn(){return(tt&2)!==0&&Be!==0?Be&-Be:J.T!==null?tm():Wr()}function j_(){if(Kn===0)if((Be&536870912)===0||Je){var s=rs;rs<<=1,(rs&3932160)===0&&(rs=262144),Kn=s}else Kn=536870912;return s=Hn.current,s!==null&&(s.flags|=32),Kn}function Dn(s,r,a){(s===dt&&(rt===2||rt===9)||s.cancelPendingCommit!==null)&&(wa(s,0),mr(s,Be,Kn,!1)),os(s,a),((tt&2)===0||s!==dt)&&(s===dt&&((tt&2)===0&&(Co|=a),bt===4&&mr(s,Be,Kn,!1)),Ki(s))}function Q_(s,r,a){if((tt&6)!==0)throw Error(i(327));var c=!a&&(r&127)===0&&(r&s.expiredLanes)===0||An(s,r),y=c?uw(s,r):Xh(s,r,!0),_=c;do{if(y===0){Aa&&!c&&mr(s,r,0,!1);break}else{if(a=s.current.alternate,_&&!aw(a)){y=Xh(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var I=s;y=jl;var V=I.current.memoizedState.isDehydrated;if(V&&(wa(I,C).flags|=256),C=Xh(I,C,!1),C!==2){if(Hh&&!V){I.errorRecoveryDisabledLanes|=_,Co|=_,y=4;break e}_=Mn,Mn=y,_!==null&&(Mn===null?Mn=_:Mn.push.apply(Mn,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){wa(s,0),mr(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:mr(c,r,Kn,!cr);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Bc+300-Kt(),10<y)){if(mr(c,r,Kn,!cr),Xn(c,0,!0)!==0)break e;xs=r,c.timeoutHandle=wv($_.bind(null,c,a,Mn,Gc,Jh,r,Kn,Co,Ca,cr,_,"Throttled",-0,0),y);break e}$_(c,a,Mn,Gc,Jh,r,Kn,Co,Ca,cr,_,null,-0,0)}}break}while(!0);Ki(s)}function $_(s,r,a,c,y,_,C,I,V,Y,Z,ie,K,Q){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},z_(r,_,ie);var ge=(_&62914560)===_?Bc-Kt():(_&4194048)===_?J_-Kt():0;if(ge=Yw(ie,ge),ge!==null){xs=_,s.cancelPendingCommit=ge(sv.bind(null,s,r,_,a,c,y,C,I,V,Z,ie,null,K,Q)),mr(s,_,C,!Y);return}}sv(s,r,_,a,c,y,C,I,V)}function aw(s){for(var r=s;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!zn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mr(s,r,a,c){r&=~Yh,r&=~Co,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-Et(y),C=1<<_;c[_]=-1,y&=~C}a!==0&&Vi(s,a,r)}function Hc(){return(tt&6)===0?($l(0),!1):!0}function $h(){if(Le!==null){if(rt===0)var s=Le.return;else s=Le,ms=po=null,fh(s),ga=null,Dl=0,s=Le;for(;s!==null;)I_(s.alternate,s),s=s.return;Le=null}}function wa(s,r){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,Iw(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),xs=0,$h(),dt=s,Le=a=fs(s.current,null),Be=r,rt=0,Jn=null,cr=!1,Aa=An(s,r),Hh=!1,Ca=Kn=Yh=Co=dr=bt=0,Mn=jl=null,Jh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-Et(c),_=1<<y;r|=s[y],c&=~_}return Cs=r,dc(),a}function X_(s,r){Pe=null,J.H=Fl,r===pa||r===vc?(r=hy(),rt=3):r===eh?(r=hy(),rt=4):rt=r===Rh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Jn=r,Le===null&&(bt=1,Pc(s,si(r,s.current)))}function W_(){var s=Hn.current;return s===null?!0:(Be&4194048)===Be?li===null:(Be&62914560)===Be||(Be&536870912)!==0?s===li:!1}function Z_(){var s=J.H;return J.H=Fl,s===null?Fl:s}function ev(){var s=J.A;return J.A=rw,s}function Yc(){bt=4,cr||(Be&4194048)!==Be&&Hn.current!==null||(Aa=!0),(dr&134217727)===0&&(Co&134217727)===0||dt===null||mr(dt,Be,Kn,!1)}function Xh(s,r,a){var c=tt;tt|=2;var y=Z_(),_=ev();(dt!==s||Be!==r)&&(Gc=null,wa(s,r)),r=!1;var C=bt;e:do try{if(rt!==0&&Le!==null){var I=Le,V=Jn;switch(rt){case 8:$h(),C=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(r=!0);var Y=rt;if(rt=0,Jn=null,Ia(s,I,V,Y),a&&Aa){C=0;break e}break;default:Y=rt,rt=0,Jn=null,Ia(s,I,V,Y)}}lw(),C=bt;break}catch(Z){X_(s,Z)}while(!0);return r&&s.shellSuspendCounter++,ms=po=null,tt=c,J.H=y,J.A=_,Le===null&&(dt=null,Be=0,dc()),C}function lw(){for(;Le!==null;)tv(Le)}function uw(s,r){var a=tt;tt|=2;var c=Z_(),y=ev();dt!==s||Be!==r?(Gc=null,zc=Kt()+500,wa(s,r)):Aa=An(s,r);e:do try{if(rt!==0&&Le!==null){r=Le;var _=Jn;t:switch(rt){case 1:rt=0,Jn=null,Ia(s,r,_,1);break;case 2:case 9:if(dy(_)){rt=0,Jn=null,nv(r);break}r=function(){rt!==2&&rt!==9||dt!==s||(rt=7),Ki(s)},_.then(r,r);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:dy(_)?(rt=0,Jn=null,nv(r)):(rt=0,Jn=null,Ia(s,r,_,7));break;case 5:var C=null;switch(Le.tag){case 26:C=Le.memoizedState;case 5:case 27:var I=Le;if(C?Bv(C):I.stateNode.complete){rt=0,Jn=null;var V=I.sibling;if(V!==null)Le=V;else{var Y=I.return;Y!==null?(Le=Y,Jc(Y)):Le=null}break t}}rt=0,Jn=null,Ia(s,r,_,5);break;case 6:rt=0,Jn=null,Ia(s,r,_,6);break;case 8:$h(),bt=6;break e;default:throw Error(i(462))}}cw();break}catch(Z){X_(s,Z)}while(!0);return ms=po=null,J.H=c,J.A=y,tt=a,Le!==null?0:(dt=null,Be=0,dc(),bt)}function cw(){for(;Le!==null&&!Fs();)tv(Le)}function tv(s){var r=x_(s.alternate,s,Cs);s.memoizedProps=s.pendingProps,r===null?Jc(s):Le=r}function nv(s){var r=s,a=r.alternate;switch(r.tag){case 15:case 0:r=v_(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=v_(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:fh(r);default:I_(a,r),r=Le=ey(r,Cs),r=x_(a,r,Cs)}s.memoizedProps=s.pendingProps,r===null?Jc(s):Le=r}function Ia(s,r,a,c){ms=po=null,fh(r),ga=null,Dl=0;var y=r.return;try{if(Wx(s,y,r,a,Be)){bt=1,Pc(s,si(a,s.current)),Le=null;return}}catch(_){if(y!==null)throw Le=y,_;bt=1,Pc(s,si(a,s.current)),Le=null;return}r.flags&32768?(Je||c===1?s=!0:Aa||(Be&536870912)!==0?s=!1:(cr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Hn.current,c!==null&&c.tag===13&&(c.flags|=16384))),iv(r,s)):Jc(r)}function Jc(s){var r=s;do{if((r.flags&32768)!==0){iv(r,cr);return}s=r.return;var a=tw(r.alternate,r,Cs);if(a!==null){Le=a;return}if(r=r.sibling,r!==null){Le=r;return}Le=r=s}while(r!==null);bt===0&&(bt=5)}function iv(s,r){do{var a=nw(s.alternate,s);if(a!==null){a.flags&=32767,Le=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(s=s.sibling,s!==null)){Le=s;return}Le=s=a}while(s!==null);bt=6,Le=null}function sv(s,r,a,c,y,_,C,I,V){s.cancelPendingCommit=null;do Kc();while(Ht!==0);if((tt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=qf,ul(s,a,_,C,I,V),s===dt&&(Le=dt=null,Be=0),xa=r,hr=s,xs=a,Kh=_,jh=y,K_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,mw(yi,function(){return uv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,y=re.p,re.p=2,C=tt,tt|=4;try{iw(s,r,a)}finally{tt=C,re.p=y,J.T=c}}Ht=1,rv(),ov(),av()}}function rv(){if(Ht===1){Ht=0;var s=hr,r=xa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var c=re.p;re.p=2;var y=tt;tt|=4;try{q_(r,s);var _=um,C=Yg(s.containerInfo),I=_.focusedElem,V=_.selectionRange;if(C!==I&&I&&I.ownerDocument&&Hg(I.ownerDocument.documentElement,I)){if(V!==null&&kf(I)){var Y=V.start,Z=V.end;if(Z===void 0&&(Z=Y),"selectionStart"in I)I.selectionStart=Y,I.selectionEnd=Math.min(Z,I.value.length);else{var ie=I.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Q=K.getSelection(),ge=I.textContent.length,Ae=Math.min(V.start,ge),ct=V.end===void 0?Ae:Math.min(V.end,ge);!Q.extend&&Ae>ct&&(C=ct,ct=Ae,Ae=C);var z=Gg(I,Ae),O=Gg(I,ct);if(z&&O&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var H=ie.createRange();H.setStart(z.node,z.offset),Q.removeAllRanges(),Ae>ct?(Q.addRange(H),Q.extend(O.node,O.offset)):(H.setEnd(O.node,O.offset),Q.addRange(H))}}}}for(ie=[],Q=I;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var te=ie[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}rd=!!lm,um=lm=null}finally{tt=y,re.p=c,J.T=a}}s.current=r,Ht=2}}function ov(){if(Ht===2){Ht=0;var s=hr,r=xa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var c=re.p;re.p=2;var y=tt;tt|=4;try{k_(s,r.alternate,r)}finally{tt=y,re.p=c,J.T=a}}Ht=3}}function av(){if(Ht===4||Ht===3){Ht=0,Go();var s=hr,r=xa,a=xs,c=K_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,xa=hr=null,lv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(fr=null),_i(a),r=r.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Ln,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=J.T,y=re.p,re.p=2,J.T=null;try{for(var _=s.onRecoverableError,C=0;C<c.length;C++){var I=c[C];_(I.value,{componentStack:I.stack})}}finally{J.T=r,re.p=y}}(xs&3)!==0&&Kc(),Ki(s),y=s.pendingLanes,(a&261930)!==0&&(y&42)!==0?s===Qh?Ql++:(Ql=0,Qh=s):Ql=0,$l(0)}}function lv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Nl(r)))}function Kc(){return rv(),ov(),av(),uv()}function uv(){if(Ht!==5)return!1;var s=hr,r=Kh;Kh=0;var a=_i(xs),c=J.T,y=re.p;try{re.p=32>a?32:a,J.T=null,a=jh,jh=null;var _=hr,C=xs;if(Ht=0,xa=hr=null,xs=0,(tt&6)!==0)throw Error(i(331));var I=tt;if(tt|=4,H_(_.current),B_(_,_.current,C,a),tt=I,$l(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Ln,_)}catch{}return!0}finally{re.p=y,J.T=c,lv(s,r)}}function cv(s,r,a){r=si(a,r),r=Ih(s.stateNode,r,2),s=or(s,r,2),s!==null&&(os(s,2),Ki(s))}function ot(s,r,a){if(s.tag===3)cv(s,s,a);else for(;r!==null;){if(r.tag===3){cv(r,s,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(fr===null||!fr.has(c))){s=si(a,s),a=d_(2),c=or(r,a,2),c!==null&&(f_(a,c,r,s),os(c,2),Ki(c));break}}r=r.return}}function Wh(s,r,a){var c=s.pingCache;if(c===null){c=s.pingCache=new ow;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(Hh=!0,y.add(a),s=dw.bind(null,s,r,a),r.then(s,s))}function dw(s,r,a){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,dt===s&&(Be&a)===a&&(bt===4||bt===3&&(Be&62914560)===Be&&300>Kt()-Bc?(tt&2)===0&&wa(s,0):Yh|=a,Ca===Be&&(Ca=0)),Ki(s)}function dv(s,r){r===0&&(r=Ko()),s=fo(s,r),s!==null&&(os(s,r),Ki(s))}function fw(s){var r=s.memoizedState,a=0;r!==null&&(a=r.retryLane),dv(s,a)}function hw(s,r){var a=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),dv(s,a)}function mw(s,r){return It(s,r)}var jc=null,Ra=null,Zh=!1,Qc=!1,em=!1,pr=0;function Ki(s){s!==Ra&&s.next===null&&(Ra===null?jc=Ra=s:Ra=Ra.next=s),Qc=!0,Zh||(Zh=!0,gw())}function $l(s,r){if(!em&&Qc){em=!0;do for(var a=!1,c=jc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var C=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-Et(42|s)+1)-1,_&=y&~(C&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,pv(c,_))}else _=Be,_=Xn(c,c===dt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||An(c,_)||(a=!0,pv(c,_));c=c.next}while(a);em=!1}}function pw(){fv()}function fv(){Qc=Zh=!1;var s=0;pr!==0&&ww()&&(s=pr);for(var r=Kt(),a=null,c=jc;c!==null;){var y=c.next,_=hv(c,r);_===0?(c.next=null,a===null?jc=y:a.next=y,y===null&&(Ra=a)):(a=c,(s!==0||(_&3)!==0)&&(Qc=!0)),c=y}Ht!==0&&Ht!==5||$l(s),pr!==0&&(pr=0)}function hv(s,r){for(var a=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var C=31-Et(_),I=1<<C,V=y[C];V===-1?((I&a)===0||(I&c)!==0)&&(y[C]=Jo(I,r)):V<=r&&(s.expiredLanes|=I),_&=~I}if(r=dt,a=Be,a=Xn(s,s===r?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,a===0||s===r&&(rt===2||rt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&gi(c),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||An(s,a)){if(r=a&-a,r===s.callbackPriority)return r;switch(c!==null&&gi(c),_i(a)){case 2:case 8:a=Kr;break;case 32:a=yi;break;case 268435456:a=jr;break;default:a=yi}return c=mv.bind(null,s),a=It(a,c),s.callbackPriority=r,s.callbackNode=a,r}return c!==null&&c!==null&&gi(c),s.callbackPriority=2,s.callbackNode=null,2}function mv(s,r){if(Ht!==0&&Ht!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(Kc()&&s.callbackNode!==a)return null;var c=Be;return c=Xn(s,s===dt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Q_(s,c,r),hv(s,Kt()),s.callbackNode!=null&&s.callbackNode===a?mv.bind(null,s):null)}function pv(s,r){if(Kc())return null;Q_(s,r,!0)}function gw(){Rw(function(){(tt&6)!==0?It(Bs,pw):fv()})}function tm(){if(pr===0){var s=ha;s===0&&(s=$n,$n<<=1,($n&261888)===0&&($n=256)),pr=s}return pr}function gv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Wo(""+s)}function yv(s,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,s.id&&a.setAttribute("form",s.id),r.parentNode.insertBefore(a,r),s=new FormData(s),a.parentNode.removeChild(a),s}function yw(s,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=gv((y[Vt]||null).action),C=c.submitter;C&&(r=(r=C[Vt]||null)?gv(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var I=new Fi("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(pr!==0){var V=C?yv(y,C):new FormData(y);Eh(a,{pending:!0,data:V,method:y.method,action:_},null,V)}}else typeof _=="function"&&(I.preventDefault(),V=C?yv(y,C):new FormData(y),Eh(a,{pending:!0,data:V,method:y.method,action:_},_,V))},currentTarget:y}]})}}for(var nm=0;nm<Of.length;nm++){var im=Of[nm],_w=im.toLowerCase(),vw=im[0].toUpperCase()+im.slice(1);Ci(_w,"on"+vw)}Ci(jg,"onAnimationEnd"),Ci(Qg,"onAnimationIteration"),Ci($g,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Vx,"onTransitionRun"),Ci(Ux,"onTransitionStart"),Ci(Lx,"onTransitionCancel"),Ci(Xg,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function _v(s,r){r=(r&4)!==0;for(var a=0;a<s.length;a++){var c=s[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var C=c.length-1;0<=C;C--){var I=c[C],V=I.instance,Y=I.currentTarget;if(I=I.listener,V!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(Z){cc(Z)}y.currentTarget=null,_=V}else for(C=0;C<c.length;C++){if(I=c[C],V=I.instance,Y=I.currentTarget,I=I.listener,V!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(Z){cc(Z)}y.currentTarget=null,_=V}}}}function Oe(s,r){var a=r[Hs];a===void 0&&(a=r[Hs]=new Set);var c=s+"__bubble";a.has(c)||(vv(r,s,2,!1),a.add(c))}function sm(s,r,a){var c=0;r&&(c|=4),vv(a,s,c,r)}var $c="_reactListening"+Math.random().toString(36).slice(2);function rm(s){if(!s[$c]){s[$c]=!0,yn.forEach(function(a){a!=="selectionchange"&&(Tw.has(a)||sm(a,!1,s),sm(a,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[$c]||(r[$c]=!0,sm("selectionchange",!1,r))}}function vv(s,r,a,c){switch(jv(r)){case 2:var y=jw;break;case 8:y=Qw;break;default:y=Tm}a=y.bind(null,r,a,s),y=void 0,!io||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,a,{capture:!0,passive:y}):s.addEventListener(r,a,!0):y!==void 0?s.addEventListener(r,a,{passive:y}):s.addEventListener(r,a,!1)}function om(s,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var I=c.stateNode.containerInfo;if(I===y)break;if(C===4)for(C=c.return;C!==null;){var V=C.tag;if((V===3||V===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;I!==null;){if(C=Fn(I),C===null)return;if(V=C.tag,V===5||V===6||V===26||V===27){c=_=C;continue e}I=I.parentNode}}c=c.return}$s(function(){var Y=_,Z=ei(a),ie=[];e:{var K=Wg.get(s);if(K!==void 0){var Q=Fi,ge=s;switch(s){case"keypress":if(ro(a)===0)break e;case"keydown":case"keyup":Q=ac;break;case"focusin":ge="focus",Q=ao;break;case"focusout":ge="blur",Q=ao;break;case"beforeblur":case"afterblur":Q=ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=S;break;case jg:case Qg:case $g:Q=ec;break;case Xg:Q=b;break;case"scroll":case"scrollend":Q=El;break;case"wheel":Q=j;break;case"copy":case"cut":case"paste":Q=tc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ds;break;case"toggle":case"beforetoggle":Q=De}var Ae=(r&4)!==0,ct=!Ae&&(s==="scroll"||s==="scrollend"),z=Ae?K!==null?K+"Capture":null:K;Ae=[];for(var O=Y,H;O!==null;){var te=O;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||z===null||(te=Ti(O,z),te!=null&&Ae.push(Wl(O,te,H))),ct)break;O=O.return}0<Ae.length&&(K=new Q(K,ge,null,a,Z),ie.push({event:K,listeners:Ae}))}}if((r&7)===0){e:{if(K=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",K&&a!==_l&&(ge=a.relatedTarget||a.fromElement)&&(Fn(ge)||ge[Wn]))break e;if((Q||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(ge=a.relatedTarget||a.toElement,Q=Y,ge=ge?Fn(ge):null,ge!==null&&(ct=l(ge),Ae=ge.tag,ge!==ct||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(Q=null,ge=Y),Q!==ge)){if(Ae=Sl,te="onMouseLeave",z="onMouseEnter",O="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=ds,te="onPointerLeave",z="onPointerEnter",O="pointer"),ct=Q==null?K:je(Q),H=ge==null?K:je(ge),K=new Ae(te,O+"leave",Q,a,Z),K.target=ct,K.relatedTarget=H,te=null,Fn(Z)===Y&&(Ae=new Ae(z,O+"enter",ge,a,Z),Ae.target=H,Ae.relatedTarget=ct,te=Ae),ct=te,Q&&ge)t:{for(Ae=Ew,z=Q,O=ge,H=0,te=z;te;te=Ae(te))H++;te=0;for(var Te=O;Te;Te=Ae(Te))te++;for(;0<H-te;)z=Ae(z),H--;for(;0<te-H;)O=Ae(O),te--;for(;H--;){if(z===O||O!==null&&z===O.alternate){Ae=z;break t}z=Ae(z),O=Ae(O)}Ae=null}else Ae=null;Q!==null&&Tv(ie,K,Q,Ae,!1),ge!==null&&ct!==null&&Tv(ie,ct,ge,Ae,!0)}}e:{if(K=Y?je(Y):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Xe=Lg;else if(Vg(K))if(Og)Xe=Dx;else{Xe=Nx;var _e=bx}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Xo(Y.elementType)&&(Xe=Lg):Xe=Mx;if(Xe&&(Xe=Xe(s,Y))){Ug(ie,Xe,a,Z);break e}_e&&_e(s,K,Y),s==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&pl(K,"number",K.value)}switch(_e=Y?je(Y):window,s){case"focusin":(Vg(_e)||_e.contentEditable==="true")&&(ra=_e,Vf=Y,Il=null);break;case"focusout":Il=Vf=ra=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,Jg(ie,a,Z);break;case"selectionchange":if(kx)break;case"keydown":case"keyup":Jg(ie,a,Z)}var ke;if(et)e:{switch(s){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else sa?lo(s,a)&&(ze="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Gi&&a.locale!=="ko"&&(sa||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&sa&&(ke=Tl()):(qi=Z,vl="value"in qi?qi.value:qi.textContent,sa=!0)),_e=Xc(Y,ze),0<_e.length&&(ze=new zi(ze,s,null,a,Z),ie.push({event:ze,listeners:_e}),ke?ze.data=ke:(ke=ia(a),ke!==null&&(ze.data=ke)))),(ke=ni?xx(s,a):wx(s,a))&&(ze=Xc(Y,"onBeforeInput"),0<ze.length&&(_e=new zi("onBeforeInput","beforeinput",null,a,Z),ie.push({event:_e,listeners:ze}),_e.data=ke)),yw(ie,s,Y,a,Z)}_v(ie,r)})}function Wl(s,r,a){return{instance:s,listener:r,currentTarget:a}}function Xc(s,r){for(var a=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Ti(s,a),y!=null&&c.unshift(Wl(s,y,_)),y=Ti(s,r),y!=null&&c.push(Wl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function Ew(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Tv(s,r,a,c,y){for(var _=r._reactName,C=[];a!==null&&a!==c;){var I=a,V=I.alternate,Y=I.stateNode;if(I=I.tag,V!==null&&V===c)break;I!==5&&I!==26&&I!==27||Y===null||(V=Y,y?(Y=Ti(a,_),Y!=null&&C.unshift(Wl(a,Y,V))):y||(Y=Ti(a,_),Y!=null&&C.push(Wl(a,Y,V)))),a=a.return}C.length!==0&&s.push({event:r,listeners:C})}var Sw=/\r\n?/g,Aw=/\u0000|\uFFFD/g;function Ev(s){return(typeof s=="string"?s:""+s).replace(Sw,`
`).replace(Aw,"")}function Sv(s,r){return r=Ev(r),Ev(s)===r}function ut(s,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||In(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&In(s,""+c);break;case"className":Bn(s,"class",c);break;case"tabIndex":Bn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(s,a,c);break;case"style":yl(s,c,_);break;case"data":if(r!=="object"){Bn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){s.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Wo(""+c),s.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&ut(s,r,"name",y.name,y,null),ut(s,r,"formEncType",y.formEncType,y,null),ut(s,r,"formMethod",y.formMethod,y,null),ut(s,r,"formTarget",y.formTarget,y,null)):(ut(s,r,"encType",y.encType,y,null),ut(s,r,"method",y.method,y,null),ut(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Wo(""+c),s.setAttribute(a,c);break;case"onClick":c!=null&&(s.onclick=vi);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}a=Wo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""+c):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":c===!0?s.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,c):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(a,c):s.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(a):s.setAttribute(a,c);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),Qo(s,"popover",c);break;case"xlinkActuate":Ut(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ut(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ut(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ut(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ut(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ut(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Qo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Xu.get(a)||a,Qo(s,a,c))}}function am(s,r,a,c,y,_){switch(a){case"style":yl(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof c=="string"?In(s,c):(typeof c=="number"||typeof c=="bigint")&&In(s,""+c);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cn.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=s[Vt]||null,_=_!=null?_[a]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(r,c,y);break e}a in s?s[a]=c:c===!0?s.setAttribute(a,""):Qo(s,a,c)}}}function nn(s,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var C=a[_];if(C!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ut(s,r,_,C,a,null)}}y&&ut(s,r,"srcSet",a.srcSet,a,null),c&&ut(s,r,"src",a.src,a,null);return;case"input":Oe("invalid",s);var I=_=C=y=null,V=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":C=Z;break;case"checked":V=Z;break;case"defaultChecked":Y=Z;break;case"value":_=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:ut(s,r,c,Z,a,null)}}ju(s,_,I,V,Y,C,y,!1);return;case"select":Oe("invalid",s),c=C=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":C=I;break;case"multiple":c=I;default:ut(s,r,y,I,a,null)}r=_,a=C,s.multiple=!!c,r!=null?Js(s,!!c,r,!1):a!=null&&Js(s,!!c,a,!0);return;case"textarea":Oe("invalid",s),_=y=c=null;for(C in a)if(a.hasOwnProperty(C)&&(I=a[C],I!=null))switch(C){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ut(s,r,C,I,a,null)}Ks(s,c,y,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(c=a[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ut(s,r,V,c,a,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(c=0;c<Xl.length;c++)Oe(Xl[c],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ut(s,r,Y,c,a,null)}return;default:if(Xo(r)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&am(s,r,Z,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&ut(s,r,I,c,a,null))}function Cw(s,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,I=null,V=null,Y=null,Z=null;for(Q in a){var ie=a[Q];if(a.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=ie;default:c.hasOwnProperty(Q)||ut(s,r,Q,null,c,ie)}}for(var K in c){var Q=c[K];if(ie=a[K],c.hasOwnProperty(K)&&(Q!=null||ie!=null))switch(K){case"type":_=Q;break;case"name":y=Q;break;case"checked":Y=Q;break;case"defaultChecked":Z=Q;break;case"value":C=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ie&&ut(s,r,K,Q,c,ie)}}$o(s,C,I,V,Y,Z,_,y);return;case"select":Q=C=I=K=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":Q=V;default:c.hasOwnProperty(_)||ut(s,r,_,null,c,V)}for(y in c)if(_=c[y],V=a[y],c.hasOwnProperty(y)&&(_!=null||V!=null))switch(y){case"value":K=_;break;case"defaultValue":I=_;break;case"multiple":C=_;default:_!==V&&ut(s,r,y,_,c,V)}r=I,a=C,c=Q,K!=null?Js(s,!!a,K,!1):!!c!=!!a&&(r!=null?Js(s,!!a,r,!0):Js(s,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ut(s,r,I,null,c,y)}for(C in c)if(y=c[C],_=a[C],c.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":K=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&ut(s,r,C,y,c,_)}Qu(s,K,Q);return;case"option":for(var ge in a)if(K=a[ge],a.hasOwnProperty(ge)&&K!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:ut(s,r,ge,null,c,K)}for(V in c)if(K=c[V],Q=a[V],c.hasOwnProperty(V)&&K!==Q&&(K!=null||Q!=null))switch(V){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ut(s,r,V,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)K=a[Ae],a.hasOwnProperty(Ae)&&K!=null&&!c.hasOwnProperty(Ae)&&ut(s,r,Ae,null,c,K);for(Y in c)if(K=c[Y],Q=a[Y],c.hasOwnProperty(Y)&&K!==Q&&(K!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:ut(s,r,Y,K,c,Q)}return;default:if(Xo(r)){for(var ct in a)K=a[ct],a.hasOwnProperty(ct)&&K!==void 0&&!c.hasOwnProperty(ct)&&am(s,r,ct,void 0,c,K);for(Z in c)K=c[Z],Q=a[Z],!c.hasOwnProperty(Z)||K===Q||K===void 0&&Q===void 0||am(s,r,Z,K,c,Q);return}}for(var z in a)K=a[z],a.hasOwnProperty(z)&&K!=null&&!c.hasOwnProperty(z)&&ut(s,r,z,null,c,K);for(ie in c)K=c[ie],Q=a[ie],!c.hasOwnProperty(ie)||K===Q||K==null&&Q==null||ut(s,r,ie,K,c,Q)}function Av(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,C=y.initiatorType,I=y.duration;if(_&&I&&Av(C)){for(C=0,I=y.responseEnd,c+=1;c<a.length;c++){var V=a[c],Y=V.startTime;if(Y>I)break;var Z=V.transferSize,ie=V.initiatorType;Z&&Av(ie)&&(V=V.responseEnd,C+=Z*(V<I?1:(I-Y)/(V-Y)))}if(--c,r+=8*(_+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var lm=null,um=null;function Wc(s){return s.nodeType===9?s:s.ownerDocument}function Cv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function cm(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var dm=null;function ww(){var s=window.event;return s&&s.type==="popstate"?s===dm?!1:(dm=s,!0):(dm=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,Iv=typeof Promise=="function"?Promise:void 0,Rw=typeof queueMicrotask=="function"?queueMicrotask:typeof Iv<"u"?function(s){return Iv.resolve(null).then(s).catch(bw)}:wv;function bw(s){setTimeout(function(){throw s})}function gr(s){return s==="head"}function Rv(s,r){var a=r,c=0;do{var y=a.nextSibling;if(s.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){s.removeChild(y),Da(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Zl(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Zl(a);for(var _=a.firstChild;_;){var C=_.nextSibling,I=_.nodeName;_[Zn]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}else a==="body"&&Zl(s.ownerDocument.body);a=y}while(a);Da(r)}function bv(s,r){var a=s;s=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=c}while(a)}function fm(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fm(a),ls(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function Nw(s,r,a,c){for(;s.nodeType===1;){var y=a;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Zn])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=ui(s.nextSibling),s===null)break}return null}function Mw(s,r,a){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ui(s.nextSibling),s===null))return null;return s}function Nv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=ui(s.nextSibling),s===null))return null;return s}function hm(s){return s.data==="$?"||s.data==="$~"}function mm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Dw(s,r){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ui(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var pm=null;function Mv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(r===0)return ui(s.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}s=s.nextSibling}return null}function Dv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return s;r--}else a!=="/$"&&a!=="/&"||r++}s=s.previousSibling}return null}function Pv(s,r,a){switch(r=Wc(a),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Zl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);ls(s)}var ci=new Map,kv=new Set;function Zc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ws=re.d;re.d={f:Pw,r:kw,D:Vw,C:Uw,L:Lw,m:Ow,X:Fw,S:qw,M:Bw};function Pw(){var s=ws.f(),r=Hc();return s||r}function kw(s){var r=ye(s);r!==null&&r.tag===5&&r.type==="form"?Xy(r):ws.r(s)}var ba=typeof document>"u"?null:document;function Vv(s,r,a){var c=ba;if(c&&typeof r=="string"&&r){var y=wn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),kv.has(y)||(kv.add(y),s={rel:s,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),nn(r,"link",s),Ve(r),c.head.appendChild(r)))}}function Vw(s){ws.D(s),Vv("dns-prefetch",s,null)}function Uw(s,r){ws.C(s,r),Vv("preconnect",s,r)}function Lw(s,r,a){ws.L(s,r,a);var c=ba;if(c&&s&&r){var y='link[rel="preload"][as="'+wn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+wn(a.imageSizes)+'"]')):y+='[href="'+wn(s)+'"]';var _=y;switch(r){case"style":_=Na(s);break;case"script":_=Ma(s)}ci.has(_)||(s=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:s,as:r},a),ci.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(eu(_))||r==="script"&&c.querySelector(tu(_))||(r=c.createElement("link"),nn(r,"link",s),Ve(r),c.head.appendChild(r)))}}function Ow(s,r){ws.m(s,r);var a=ba;if(a&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+wn(c)+'"][href="'+wn(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ma(s)}if(!ci.has(_)&&(s=E({rel:"modulepreload",href:s},r),ci.set(_,s),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tu(_)))return}c=a.createElement("link"),nn(c,"link",s),Ve(c),a.head.appendChild(c)}}}function qw(s,r,a){ws.S(s,r,a);var c=ba;if(c&&s){var y=$e(c).hoistableStyles,_=Na(s);r=r||"default";var C=y.get(_);if(!C){var I={loading:0,preload:null};if(C=c.querySelector(eu(_)))I.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},a),(a=ci.get(_))&&gm(s,a);var V=C=c.createElement("link");Ve(V),nn(V,"link",s),V._p=new Promise(function(Y,Z){V.onload=Y,V.onerror=Z}),V.addEventListener("load",function(){I.loading|=1}),V.addEventListener("error",function(){I.loading|=2}),I.loading|=4,ed(C,r,c)}C={type:"stylesheet",instance:C,count:1,state:I},y.set(_,C)}}}function Fw(s,r){ws.X(s,r);var a=ba;if(a&&s){var c=$e(a).hoistableScripts,y=Ma(s),_=c.get(y);_||(_=a.querySelector(tu(y)),_||(s=E({src:s,async:!0},r),(r=ci.get(y))&&ym(s,r),_=a.createElement("script"),Ve(_),nn(_,"link",s),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Bw(s,r){ws.M(s,r);var a=ba;if(a&&s){var c=$e(a).hoistableScripts,y=Ma(s),_=c.get(y);_||(_=a.querySelector(tu(y)),_||(s=E({src:s,async:!0,type:"module"},r),(r=ci.get(y))&&ym(s,r),_=a.createElement("script"),Ve(_),nn(_,"link",s),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Uv(s,r,a,c){var y=(y=Re.current)?Zc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Na(a.href),a=$e(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=Na(a.href);var _=$e(y).hoistableStyles,C=_.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,C),(_=y.querySelector(eu(s)))&&!_._p&&(C.instance=_,C.state.loading=5),ci.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ci.set(s,a),_||zw(y,s,a,C.state))),r&&c===null)throw Error(i(528,""));return C}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ma(a),a=$e(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Na(s){return'href="'+wn(s)+'"'}function eu(s){return'link[rel="stylesheet"]['+s+"]"}function Lv(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function zw(s,r,a,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),nn(r,"link",a),Ve(r),s.head.appendChild(r))}function Ma(s){return'[src="'+wn(s)+'"]'}function tu(s){return"script[async]"+s}function Ov(s,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+wn(a.href)+'"]');if(c)return r.instance=c,Ve(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Ve(c),nn(c,"style",y),ed(c,a.precedence,s),r.instance=c;case"stylesheet":y=Na(a.href);var _=s.querySelector(eu(y));if(_)return r.state.loading|=4,r.instance=_,Ve(_),_;c=Lv(a),(y=ci.get(y))&&gm(c,y),_=(s.ownerDocument||s).createElement("link"),Ve(_);var C=_;return C._p=new Promise(function(I,V){C.onload=I,C.onerror=V}),nn(_,"link",c),r.state.loading|=4,ed(_,a.precedence,s),r.instance=_;case"script":return _=Ma(a.src),(y=s.querySelector(tu(_)))?(r.instance=y,Ve(y),y):(c=a,(y=ci.get(_))&&(c=E({},a),ym(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ve(y),nn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,ed(c,a.precedence,s));return r.instance}function ed(s,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,C=0;C<c.length;C++){var I=c[C];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(s,r.firstChild))}function gm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function ym(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var td=null;function qv(s,r,a){if(td===null){var c=new Map,y=td=new Map;y.set(a,c)}else y=td,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(s))return c;for(c.set(s,null),a=a.getElementsByTagName(s),y=0;y<a.length;y++){var _=a[y];if(!(_[Zn]||_[it]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=s+C;var I=c.get(C);I?I.push(_):c.set(C,[_])}}return c}function Fv(s,r,a){s=s.ownerDocument||s,s.head.insertBefore(a,r==="title"?s.querySelector("head > title"):null)}function Gw(s,r,a){if(a===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Bv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Hw(s,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Na(c.href),_=r.querySelector(eu(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=nd.bind(s),r.then(s,s)),a.state.loading|=4,a.instance=_,Ve(_);return}_=r.ownerDocument||r,c=Lv(c),(y=ci.get(y))&&gm(c,y),_=_.createElement("link"),Ve(_);var C=_;C._p=new Promise(function(I,V){C.onload=I,C.onerror=V}),nn(_,"link",c),a.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=nd.bind(s),r.addEventListener("load",a),r.addEventListener("error",a))}}var _m=0;function Yw(s,r){return s.stylesheets&&s.count===0&&sd(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var c=setTimeout(function(){if(s.stylesheets&&sd(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&_m===0&&(_m=62500*xw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&sd(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>_m?50:800)+r);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var id=null;function sd(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,id=new Map,r.forEach(Jw,s),id=null,nd.call(s))}function Jw(s,r){if(!(r.state.loading&4)){var a=id.get(s);if(a)var c=a.get(null);else{a=new Map,id.set(s,a);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),c=C)}c&&a.set(null,c)}y=r.instance,C=y.getAttribute("data-precedence"),_=a.get(C)||c,_===c&&a.set(null,y),a.set(C,y),this.count++,c=nd.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var nu={$$typeof:W,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Kw(s,r,a,c,y,_,C,I,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=On(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.hiddenUpdates=On(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function zv(s,r,a,c,y,_,C,I,V,Y,Z,ie){return s=new Kw(s,r,a,C,V,Y,Z,ie,I),r=1,_===!0&&(r|=24),_=Gn(3,null,null,r),s.current=_,_.stateNode=s,r=Xf(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},th(_),s}function Gv(s){return s?(s=la,s):la}function Hv(s,r,a,c,y,_){y=Gv(y),c.context===null?c.context=y:c.pendingContext=y,c=rr(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=or(s,c,r),a!==null&&(Dn(a,s,r),kl(a,s,r))}function Yv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<r?a:r}}function vm(s,r){Yv(s,r),(s=s.alternate)&&Yv(s,r)}function Jv(s){if(s.tag===13||s.tag===31){var r=fo(s,67108864);r!==null&&Dn(r,s,67108864),vm(s,67108864)}}function Kv(s){if(s.tag===13||s.tag===31){var r=jn();r=as(r);var a=fo(s,r);a!==null&&Dn(a,s,r),vm(s,r)}}var rd=!0;function jw(s,r,a,c){var y=J.T;J.T=null;var _=re.p;try{re.p=2,Tm(s,r,a,c)}finally{re.p=_,J.T=y}}function Qw(s,r,a,c){var y=J.T;J.T=null;var _=re.p;try{re.p=8,Tm(s,r,a,c)}finally{re.p=_,J.T=y}}function Tm(s,r,a,c){if(rd){var y=Em(c);if(y===null)om(s,r,c,od,a),Qv(s,c);else if(Xw(y,s,r,a,c))c.stopPropagation();else if(Qv(s,c),r&4&&-1<$w.indexOf(s)){for(;y!==null;){var _=ye(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=Sn(_.pendingLanes);if(C!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;C;){var V=1<<31-Et(C);I.entanglements[1]|=V,C&=~V}Ki(_),(tt&6)===0&&(zc=Kt()+500,$l(0))}}break;case 31:case 13:I=fo(_,2),I!==null&&Dn(I,_,2),Hc(),vm(_,2)}if(_=Em(c),_===null&&om(s,r,c,od,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else om(s,r,c,null,a)}}function Em(s){return s=ei(s),Sm(s)}var od=null;function Sm(s){if(od=null,s=Fn(s),s!==null){var r=l(s);if(r===null)s=null;else{var a=r.tag;if(a===13){if(s=u(r),s!==null)return s;s=null}else if(a===31){if(s=f(r),s!==null)return s;s=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return od=s,null}function jv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case Bs:return 2;case Kr:return 8;case yi:case Ho:return 32;case jr:return 268435456;default:return 32}default:return 32}}var Am=!1,yr=null,_r=null,vr=null,iu=new Map,su=new Map,Tr=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qv(s,r){switch(s){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":iu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(r.pointerId)}}function ru(s,r,a,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=ye(r),r!==null&&Jv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function Xw(s,r,a,c,y){switch(r){case"focusin":return yr=ru(yr,s,r,a,c,y),!0;case"dragenter":return _r=ru(_r,s,r,a,c,y),!0;case"mouseover":return vr=ru(vr,s,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return iu.set(_,ru(iu.get(_)||null,s,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,su.set(_,ru(su.get(_)||null,s,r,a,c,y)),!0}return!1}function $v(s){var r=Fn(s.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){s.blockedOn=r,qn(s.priority,function(){Kv(a)});return}}else if(r===31){if(r=f(a),r!==null){s.blockedOn=r,qn(s.priority,function(){Kv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ad(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var a=Em(s.nativeEvent);if(a===null){a=s.nativeEvent;var c=new a.constructor(a.type,a);_l=c,a.target.dispatchEvent(c),_l=null}else return r=ye(a),r!==null&&Jv(r),s.blockedOn=a,!1;r.shift()}return!0}function Xv(s,r,a){ad(s)&&a.delete(r)}function Ww(){Am=!1,yr!==null&&ad(yr)&&(yr=null),_r!==null&&ad(_r)&&(_r=null),vr!==null&&ad(vr)&&(vr=null),iu.forEach(Xv),su.forEach(Xv)}function ld(s,r){s.blockedOn===r&&(s.blockedOn=null,Am||(Am=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ww)))}var ud=null;function Wv(s){ud!==s&&(ud=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ud===s&&(ud=null);for(var r=0;r<s.length;r+=3){var a=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Sm(c||a)===null)continue;break}var _=ye(a);_!==null&&(s.splice(r,3),r-=3,Eh(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Da(s){function r(V){return ld(V,s)}yr!==null&&ld(yr,s),_r!==null&&ld(_r,s),vr!==null&&ld(vr,s),iu.forEach(r),su.forEach(r);for(var a=0;a<Tr.length;a++){var c=Tr[a];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Tr.length&&(a=Tr[0],a.blockedOn===null);)$v(a),a.blockedOn===null&&Tr.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],C=y[Vt]||null;if(typeof _=="function")C||Wv(a);else if(C){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Vt]||null)I=C.formAction;else if(Sm(y)!==null)continue}else I=C.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),Wv(a)}}}function Zv(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Cm(s){this._internalRoot=s}cd.prototype.render=Cm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,c=jn();Hv(a,c,s,r,null,null)},cd.prototype.unmount=Cm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Hv(s.current,2,null,s,null,null),Hc(),r[Wn]=null}};function cd(s){this._internalRoot=s}cd.prototype.unstable_scheduleHydration=function(s){if(s){var r=Wr();s={blockedOn:null,target:s,priority:r};for(var a=0;a<Tr.length&&r!==0&&r<Tr[a].priority;a++);Tr.splice(a,0,s),a===0&&$v(s)}};var e0=e.version;if(e0!=="19.2.1")throw Error(i(527,e0,"19.2.1"));re.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var Zw={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{Ln=dd.inject(Zw),kt=dd}catch{}}return au.createRoot=function(s,r){if(!o(s))throw Error(i(299));var a=!1,c="",y=a_,_=l_,C=u_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=zv(s,1,!1,null,null,a,c,null,y,_,C,Zv),s[Wn]=r.current,rm(s),new Cm(r)},au.hydrateRoot=function(s,r,a){if(!o(s))throw Error(i(299));var c=!1,y="",_=a_,C=l_,I=u_,V=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=zv(s,1,!0,r,a??null,c,y,V,_,C,I,Zv),r.context=Gv(null),a=r.current,c=jn(),c=as(c),y=rr(c),y.callback=null,or(a,y,c),a=c,r.current.lanes=a,os(r,a),Ki(r),s[Wn]=r.current,rm(s),new cd(r)},au.version="19.2.1",au}var c0;function uI(){if(c0)return Im.exports;c0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Im.exports=lI(),Im.exports}var cI=uI();const dI=hS(cI),fI="modulepreload",hI=function(n){return"/"+n},d0={},Br=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=u(t.map(p=>{if(p=hI(p),p in d0)return;d0[p]=!0;const v=p.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const A=document.createElement("link");if(A.rel=v?"stylesheet":fI,v||(A.as="script"),A.crossOrigin="",A.href=p,m&&A.setAttribute("nonce",m),document.head.appendChild(A),v)return new Promise((w,L)=>{A.addEventListener("load",w),A.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},mI=()=>{};var f0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},pI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],f=n[t++],m=((o&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},gS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,f=u?n[o+1]:0,m=o+2<n.length,p=m?n[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let A=(f&15)<<2|p>>6,w=p&63;m||(w=64,u||(A=64)),i.push(t[v],t[E],t[A],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const p=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||p==null||E==null)throw new gI;const A=l<<2|f>>4;if(i.push(A),p!==64){const w=f<<4&240|p>>2;if(i.push(w),E!==64){const L=p<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yI=function(n){const e=pS(n);return gS.encodeByteArray(e,!0)},Dd=function(n){return yI(n).replace(/\./g,"")},yS=function(n){try{return gS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=()=>_I().__FIREBASE_DEFAULTS__,TI=()=>{if(typeof process>"u"||typeof f0>"u")return;const n=f0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},EI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yS(n[1]);return e&&JSON.parse(e)},of=()=>{try{return mI()||vI()||TI()||EI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_S=n=>{var e,t;return(t=(e=of())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},SI=n=>{const e=_S(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},vS=()=>{var n;return(n=of())==null?void 0:n.config},TS=n=>{var e;return(e=of())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ES(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Dd(JSON.stringify(t)),Dd(JSON.stringify(u)),""].join(".")}const gu={};function xI(){const n={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?n.emulator.push(e):n.prod.push(e);return n}function wI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let h0=!1;function SS(n,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||gu[n]===e||gu[n]||h0)return;gu[n]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",l=xI().prod.length>0;function u(){const A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,w){A.setAttribute("width","24"),A.setAttribute("id",w),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{h0=!0,u()},A}function v(A,w){A.setAttribute("id",w),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=wI(i),w=t("text"),L=document.getElementById(w)||document.createElement("span"),F=t("learnmore"),B=document.getElementById(F)||document.createElement("a"),$=t("preprendIcon"),X=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const W=A.element;f(W),v(B,F);const ae=p();m(X,$),W.append(X,L,B,ae),document.body.appendChild(W)}l?(L.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function II(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function RI(){var e;const n=(e=of())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DI(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PI(){return!RI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kI(){try{return typeof indexedDB=="object"}catch{return!1}}function VI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="FirebaseError";class Vs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=UI,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?LI(l,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new Vs(o,f,i)}}function LI(n,e){return n.replace(OI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const OI=/\{\$([^}]+)}/g;function qI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],u=e[o];if(m0(l)&&m0(u)){if(!Mo(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function m0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function cu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function du(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function FI(n,e){const t=new BI(n,e);return t.subscribe.bind(t)}class BI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");zI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Mm),o.error===void 0&&(o.error=Mm),o.complete===void 0&&(o.complete=Mm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n){return n&&n._delegate?n._delegate:n}class Do{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new AI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YI(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:HI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HI(n){return n===xo?void 0:n}function YI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const KI={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},jI=Ge.INFO,QI={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},$I=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=QI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=jI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const XI=(n,e)=>e.some(t=>n instanceof t);let p0,g0;function WI(){return p0||(p0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZI(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AS=new WeakMap,jm=new WeakMap,CS=new WeakMap,Dm=new WeakMap,Up=new WeakMap;function eR(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(br(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&AS.set(t,n)}).catch(()=>{}),Up.set(e,n),e}function tR(n){if(jm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});jm.set(n,e)}let Qm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return br(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nR(n){Qm=n(Qm)}function iR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Pm(this),e,...t);return CS.set(i,e.sort?e.sort():[e]),br(i)}:ZI().includes(n)?function(...e){return n.apply(Pm(this),e),br(AS.get(this))}:function(...e){return br(n.apply(Pm(this),e))}}function sR(n){return typeof n=="function"?iR(n):(n instanceof IDBTransaction&&tR(n),XI(n,WI())?new Proxy(n,Qm):n)}function br(n){if(n instanceof IDBRequest)return eR(n);if(Dm.has(n))return Dm.get(n);const e=sR(n);return e!==n&&(Dm.set(n,e),Up.set(e,n)),e}const Pm=n=>Up.get(n);function rR(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),f=br(u);return i&&u.addEventListener("upgradeneeded",m=>{i(br(u.result),m.oldVersion,m.newVersion,br(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const oR=["get","getKey","getAll","getAllKeys","count"],aR=["put","add","delete","clear"],km=new Map;function y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(km.get(e))return km.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=aR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||oR.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,o?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),o&&m.done]))[0]};return km.set(e,l),l}nR(n=>({...n,get:(e,t,i)=>y0(e,t)||n.get(e,t,i),has:(e,t)=>!!y0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function uR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",_0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Vp("@firebase/app"),cR="@firebase/app-compat",dR="@firebase/analytics-compat",fR="@firebase/analytics",hR="@firebase/app-check-compat",mR="@firebase/app-check",pR="@firebase/auth",gR="@firebase/auth-compat",yR="@firebase/database",_R="@firebase/data-connect",vR="@firebase/database-compat",TR="@firebase/functions",ER="@firebase/functions-compat",SR="@firebase/installations",AR="@firebase/installations-compat",CR="@firebase/messaging",xR="@firebase/messaging-compat",wR="@firebase/performance",IR="@firebase/performance-compat",RR="@firebase/remote-config",bR="@firebase/remote-config-compat",NR="@firebase/storage",MR="@firebase/storage-compat",DR="@firebase/firestore",PR="@firebase/ai",kR="@firebase/firestore-compat",VR="firebase",UR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="[DEFAULT]",LR={[$m]:"fire-core",[cR]:"fire-core-compat",[fR]:"fire-analytics",[dR]:"fire-analytics-compat",[mR]:"fire-app-check",[hR]:"fire-app-check-compat",[pR]:"fire-auth",[gR]:"fire-auth-compat",[yR]:"fire-rtdb",[_R]:"fire-data-connect",[vR]:"fire-rtdb-compat",[TR]:"fire-fn",[ER]:"fire-fn-compat",[SR]:"fire-iid",[AR]:"fire-iid-compat",[CR]:"fire-fcm",[xR]:"fire-fcm-compat",[wR]:"fire-perf",[IR]:"fire-perf-compat",[RR]:"fire-rc",[bR]:"fire-rc-compat",[NR]:"fire-gcs",[MR]:"fire-gcs-compat",[DR]:"fire-fst",[kR]:"fire-fst-compat",[PR]:"fire-vertex","fire-js":"fire-js",[VR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map,OR=new Map,Wm=new Map;function v0(n,e){try{n.container.addComponent(e)}catch(t){Ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ja(n){const e=n.name;if(Wm.has(e))return Ns.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,n);for(const t of Pd.values())v0(t,n);for(const t of OR.values())v0(t,n);return!0}function Lp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function di(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Pu("app","Firebase",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=UR;function xS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Xm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Nr.create("bad-app-name",{appName:String(o)});if(t||(t=vS()),!t)throw Nr.create("no-options");const l=Pd.get(o);if(l){if(Mo(t,l.options)&&Mo(i,l.config))return l;throw Nr.create("duplicate-app",{appName:o})}const u=new JI(o);for(const m of Wm.values())u.addComponent(m);const f=new FR(t,i,u);return Pd.set(o,f),f}function wS(n=Xm){const e=Pd.get(n);if(!e&&n===Xm&&vS())return xS();if(!e)throw Nr.create("no-app",{appName:n});return e}function Mr(n,e,t){let i=LR[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ns.warn(u.join(" "));return}Ja(new Do(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="firebase-heartbeat-database",zR=1,Cu="firebase-heartbeat-store";let Vm=null;function IS(){return Vm||(Vm=rR(BR,zR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Nr.create("idb-open",{originalErrorMessage:n.message})})),Vm}async function GR(n){try{const t=(await IS()).transaction(Cu),i=await t.objectStore(Cu).get(RS(n));return await t.done,i}catch(e){if(e instanceof Vs)Ns.warn(e.message);else{const t=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(t.message)}}}async function T0(n,e){try{const i=(await IS()).transaction(Cu,"readwrite");await i.objectStore(Cu).put(e,RS(n)),await i.done}catch(t){if(t instanceof Vs)Ns.warn(t.message);else{const i=Nr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ns.warn(i.message)}}}function RS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=1024,YR=30;class JR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=E0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>YR){const u=QR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ns.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=E0(),{heartbeatsToSend:i,unsentEntries:o}=KR(this._heartbeatsCache.heartbeats),l=Dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ns.warn(t),""}}}function E0(){return new Date().toISOString().substring(0,10)}function KR(n,e=HR){const t=[];let i=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),S0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),S0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class jR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kI()?VI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function S0(n){return Dd(JSON.stringify({version:2,heartbeats:n})).length}function QR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n){Ja(new Do("platform-logger",e=>new lR(e),"PRIVATE")),Ja(new Do("heartbeat",e=>new JR(e),"PRIVATE")),Mr($m,_0,n),Mr($m,_0,"esm2020"),Mr("fire-js","")}$R("");var XR="firebase",WR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(XR,WR,"app");function bS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZR=bS,NS=new Pu("auth","Firebase",bS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Vp("@firebase/auth");function eb(n,...e){kd.logLevel<=Ge.WARN&&kd.warn(`Auth (${el}): ${n}`,...e)}function Td(n,...e){kd.logLevel<=Ge.ERROR&&kd.error(`Auth (${el}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(n,...e){throw Op(n,...e)}function Qi(n,...e){return Op(n,...e)}function MS(n,e,t){const i={...ZR(),[e]:t};return new Pu("auth","Firebase",i).create(e,{appName:n.name})}function bs(n){return MS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return NS.create(n,...e)}function xe(n,e,...t){if(!n)throw Op(e,...t)}function Is(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Td(e),new Error(e)}function Ms(n,e){n||Is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function tb(){return A0()==="http:"||A0()==="https:"}function A0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tb()||NI()||"connection"in navigator)?navigator.onLine:!0}function ib(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ms(t>e,"Short delay should be less than long delay!"),this.isMobile=II()||MI()}get(){return nb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(n,e){Ms(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ob=new Vu(3e4,6e4);function zr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Gr(n,e,t,i,o={}){return PS(n,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=ku({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return bI()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Za(n.emulatorConfig.host)&&(p.credentials="include"),DS.fetch()(await kS(n,n.config.apiHost,t,f),p)})}async function PS(n,e,t){n._canInitEmulator=!1;const i={...sb,...e};try{const o=new lb(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw fd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw fd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw fd(n,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw MS(n,v,p);Ni(n,v)}}catch(o){if(o instanceof Vs)throw o;Ni(n,"network-request-failed",{message:String(o)})}}async function Uu(n,e,t,i,o={}){const l=await Gr(n,e,t,i,o);return"mfaPendingCredential"in l&&Ni(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function kS(n,e,t,i){const o=`${e}${t}?${i}`,l=n,u=l.config.emulator?qp(n.config,o):`${n.config.apiScheme}://${o}`;return rb.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function ab(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qi(this.auth,"network-request-failed")),ob.get())})}}function fd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Qi(n,e,i);return o.customData._tokenResponse=t,o}function C0(n){return n!==void 0&&n.enterprise!==void 0}class ub{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ab(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cb(n,e){return Gr(n,"GET","/v2/recaptchaConfig",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(n,e){return Gr(n,"POST","/v1/accounts:delete",e)}async function Vd(n,e){return Gr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fb(n,e=!1){const t=Xt(n),i=await t.getIdToken(e),o=Fp(i);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:yu(Um(o.auth_time)),issuedAtTime:yu(Um(o.iat)),expirationTime:yu(Um(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Um(n){return Number(n)*1e3}function Fp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Td("JWT malformed, contained fewer than 3 sections"),null;try{const o=yS(t);return o?JSON.parse(o):(Td("Failed to decode base64 JWT payload"),null)}catch(o){return Td("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function x0(n){const e=Fp(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Vs&&hb(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function hb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(n){var E;const e=n.auth,t=await n.getIdToken(),i=await xu(n,Vd(e,{idToken:t}));xe(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?VS(o.providerUserInfo):[],u=gb(n.providerData,l),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),p=f?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ep(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function pb(n){const e=Xt(n);await Ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gb(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function VS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(n,e){const t=await PS(n,{},async()=>{const i=ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await kS(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&Za(n.emulatorConfig.host)&&(m.credentials="include"),DS.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _b(n,e){return Gr(n,"POST","/v2/accounts:revokeToken",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=x0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await yb(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,u=new qa;return i&&(xe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(xe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return Is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ii{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new mb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ep(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await xu(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fb(this,e)}reload(){return pb(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ud(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(bs(this.auth));const e=await this.getIdToken();return await xu(this,db(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:w,providerData:L,stsTokenManager:F}=t;xe(E&&F,e,"internal-error");const B=qa.fromJSON(this.name,F);xe(typeof E=="string",e,"internal-error"),Sr(i,e.name),Sr(o,e.name),xe(typeof A=="boolean",e,"internal-error"),xe(typeof w=="boolean",e,"internal-error"),Sr(l,e.name),Sr(u,e.name),Sr(f,e.name),Sr(m,e.name),Sr(p,e.name),Sr(v,e.name);const $=new Ii({uid:E,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:B,createdAt:p,lastLoginAt:v});return L&&Array.isArray(L)&&($.providerData=L.map(X=>({...X}))),m&&($._redirectEventId=m),$}static async _fromIdTokenResponse(e,t,i=!1){const o=new qa;o.updateFromServerResponse(t);const l=new Ii({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ud(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?VS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new qa;f.updateFromIdToken(i);const m=new Ii({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ep(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=new Map;function Rs(n){Ms(n instanceof Function,"Expected a class definition");let e=w0.get(n);return e?(Ms(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,w0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}US.type="NONE";const I0=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class Fa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Ed(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ed("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vd(this.auth,{idToken:e}).catch(()=>{});return t?Ii._fromGetAccountInfoResponse(this.auth,t,e):null}return Ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Fa(Rs(I0),e,i);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=o[0]||Rs(I0);const u=Ed(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const v=await p._get(u);if(v){let E;if(typeof v=="string"){const A=await Vd(e,{idToken:v}).catch(()=>{});if(!A)break;E=await Ii._fromGetAccountInfoResponse(e,A,v)}else E=Ii._fromJSON(e,v);p!==l&&(f=E),l=p;break}}catch{}const m=o.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Fa(l,e,i):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new Fa(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zS(e))return"Blackberry";if(GS(e))return"Webos";if(OS(e))return"Safari";if((e.includes("chrome/")||qS(e))&&!e.includes("edge/"))return"Chrome";if(BS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function LS(n=mn()){return/firefox\//i.test(n)}function OS(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qS(n=mn()){return/crios\//i.test(n)}function FS(n=mn()){return/iemobile/i.test(n)}function BS(n=mn()){return/android/i.test(n)}function zS(n=mn()){return/blackberry/i.test(n)}function GS(n=mn()){return/webos/i.test(n)}function Bp(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function vb(n=mn()){var e;return Bp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Tb(){return DI()&&document.documentMode===10}function HS(n=mn()){return Bp(n)||BS(n)||GS(n)||zS(n)||/windows phone/i.test(n)||FS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n,e=[]){let t;switch(n){case"Browser":t=R0(mn());break;case"Worker":t=`${R0(mn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${el}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sb(n,e={}){return Gr(n,"GET","/v2/passwordPolicy",zr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=6;class Cb{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Ab,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b0(this),this.idTokenSubscription=new b0(this),this.beforeStateQueue=new Eb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rs(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Fa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vd(this,{idToken:e}),i=await Ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(di(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ud(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ib()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(bs(this));const t=e?Xt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sb(this),t=new Cb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await _b(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rs(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[Rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&eb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Oo(n){return Xt(n)}class b0{constructor(e){this.auth=e,this.observer=null,this.addObserver=FI(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wb(n){af=n}function JS(n){return af.loadJS(n)}function Ib(){return af.recaptchaEnterpriseScript}function Rb(){return af.gapiScript}function bb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Nb{constructor(){this.enterprise=new Mb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Mb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Db="recaptcha-enterprise",KS="NO_RECAPTCHA";class Pb{constructor(e){this.type=Db,this.auth=Oo(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{cb(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new ub(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(m=>{f(m)})})}function o(l,u,f){const m=window.grecaptcha;C0(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(KS)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Nb().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(f=>{if(!t&&C0(window.grecaptcha))o(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Ib();m.length!==0&&(m+=f),JS(m).then(()=>{o(f,l,u)}).catch(p=>{u(p)})}}).catch(f=>{u(f)})})}}async function N0(n,e,t,i=!1,o=!1){const l=new Pb(n);let u;if(o)u=KS;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function tp(n,e,t,i,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await N0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await N0(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(n,e){const t=Lp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Mo(l,e??{}))return o;Ni(o,"already-initialized")}return t.initialize({options:e})}function Vb(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Rs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Ub(n,e,t){const i=Oo(n);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=jS(e),{host:u,port:f}=Lb(e),m=f===null?"":`:${f}`,p={url:`${l}//${u}${m}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(Mo(p,i.config.emulator)&&Mo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Za(u)?(ES(`${l}//${u}${m}`),SS("Auth",!0)):Ob()}function jS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Lb(n){const e=jS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:M0(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:M0(u)}}}function M0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ob(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,t){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}async function qb(n,e){return Gr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(n,e){return Uu(n,"POST","/v1/accounts:signInWithPassword",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(n,e){return Uu(n,"POST","/v1/accounts:signInWithEmailLink",zr(n,e))}async function zb(n,e){return Uu(n,"POST","/v1/accounts:signInWithEmailLink",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends zp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new wu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new wu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tp(e,t,"signInWithPassword",Fb);case"emailLink":return Bb(e,{email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tp(e,i,"signUpPassword",qb);case"emailLink":return zb(e,{idToken:t,email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(n,e){return Uu(n,"POST","/v1/accounts:signInWithIdp",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="http://localhost";class Po extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const u=new Po(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ba(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ba(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ba(e,t)}buildRequest(){const e={requestUri:Gb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ku(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yb(n){const e=cu(du(n)).link,t=e?cu(du(e)).deep_link_id:null,i=cu(du(n)).deep_link_id;return(i?cu(du(i)).link:null)||i||t||e||n}class Gp{constructor(e){const t=cu(du(e)),i=t.apiKey??null,o=t.oobCode??null,l=Hb(t.mode??null);xe(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Yb(e);try{return new Gp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.providerId=tl.PROVIDER_ID}static credential(e,t){return wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Gp.parseLink(t);return xe(i,"argument-error"),wu._fromEmailAndCode(e,i.code,i.tenantId)}}tl.PROVIDER_ID="password";tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends QS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Lu{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Po._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Cr.credential(t,i)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Lu{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.GITHUB_SIGN_IN_METHOD="github.com";xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Lu{constructor(){super("twitter.com")}static credential(e,t){return Po._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return wr.credential(t,i)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(n,e){return Uu(n,"POST","/v1/accounts:signUp",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Ii._fromIdTokenResponse(e,i,o),u=D0(i);return new ko({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=D0(i);return new ko({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function D0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends Vs{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ld(e,t,i,o)}}function $S(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(n,l,e,i):l})}async function Kb(n,e,t=!1){const i=await xu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ko._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(n,e,t=!1){const{auth:i}=n;if(di(i.app))return Promise.reject(bs(i));const o="reauthenticate";try{const l=await xu(n,$S(i,o,e,n),t);xe(l.idToken,i,"internal-error");const u=Fp(l.idToken);xe(u,i,"internal-error");const{sub:f}=u;return xe(n.uid===f,i,"user-mismatch"),ko._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ni(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(n,e,t=!1){if(di(n.app))return Promise.reject(bs(n));const i="signIn",o=await $S(n,i,e),l=await ko._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function Qb(n,e){return XS(Oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(n){const e=Oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZS(n,e,t){if(di(n.app))return Promise.reject(bs(n));const i=Oo(n),u=await tp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jb).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&WS(n),m}),f=await ko._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function $b(n,e,t){return di(n.app)?Promise.reject(bs(n)):Qb(Xt(n),tl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&WS(n),i})}function Xb(n,e,t,i){return Xt(n).onIdTokenChanged(e,t,i)}function Wb(n,e,t){return Xt(n).beforeAuthStateChanged(e,t)}function Zb(n,e,t,i){return Xt(n).onAuthStateChanged(e,t,i)}function eN(n){return Xt(n).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1e3,nN=10;class tA extends eA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);Tb()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,nN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},tN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tA.type="LOCAL";const iN=tA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA extends eA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nA.type="SESSION";const iA=nA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new lf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async p=>p(t.origin,l)),m=await sN(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const p=Hp("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(A.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function oN(n){$i().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function aN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function uN(){return sA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebaseLocalStorageDb",cN=1,qd="firebaseLocalStorage",oA="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uf(n,e){return n.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function dN(){const n=indexedDB.deleteDatabase(rA);return new Ou(n).toPromise()}function np(){const n=indexedDB.open(rA,cN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(qd,{keyPath:oA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(qd)?e(i):(i.close(),await dN(),e(await np()))})})}async function P0(n,e,t){const i=uf(n,!0).put({[oA]:e,value:t});return new Ou(i).toPromise()}async function fN(n,e){const t=uf(n,!1).get(e),i=await new Ou(t).toPromise();return i===void 0?null:i.value}function k0(n,e){const t=uf(n,!0).delete(e);return new Ou(t).toPromise()}const hN=800,mN=3;class aA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await np(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>mN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lf._getInstance(uN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await aN(),!this.activeServiceWorker)return;this.sender=new rN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await np();return await P0(e,Od,"1"),await k0(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>P0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>fN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>k0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=uf(o,!1).getAll();return new Ou(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aA.type="LOCAL";const pN=aA;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n,e){return e?Rs(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ba(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yN(n){return XS(n.auth,new Yp(n),n.bypassAuthState)}function _N(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),jb(t,new Yp(n),n.bypassAuthState)}async function vN(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Kb(t,new Yp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yN;case"linkViaPopup":case"linkViaRedirect":return vN;case"reauthViaPopup":case"reauthViaRedirect":return _N;default:Ni(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new Vu(2e3,1e4);class La extends lA{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TN.get())};e()}}La.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="pendingRedirect",Sd=new Map;class SN extends lA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sd.get(this.auth._key());if(!e){try{const i=await AN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sd.set(this.auth._key(),e)}return this.bypassAuthState||Sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AN(n,e){const t=wN(e),i=xN(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function CN(n,e){Sd.set(n._key(),e)}function xN(n){return Rs(n._redirectPersistence)}function wN(n){return Ed(EN,n.config.apiKey,n.name)}async function IN(n,e,t=!1){if(di(n.app))return Promise.reject(bs(n));const i=Oo(n),o=gN(i,e),u=await new SN(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=600*1e3;class bN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!uA(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RN&&this.cachedEventUids.clear(),this.cachedEventUids.has(V0(e))}saveEventToCache(e){this.cachedEventUids.add(V0(e)),this.lastProcessedEventTime=Date.now()}}function V0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function uA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(n,e={}){return Gr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PN=/^https?/;async function kN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await MN(n);for(const t of e)try{if(VN(t))return}catch{}Ni(n,"unauthorized-domain")}function VN(n){const e=Zm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!PN.test(t))return!1;if(DN.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new Vu(3e4,6e4);function U0(){const n=$i().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function LN(n){return new Promise((e,t)=>{var o,l,u;function i(){U0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U0(),t(Qi(n,"network-request-failed"))},timeout:UN.get()})}if((l=(o=$i().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=$i().gapi)!=null&&u.load)i();else{const f=bb("iframefcb");return $i()[f]=()=>{gapi.load?i():t(Qi(n,"network-request-failed"))},JS(`${Rb()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Ad=null,e})}let Ad=null;function ON(n){return Ad=Ad||LN(n),Ad}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new Vu(5e3,15e3),FN="__/auth/iframe",BN="emulator/auth/iframe",zN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HN(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qp(e,BN):`https://${n.config.authDomain}/${FN}`,i={apiKey:e.apiKey,appName:n.name,v:el},o=GN.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ku(i).slice(1)}`}async function YN(n){const e=await ON(n),t=$i().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:HN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zN,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=Qi(n,"network-request-failed"),f=$i().setTimeout(()=>{l(u)},qN.get());function m(){$i().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KN=500,jN=600,QN="_blank",$N="http://localhost";class L0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XN(n,e,t,i=KN,o=jN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...JN,width:i.toString(),height:o.toString(),top:l,left:u},p=mn().toLowerCase();t&&(f=qS(p)?QN:t),LS(p)&&(e=e||$N,m.scrollbars="yes");const v=Object.entries(m).reduce((A,[w,L])=>`${A}${w}=${L},`,"");if(vb(p)&&f!=="_self")return WN(e||"",f),new L0(null);const E=window.open(e||"",f,v);xe(E,n,"popup-blocked");try{E.focus()}catch{}return new L0(E)}function WN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="__/auth/handler",e1="emulator/auth/handler",t1=encodeURIComponent("fac");async function O0(n,e,t,i,o,l){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:el,eventId:o};if(e instanceof QS){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",qI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Lu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),p=m?`#${t1}=${encodeURIComponent(m)}`:"";return`${n1(n)}?${ku(f).slice(1)}${p}`}function n1({config:n}){return n.emulator?qp(n,e1):`https://${n.authDomain}/${ZN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="webStorageSupport";class i1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iA,this._completeRedirectFn=IN,this._overrideRedirectResult=CN}async _openPopup(e,t,i,o){var u;Ms((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await O0(e,t,i,Zm(),o);return XN(e,l,Hp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await O0(e,t,i,Zm(),o);return oN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ms(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await YN(e),i=new bN(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lm,{type:Lm},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[Lm];l!==void 0&&t(!!l),Ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HS()||OS()||Bp()}}const s1=i1;var q0="@firebase/auth",F0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a1(n){Ja(new Do("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;xe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YS(n)},p=new xb(i,o,l,m);return Vb(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ja(new Do("auth-internal",e=>{const t=Oo(e.getProvider("auth").getImmediate());return(i=>new r1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(q0,F0,o1(n)),Mr(q0,F0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=300,u1=TS("authIdTokenMaxAge")||l1;let B0=null;const c1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>u1)return;const o=t==null?void 0:t.token;B0!==o&&(B0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cA(n=wS()){const e=Lp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=kb(n,{popupRedirectResolver:s1,persistence:[pN,iN,iA]}),i=TS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=c1(l.toString());Wb(t,u,()=>u(t.currentUser)),Xb(t,f=>u(f))}}const o=_S("auth");return o&&Ub(t,`http://${o}`),t}function d1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}wb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Qi("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",d1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a1("Browser");var z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,dA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function R(){}R.prototype=N.prototype,D.F=N.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(k,P,U){for(var M=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)M[Se-2]=arguments[Se];return N.prototype[P].apply(k,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,N,R){R||(R=0);const k=Array(16);if(typeof N=="string")for(var P=0;P<16;++P)k[P]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(P=0;P<16;++P)k[P]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=D.g[0],R=D.g[1],P=D.g[2];let U=D.g[3],M;M=N+(U^R&(P^U))+k[0]+3614090360&4294967295,N=R+(M<<7&4294967295|M>>>25),M=U+(P^N&(R^P))+k[1]+3905402710&4294967295,U=N+(M<<12&4294967295|M>>>20),M=P+(R^U&(N^R))+k[2]+606105819&4294967295,P=U+(M<<17&4294967295|M>>>15),M=R+(N^P&(U^N))+k[3]+3250441966&4294967295,R=P+(M<<22&4294967295|M>>>10),M=N+(U^R&(P^U))+k[4]+4118548399&4294967295,N=R+(M<<7&4294967295|M>>>25),M=U+(P^N&(R^P))+k[5]+1200080426&4294967295,U=N+(M<<12&4294967295|M>>>20),M=P+(R^U&(N^R))+k[6]+2821735955&4294967295,P=U+(M<<17&4294967295|M>>>15),M=R+(N^P&(U^N))+k[7]+4249261313&4294967295,R=P+(M<<22&4294967295|M>>>10),M=N+(U^R&(P^U))+k[8]+1770035416&4294967295,N=R+(M<<7&4294967295|M>>>25),M=U+(P^N&(R^P))+k[9]+2336552879&4294967295,U=N+(M<<12&4294967295|M>>>20),M=P+(R^U&(N^R))+k[10]+4294925233&4294967295,P=U+(M<<17&4294967295|M>>>15),M=R+(N^P&(U^N))+k[11]+2304563134&4294967295,R=P+(M<<22&4294967295|M>>>10),M=N+(U^R&(P^U))+k[12]+1804603682&4294967295,N=R+(M<<7&4294967295|M>>>25),M=U+(P^N&(R^P))+k[13]+4254626195&4294967295,U=N+(M<<12&4294967295|M>>>20),M=P+(R^U&(N^R))+k[14]+2792965006&4294967295,P=U+(M<<17&4294967295|M>>>15),M=R+(N^P&(U^N))+k[15]+1236535329&4294967295,R=P+(M<<22&4294967295|M>>>10),M=N+(P^U&(R^P))+k[1]+4129170786&4294967295,N=R+(M<<5&4294967295|M>>>27),M=U+(R^P&(N^R))+k[6]+3225465664&4294967295,U=N+(M<<9&4294967295|M>>>23),M=P+(N^R&(U^N))+k[11]+643717713&4294967295,P=U+(M<<14&4294967295|M>>>18),M=R+(U^N&(P^U))+k[0]+3921069994&4294967295,R=P+(M<<20&4294967295|M>>>12),M=N+(P^U&(R^P))+k[5]+3593408605&4294967295,N=R+(M<<5&4294967295|M>>>27),M=U+(R^P&(N^R))+k[10]+38016083&4294967295,U=N+(M<<9&4294967295|M>>>23),M=P+(N^R&(U^N))+k[15]+3634488961&4294967295,P=U+(M<<14&4294967295|M>>>18),M=R+(U^N&(P^U))+k[4]+3889429448&4294967295,R=P+(M<<20&4294967295|M>>>12),M=N+(P^U&(R^P))+k[9]+568446438&4294967295,N=R+(M<<5&4294967295|M>>>27),M=U+(R^P&(N^R))+k[14]+3275163606&4294967295,U=N+(M<<9&4294967295|M>>>23),M=P+(N^R&(U^N))+k[3]+4107603335&4294967295,P=U+(M<<14&4294967295|M>>>18),M=R+(U^N&(P^U))+k[8]+1163531501&4294967295,R=P+(M<<20&4294967295|M>>>12),M=N+(P^U&(R^P))+k[13]+2850285829&4294967295,N=R+(M<<5&4294967295|M>>>27),M=U+(R^P&(N^R))+k[2]+4243563512&4294967295,U=N+(M<<9&4294967295|M>>>23),M=P+(N^R&(U^N))+k[7]+1735328473&4294967295,P=U+(M<<14&4294967295|M>>>18),M=R+(U^N&(P^U))+k[12]+2368359562&4294967295,R=P+(M<<20&4294967295|M>>>12),M=N+(R^P^U)+k[5]+4294588738&4294967295,N=R+(M<<4&4294967295|M>>>28),M=U+(N^R^P)+k[8]+2272392833&4294967295,U=N+(M<<11&4294967295|M>>>21),M=P+(U^N^R)+k[11]+1839030562&4294967295,P=U+(M<<16&4294967295|M>>>16),M=R+(P^U^N)+k[14]+4259657740&4294967295,R=P+(M<<23&4294967295|M>>>9),M=N+(R^P^U)+k[1]+2763975236&4294967295,N=R+(M<<4&4294967295|M>>>28),M=U+(N^R^P)+k[4]+1272893353&4294967295,U=N+(M<<11&4294967295|M>>>21),M=P+(U^N^R)+k[7]+4139469664&4294967295,P=U+(M<<16&4294967295|M>>>16),M=R+(P^U^N)+k[10]+3200236656&4294967295,R=P+(M<<23&4294967295|M>>>9),M=N+(R^P^U)+k[13]+681279174&4294967295,N=R+(M<<4&4294967295|M>>>28),M=U+(N^R^P)+k[0]+3936430074&4294967295,U=N+(M<<11&4294967295|M>>>21),M=P+(U^N^R)+k[3]+3572445317&4294967295,P=U+(M<<16&4294967295|M>>>16),M=R+(P^U^N)+k[6]+76029189&4294967295,R=P+(M<<23&4294967295|M>>>9),M=N+(R^P^U)+k[9]+3654602809&4294967295,N=R+(M<<4&4294967295|M>>>28),M=U+(N^R^P)+k[12]+3873151461&4294967295,U=N+(M<<11&4294967295|M>>>21),M=P+(U^N^R)+k[15]+530742520&4294967295,P=U+(M<<16&4294967295|M>>>16),M=R+(P^U^N)+k[2]+3299628645&4294967295,R=P+(M<<23&4294967295|M>>>9),M=N+(P^(R|~U))+k[0]+4096336452&4294967295,N=R+(M<<6&4294967295|M>>>26),M=U+(R^(N|~P))+k[7]+1126891415&4294967295,U=N+(M<<10&4294967295|M>>>22),M=P+(N^(U|~R))+k[14]+2878612391&4294967295,P=U+(M<<15&4294967295|M>>>17),M=R+(U^(P|~N))+k[5]+4237533241&4294967295,R=P+(M<<21&4294967295|M>>>11),M=N+(P^(R|~U))+k[12]+1700485571&4294967295,N=R+(M<<6&4294967295|M>>>26),M=U+(R^(N|~P))+k[3]+2399980690&4294967295,U=N+(M<<10&4294967295|M>>>22),M=P+(N^(U|~R))+k[10]+4293915773&4294967295,P=U+(M<<15&4294967295|M>>>17),M=R+(U^(P|~N))+k[1]+2240044497&4294967295,R=P+(M<<21&4294967295|M>>>11),M=N+(P^(R|~U))+k[8]+1873313359&4294967295,N=R+(M<<6&4294967295|M>>>26),M=U+(R^(N|~P))+k[15]+4264355552&4294967295,U=N+(M<<10&4294967295|M>>>22),M=P+(N^(U|~R))+k[6]+2734768916&4294967295,P=U+(M<<15&4294967295|M>>>17),M=R+(U^(P|~N))+k[13]+1309151649&4294967295,R=P+(M<<21&4294967295|M>>>11),M=N+(P^(R|~U))+k[4]+4149444226&4294967295,N=R+(M<<6&4294967295|M>>>26),M=U+(R^(N|~P))+k[11]+3174756917&4294967295,U=N+(M<<10&4294967295|M>>>22),M=P+(N^(U|~R))+k[2]+718787259&4294967295,P=U+(M<<15&4294967295|M>>>17),M=R+(U^(P|~N))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+U&4294967295}i.prototype.v=function(D,N){N===void 0&&(N=D.length);const R=N-this.blockSize,k=this.C;let P=this.h,U=0;for(;U<N;){if(P==0)for(;U<=R;)o(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<N;)if(k[P++]=D.charCodeAt(U++),P==this.blockSize){o(this,k),P=0;break}}else for(;U<N;)if(k[P++]=D[U++],P==this.blockSize){o(this,k),P=0;break}}this.h=P,this.o+=N},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,R=0;R<4;++R)for(let k=0;k<32;k+=8)D[N++]=this.g[R]>>>k&255;return D};function l(D,N){var R=f;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=N(D)}function u(D,N){this.h=N;const R=[];let k=!0;for(let P=D.length-1;P>=0;P--){const U=D[P]|0;k&&U==N||(R[P]=U,k=!1)}this.g=R}var f={};function m(D){return-128<=D&&D<128?l(D,function(N){return new u([N|0],N<0?-1:0)}):new u([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return B(p(-D));const N=[];let R=1;for(let k=0;D>=R;k++)N[k]=D/R|0,R*=4294967296;return new u(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return B(v(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(N,8));let k=E;for(let U=0;U<D.length;U+=8){var P=Math.min(8,D.length-U);const M=parseInt(D.substring(U,U+P),N);P<8?(P=p(Math.pow(N,P)),k=k.j(P).add(p(M))):(k=k.j(R),k=k.add(p(M)))}return k}var E=m(0),A=m(1),w=m(16777216);n=u.prototype,n.m=function(){if(F(this))return-B(this).m();let D=0,N=1;for(let R=0;R<this.g.length;R++){const k=this.i(R);D+=(k>=0?k:4294967296+k)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(F(this))return"-"+B(this).toString(D);const N=p(Math.pow(D,6));var R=this;let k="";for(;;){const P=ae(R,N).g;R=$(R,P.j(N));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=P,L(R))return U+k;for(;U.length<6;)U="0"+U;k=U+k}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function F(D){return D.h==-1}n.l=function(D){return D=$(this,D),F(D)?-1:L(D)?0:1};function B(D){const N=D.g.length,R=[];for(let k=0;k<N;k++)R[k]=~D.g[k];return new u(R,~D.h).add(A)}n.abs=function(){return F(this)?B(this):this},n.add=function(D){const N=Math.max(this.g.length,D.g.length),R=[];let k=0;for(let P=0;P<=N;P++){let U=k+(this.i(P)&65535)+(D.i(P)&65535),M=(U>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);k=M>>>16,U&=65535,M&=65535,R[P]=M<<16|U}return new u(R,R[R.length-1]&-2147483648?-1:0)};function $(D,N){return D.add(B(N))}n.j=function(D){if(L(this)||L(D))return E;if(F(this))return F(D)?B(this).j(B(D)):B(B(this).j(D));if(F(D))return B(this.j(B(D)));if(this.l(w)<0&&D.l(w)<0)return p(this.m()*D.m());const N=this.g.length+D.g.length,R=[];for(var k=0;k<2*N;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<D.g.length;P++){const U=this.i(k)>>>16,M=this.i(k)&65535,Se=D.i(P)>>>16,Ie=D.i(P)&65535;R[2*k+2*P]+=M*Ie,X(R,2*k+2*P),R[2*k+2*P+1]+=U*Ie,X(R,2*k+2*P+1),R[2*k+2*P+1]+=M*Se,X(R,2*k+2*P+1),R[2*k+2*P+2]+=U*Se,X(R,2*k+2*P+2)}for(D=0;D<N;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=N;D<2*N;D++)R[D]=0;return new u(R,0)};function X(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function W(D,N){this.g=D,this.h=N}function ae(D,N){if(L(N))throw Error("division by zero");if(L(D))return new W(E,E);if(F(D))return N=ae(B(D),N),new W(B(N.g),B(N.h));if(F(N))return N=ae(D,B(N)),new W(B(N.g),N.h);if(D.g.length>30){if(F(D)||F(N))throw Error("slowDivide_ only works with positive integers.");for(var R=A,k=N;k.l(D)<=0;)R=de(R),k=de(k);var P=ce(R,1),U=ce(k,1);for(k=ce(k,2),R=ce(R,2);!L(k);){var M=U.add(k);M.l(D)<=0&&(P=P.add(R),U=M),k=ce(k,1),R=ce(R,1)}return N=$(D,P.j(N)),new W(P,N)}for(P=E;D.l(N)>=0;){for(R=Math.max(1,Math.floor(D.m()/N.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),U=p(R),M=U.j(N);F(M)||M.l(D)>0;)R-=k,U=p(R),M=U.j(N);L(U)&&(U=A),P=P.add(U),D=$(D,M)}return new W(P,D)}n.B=function(D){return ae(this,D).h},n.and=function(D){const N=Math.max(this.g.length,D.g.length),R=[];for(let k=0;k<N;k++)R[k]=this.i(k)&D.i(k);return new u(R,this.h&D.h)},n.or=function(D){const N=Math.max(this.g.length,D.g.length),R=[];for(let k=0;k<N;k++)R[k]=this.i(k)|D.i(k);return new u(R,this.h|D.h)},n.xor=function(D){const N=Math.max(this.g.length,D.g.length),R=[];for(let k=0;k<N;k++)R[k]=this.i(k)^D.i(k);return new u(R,this.h^D.h)};function de(D){const N=D.g.length+1,R=[];for(let k=0;k<N;k++)R[k]=D.i(k)<<1|D.i(k-1)>>>31;return new u(R,D.h)}function ce(D,N){const R=N>>5;N%=32;const k=D.g.length-R,P=[];for(let U=0;U<k;U++)P[U]=N>0?D.i(U+R)>>>N|D.i(U+R+1)<<32-N:D.i(U+R);return new u(P,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,dA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,Dr=u}).apply(typeof z0<"u"?z0:typeof self<"u"?self:typeof window<"u"?window:{});var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fA,fu,hA,Cd,ip,mA,pA,gA;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof hd=="object"&&hd];for(var S=0;S<g.length;++S){var x=g[S];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function o(g,S){if(S)e:{var x=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var G=g[b];if(!(G in x))break e;x=x[G]}g=g[g.length-1],b=x[g],S=S(b),S!=b&&S!=null&&e(x,g,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(S){var x=[],b;for(b in S)Object.prototype.hasOwnProperty.call(S,b)&&x.push([b,S[b]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function m(g,S,x){return g.call.apply(g.bind,arguments)}function p(g,S,x){return p=m,p.apply(null,arguments)}function v(g,S){var x=Array.prototype.slice.call(arguments,1);return function(){var b=x.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,S){function x(){}x.prototype=S.prototype,g.Z=S.prototype,g.prototype=new x,g.prototype.constructor=g,g.Ob=function(b,G,j){for(var ue=Array(arguments.length-2),De=2;De<arguments.length;De++)ue[De-2]=arguments[De];return S.prototype[G].apply(b,ue)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const S=g.length;if(S>0){const x=Array(S);for(let b=0;b<S;b++)x[b]=g[b];return x}return[]}function L(g,S){for(let b=1;b<arguments.length;b++){const G=arguments[b];var x=typeof G;if(x=x!="object"?x:G?Array.isArray(G)?"array":x:"null",x=="array"||x=="object"&&typeof G.length=="number"){x=g.length||0;const j=G.length||0;g.length=x+j;for(let ue=0;ue<j;ue++)g[x+ue]=G[ue]}else g.push(G)}}class F{constructor(S,x){this.i=S,this.j=x,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function B(g){u.setTimeout(()=>{throw g},0)}function $(){var g=D;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class X{constructor(){this.h=this.g=null}add(S,x){const b=W.get();b.set(S,x),this.h?this.h.next=b:this.g=b,this.h=b}}var W=new F(()=>new ae,g=>g.reset());class ae{constructor(){this.next=this.g=this.h=null}set(S,x){this.h=S,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ce=!1,D=new X,N=()=>{const g=Promise.resolve(void 0);de=()=>{g.then(R)}};function R(){for(var g;g=$();){try{g.h.call(g.g)}catch(x){B(x)}var S=W;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}ce=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const x=()=>{};u.addEventListener("test",x,S),u.removeEventListener("test",x,S)}catch{}return g})();function M(g){return/^[\s\xa0]*$/.test(g)}function Se(g,S){P.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}E(Se,P),Se.prototype.init=function(g,S){const x=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(x=="mouseover"?S=g.fromElement:x=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),J=0;function re(g,S,x,b,G){this.listener=g,this.proxy=null,this.src=S,this.type=x,this.capture=!!b,this.ha=G,this.key=++J,this.da=this.fa=!1}function he(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Fe(g,S,x){for(const b in g)S.call(x,g[b],b,g)}function Qe(g,S){for(const x in g)S.call(void 0,g[x],x,g)}function q(g){const S={};for(const x in g)S[x]=g[x];return S}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(g,S){let x,b;for(let G=1;G<arguments.length;G++){b=arguments[G];for(x in b)g[x]=b[x];for(let j=0;j<ne.length;j++)x=ne[j],Object.prototype.hasOwnProperty.call(b,x)&&(g[x]=b[x])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,S,x,b,G){const j=g.toString();g=this.g[j],g||(g=this.g[j]=[],this.h++);const ue=Re(g,S,b,G);return ue>-1?(S=g[ue],x||(S.fa=!1)):(S=new re(S,this.src,j,!!b,G),S.fa=x,g.push(S)),S};function Ce(g,S){const x=S.type;if(x in g.g){var b=g.g[x],G=Array.prototype.indexOf.call(b,S,void 0),j;(j=G>=0)&&Array.prototype.splice.call(b,G,1),j&&(he(S),g.g[x].length==0&&(delete g.g[x],g.h--))}}function Re(g,S,x,b){for(let G=0;G<g.length;++G){const j=g[G];if(!j.da&&j.listener==S&&j.capture==!!x&&j.ha==b)return G}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),xt={};function ht(g,S,x,b,G){if(Array.isArray(S)){for(let j=0;j<S.length;j++)ht(g,S[j],x,b,G);return null}return x=qs(x),g&&g[Ie]?g.J(S,x,f(b)?!!b.capture:!1,G):Di(g,S,x,!1,b,G)}function Di(g,S,x,b,G,j){if(!S)throw Error("Invalid event type");const ue=f(G)?!!G.capture:!!G;let De=is(g);if(De||(g[Ue]=De=new me(g)),x=De.add(S,x,b,ue,j),x.proxy)return x;if(b=mi(),x.proxy=b,b.src=g,b.listener=x,g.addEventListener)U||(G=ue),G===void 0&&(G=!1),g.addEventListener(S.toString(),b,G);else if(g.attachEvent)g.attachEvent(En(S.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return x}function mi(){function g(x){return S.call(g.src,g.listener,x)}const S=Pi;return g}function pi(g,S,x,b,G){if(Array.isArray(S))for(var j=0;j<S.length;j++)pi(g,S[j],x,b,G);else b=f(b)?!!b.capture:!!b,x=qs(x),g&&g[Ie]?(g=g.i,j=String(S).toString(),j in g.g&&(S=g.g[j],x=Re(S,x,b,G),x>-1&&(he(S[x]),Array.prototype.splice.call(S,x,1),S.length==0&&(delete g.g[j],g.h--)))):g&&(g=is(g))&&(S=g.g[S.toString()],g=-1,S&&(g=Re(S,x,b,G)),(x=g>-1?S[g]:null)&&Un(x))}function Un(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[Ie])Ce(S.i,g);else{var x=g.type,b=g.proxy;S.removeEventListener?S.removeEventListener(x,b,g.capture):S.detachEvent?S.detachEvent(En(x),b):S.addListener&&S.removeListener&&S.removeListener(b),(x=is(S))?(Ce(x,g),x.h==0&&(x.src=null,S[Ue]=null)):he(g)}}}function En(g){return g in xt?xt[g]:xt[g]="on"+g}function Pi(g,S){if(g.da)g=!0;else{S=new Se(S,this);const x=g.listener,b=g.ha||g.src;g.fa&&Un(g),g=x.call(b,S)}return g}function is(g){return g=g[Ue],g instanceof me?g:null}var Os="__closure_events_fn_"+(Math.random()*1e9>>>0);function qs(g){return typeof g=="function"?g:(g[Os]||(g[Os]=function(S){return g.handleEvent(S)}),g[Os])}function wt(){k.call(this),this.i=new me(this),this.M=this,this.G=null}E(wt,k),wt.prototype[Ie]=!0,wt.prototype.removeEventListener=function(g,S,x,b){pi(this,g,S,x,b)};function It(g,S){var x,b=g.G;if(b)for(x=[];b;b=b.G)x.push(b);if(g=g.M,b=S.type||S,typeof S=="string")S=new P(S,g);else if(S instanceof P)S.target=S.target||g;else{var G=S;S=new P(b,g),le(S,G)}G=!0;let j,ue;if(x)for(ue=x.length-1;ue>=0;ue--)j=S.g=x[ue],G=gi(j,b,!0,S)&&G;if(j=S.g=g,G=gi(j,b,!0,S)&&G,G=gi(j,b,!1,S)&&G,x)for(ue=0;ue<x.length;ue++)j=S.g=x[ue],G=gi(j,b,!1,S)&&G}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const x=g.g[S];for(let b=0;b<x.length;b++)he(x[b]);delete g.g[S],g.h--}}this.G=null},wt.prototype.J=function(g,S,x,b){return this.i.add(String(g),S,!1,x,b)},wt.prototype.K=function(g,S,x,b){return this.i.add(String(g),S,!0,x,b)};function gi(g,S,x,b){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let G=!0;for(let j=0;j<S.length;++j){const ue=S[j];if(ue&&!ue.da&&ue.capture==x){const De=ue.listener,Nt=ue.ha||ue.src;ue.fa&&Ce(g.i,ue),G=De.call(Nt,b)!==!1&&G}}return G&&!b.defaultPrevented}function Fs(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function Go(g){g.g=Fs(()=>{g.g=null,g.i&&(g.i=!1,Go(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class Kt extends k{constructor(S,x){super(),this.m=S,this.l=x,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(g){k.call(this),this.h=g,this.g={}}E(ki,k);var Bs=[];function Kr(g){Fe(g.g,function(S,x){this.g.hasOwnProperty(x)&&Un(S)},g),g.g={}}ki.prototype.N=function(){ki.Z.N.call(this),Kr(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yi=u.JSON.stringify,Ho=u.JSON.parse,jr=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Qr(){}function $r(){}var Ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){P.call(this,"d")}E(kt,P);function pn(){P.call(this,"c")}E(pn,P);var Et={},Yo=null;function ss(){return Yo=Yo||new wt}Et.Ia="serverreachability";function Xr(g){P.call(this,Et.Ia,g)}E(Xr,P);function $n(g){const S=ss();It(S,new Xr(S))}Et.STAT_EVENT="statevent";function rs(g,S){P.call(this,Et.STAT_EVENT,g),this.stat=S}E(rs,P);function pt(g){const S=ss();It(S,new rs(S,g))}Et.Ja="timingevent";function Sn(g,S){P.call(this,Et.Ja,g),this.size=S}E(Sn,P);function Xn(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function An(){this.g=!0}An.prototype.ua=function(){this.g=!1};function Jo(g,S,x,b,G,j){g.info(function(){if(g.g)if(j){var ue="",De=j.split("&");for(let et=0;et<De.length;et++){var Nt=De[et].split("=");if(Nt.length>1){const St=Nt[0];Nt=Nt[1];const ni=St.split("_");ue=ni.length>=2&&ni[1]=="type"?ue+(St+"="+Nt+"&"):ue+(St+"=redacted&")}}}else ue=null;else ue=j;return"XMLHTTP REQ ("+b+") [attempt "+G+"]: "+S+`
`+x+`
`+ue})}function Ko(g,S,x,b,G,j,ue){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+G+"]: "+S+`
`+x+`
`+j+" "+ue})}function On(g,S,x,b){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+ul(g,x)+(b?" "+b:"")})}function os(g,S){g.info(function(){return"TIMEOUT: "+S})}An.prototype.info=function(){};function ul(g,S){if(!g.g)return S;if(!S)return null;try{const j=JSON.parse(S);if(j){for(g=0;g<j.length;g++)if(Array.isArray(j[g])){var x=j[g];if(!(x.length<2)){var b=x[1];if(Array.isArray(b)&&!(b.length<1)){var G=b[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<b.length;ue++)b[ue]=""}}}}return yi(j)}catch{return S}}var Vi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gs;function as(){}E(as,Qr),as.prototype.g=function(){return new XMLHttpRequest},Gs=new as;function _i(g){return encodeURIComponent(String(g))}function Wr(g){var S=1;g=g.split(":");const x=[];for(;S>0&&g.length;)x.push(g.shift()),S--;return g.length&&x.push(g.join(":")),x}function qn(g,S,x,b){this.j=g,this.i=S,this.l=x,this.S=b||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gn}function gn(){this.i=null,this.g="",this.h=!1}var it={},Vt={};function Wn(g,S,x){g.M=1,g.A=eo(Ut(S)),g.u=x,g.R=!0,Hs(g,null)}function Hs(g,S){g.F=Date.now(),Zn(g),g.B=Ut(g.A);var x=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Xo(x.i,"t",b),g.C=0,x=g.j.L,g.h=new gn,g.g=rc(g.j,x?S:null,!g.u),g.P>0&&(g.O=new Kt(p(g.Y,g,g.g),g.P)),S=g.V,x=g.g,b=g.ba;var G="readystatechange";Array.isArray(G)||(G&&(Bs[0]=G.toString()),G=Bs);for(let j=0;j<G.length;j++){const ue=ht(x,G[j],b||S.handleEvent,!1,S.h||S);if(!ue)break;S.g[ue.key]=ue}S=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),$n(),Jo(g.i,g.v,g.B,g.l,g.S,g.u)}qn.prototype.ba=function(g){g=g.target;const S=this.O;S&&Ei(g)==3?S.j():this.Y(g)},qn.prototype.Y=function(g){try{if(g==this.g)e:{const De=Ei(this.g),Nt=this.g.ya(),et=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||De!=4||Nt==7||(Nt==8||et<=0?$n(3):$n(2)),Fn(this);var S=this.g.ca();this.X=S;var x=cl(this);if(this.o=S==200,Ko(this.i,this.v,this.B,this.l,this.S,De,S),this.o){if(this.U&&!this.L){t:{if(this.g){var b,G=this.g;if((b=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(b)){var j=b;break t}}j=null}if(g=j)On(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$e(this,g);else{this.o=!1,this.m=3,pt(12),je(this),ye(this);break e}}if(this.R){g=!0;let St;for(;!this.K&&this.C<x.length;)if(St=Zr(this,x),St==Vt){De==4&&(this.m=4,pt(14),g=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(St==it){this.m=4,pt(15),On(this.i,this.l,x,"[Invalid Chunk]"),g=!1;break}else On(this.i,this.l,St,null),$e(this,St);if(jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||x.length!=0||this.h.h||(this.m=1,pt(16),g=!1),this.o=this.o&&g,!g)On(this.i,this.l,x,"[Invalid Chunked Response]"),je(this),ye(this);else if(x.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Al(ue),ue.P=!0,pt(11))}}else On(this.i,this.l,x,null),$e(this,x);De==4&&je(this),this.o&&!this.K&&(De==4?tc(this.j,this):(this.o=!1,Zn(this)))}else cs(this.g),S==400&&x.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),je(this),ye(this)}}}catch{}finally{}};function cl(g){if(!jo(g))return g.g.la();const S=Wt(g.g);if(S==="")return"";let x="";const b=S.length,G=Ei(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return je(g),ye(g),"";g.h.i=new u.TextDecoder}for(let j=0;j<b;j++)g.h.h=!0,x+=g.h.i.decode(S[j],{stream:!(G&&j==b-1)});return S.length=0,g.h.g+=x,g.C=0,g.h.g}function jo(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Zr(g,S){var x=g.C,b=S.indexOf(`
`,x);return b==-1?Vt:(x=Number(S.substring(x,b)),isNaN(x)?it:(b+=1,b+x>S.length?Vt:(S=S.slice(b,b+x),g.C=b+x,S)))}qn.prototype.cancel=function(){this.K=!0,je(this)};function Zn(g){g.T=Date.now()+g.H,ls(g,g.H)}function ls(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Xn(p(g.aa,g),S)}function Fn(g){g.D&&(u.clearTimeout(g.D),g.D=null)}qn.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(os(this.i,this.B),this.M!=2&&($n(),pt(17)),je(this),this.m=2,ye(this)):ls(this,this.T-g)};function ye(g){g.j.I==0||g.K||tc(g.j,g)}function je(g){Fn(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,Kr(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function $e(g,S){try{var x=g.j;if(x.I!=0&&(x.g==g||Ui(x.h,g))){if(!g.L&&Ui(x.h,g)&&x.I==3){try{var b=x.Ba.g.parse(S)}catch{b=null}if(Array.isArray(b)&&b.length==3){var G=b;if(G[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<g.F)na(x),Ws(x);else break e;ao(x),pt(18)}}else x.xa=G[1],0<x.xa-x.K&&G[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Xn(p(x.Va,x),6e3));xn(x.h)<=1&&x.ta&&(x.ta=void 0)}else zi(x,11)}else if((g.L||x.g==g)&&na(x),!M(S))for(G=x.Ba.g.parse(S),S=0;S<G.length;S++){let et=G[S];const St=et[0];if(!(St<=x.K))if(x.K=St,et=et[1],x.I==2)if(et[0]=="c"){x.M=et[1],x.ba=et[2];const ni=et[3];ni!=null&&(x.ka=ni,x.j.info("VER="+x.ka));const Gi=et[4];Gi!=null&&(x.za=Gi,x.j.info("SVER="+x.za));const Si=et[5];Si!=null&&typeof Si=="number"&&Si>0&&(b=1.5*Si,x.O=b,x.j.info("backChannelRequestTimeoutMs_="+b)),b=x;const Ai=g.g;if(Ai){const lo=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var j=b.h;j.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(dl(j,j.h),j.h=null))}if(b.G){const ia=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;ia&&(b.wa=ia,st(b.J,b.G,ia))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-g.F,x.j.info("Handshake RTT: "+x.T+"ms")),b=x;var ue=g;if(b.na=sc(b,b.L?b.ba:null,b.W),ue.L){fl(b.h,ue);var De=ue,Nt=b.O;Nt&&(De.H=Nt),De.D&&(Fn(De),Zn(De)),b.g=ue}else Zu(b);x.i.length>0&&Bi(x)}else et[0]!="stop"&&et[0]!="close"||zi(x,7);else x.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?zi(x,7):El(x):et[0]!="noop"&&x.l&&x.l.qa(et),x.A=0)}}$n(4)}catch{}}var Ve=class{constructor(g,S){this.g=g,this.map=S}};function yn(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cn(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function xn(g){return g.h?1:g.g?g.g.size:0}function Ui(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function dl(g,S){g.g?g.g.add(S):g.h=S}function fl(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}yn.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function hl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const x of g.g.values())S=S.concat(x.G);return S}return w(g.i)}var Ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(g,S){if(g){g=g.split("&");for(let x=0;x<g.length;x++){const b=g[x].indexOf("=");let G,j=null;b>=0?(G=g[x].substring(0,b),j=g[x].substring(b+1)):G=g[x],S(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Bn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Bn?(this.l=g.l,jt(this,g.j),this.o=g.o,this.g=g.g,Ys(this,g.u),this.h=g.h,ml(this,Xu(g.i)),this.m=g.m):g&&(S=String(g).match(Ku))?(this.l=!1,jt(this,S[1]||"",!0),this.o=Li(S[2]||""),this.g=Li(S[3]||"",!0),Ys(this,S[4]),this.h=Li(S[5]||"",!0),ml(this,S[6]||"",!0),this.m=Li(S[7]||"")):(this.l=!1,this.i=new Ks(null,this.l))}Bn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(to(S,$o,!0),":");var x=this.g;return(x||S=="file")&&(g.push("//"),(S=this.o)&&g.push(to(S,$o,!0),"@"),g.push(_i(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&g.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&g.push("/"),g.push(to(x,x.charAt(0)=="/"?pl:ju,!0))),(x=this.i.toString())&&g.push("?",x),(x=this.m)&&g.push("#",to(x,Qu)),g.join("")},Bn.prototype.resolve=function(g){const S=Ut(this);let x=!!g.j;x?jt(S,g.j):x=!!g.o,x?S.o=g.o:x=!!g.g,x?S.g=g.g:x=g.u!=null;var b=g.h;if(x)Ys(S,g.u);else if(x=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var G=S.h.lastIndexOf("/");G!=-1&&(b=S.h.slice(0,G+1)+b)}if(G=b,G==".."||G==".")b="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){b=G.lastIndexOf("/",0)==0,G=G.split("/");const j=[];for(let ue=0;ue<G.length;){const De=G[ue++];De=="."?b&&ue==G.length&&j.push(""):De==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),b&&ue==G.length&&j.push("")):(j.push(De),b=!0)}b=j.join("/")}else b=G}return x?S.h=b:x=g.i.toString()!=="",x?ml(S,Xu(g.i)):x=!!g.m,x&&(S.m=g.m),S};function Ut(g){return new Bn(g)}function jt(g,S,x){g.j=x?Li(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Ys(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function ml(g,S,x){S instanceof Ks?(g.i=S,Wo(g.i,g.l)):(x||(S=to(S,Js)),g.i=new Ks(S,g.l))}function st(g,S,x){g.i.set(S,x)}function eo(g){return st(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Li(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function to(g,S,x){return typeof g=="string"?(g=encodeURI(g).replace(S,wn),x&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function wn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var $o=/[#\/\?@]/g,ju=/[#\?:]/g,pl=/[#\?]/g,Js=/[#\?@]/g,Qu=/#/g;function Ks(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function In(g){g.g||(g.g=new Map,g.h=0,g.i&&Qo(g.i,function(S,x){g.add(decodeURIComponent(S.replace(/\+/g," ")),x)}))}n=Ks.prototype,n.add=function(g,S){In(this),this.i=null,g=js(this,g);let x=this.g.get(g);return x||this.g.set(g,x=[]),x.push(S),this.h+=1,this};function $u(g,S){In(g),S=js(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function gl(g,S){return In(g),S=js(g,S),g.g.has(S)}n.forEach=function(g,S){In(this),this.g.forEach(function(x,b){x.forEach(function(G){g.call(S,G,b,this)},this)},this)};function yl(g,S){In(g);let x=[];if(typeof S=="string")gl(g,S)&&(x=x.concat(g.g.get(js(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)x=x.concat(g[S]);return x}n.set=function(g,S){return In(this),this.i=null,g=js(this,g),gl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=yl(this,g),g.length>0?String(g[0]):S):S};function Xo(g,S,x){$u(g,S),x.length>0&&(g.i=null,g.g.set(js(g,S),w(x)),g.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let b=0;b<S.length;b++){var x=S[b];const G=_i(x);x=yl(this,x);for(let j=0;j<x.length;j++){let ue=G;x[j]!==""&&(ue+="="+_i(x[j])),g.push(ue)}}return this.i=g.join("&")};function Xu(g){const S=new Ks;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function js(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function Wo(g,S){S&&!g.j&&(In(g),g.i=null,g.g.forEach(function(x,b){const G=b.toLowerCase();b!=G&&($u(this,b),Xo(this,G,x))},g)),g.j=S}function vi(g,S){const x=new An;if(u.Image){const b=new Image;b.onload=v(ei,x,"TestLoadImage: loaded",!0,S,b),b.onerror=v(ei,x,"TestLoadImage: error",!1,S,b),b.onabort=v(ei,x,"TestLoadImage: abort",!1,S,b),b.ontimeout=v(ei,x,"TestLoadImage: timeout",!1,S,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else S(!1)}function _l(g,S){const x=new An,b=new AbortController,G=setTimeout(()=>{b.abort(),ei(x,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:b.signal}).then(j=>{clearTimeout(G),j.ok?ei(x,"TestPingServer: ok",!0,S):ei(x,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(G),ei(x,"TestPingServer: error",!1,S)})}function ei(g,S,x,b,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),b(x)}catch{}}function Qs(){this.g=new jr}function Oi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(Oi,Qr),Oi.prototype.g=function(){return new no(this.i,this.h)};function no(g,S){wt.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(no,wt),n=no.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,Ti(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?$s(this):Ti(this),this.readyState==3&&Zo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,$s(this))},n.Na=function(g){this.g&&(this.response=g,$s(this))},n.ga=function(){this.g&&$s(this)};function $s(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Ti(g)}n.setRequestHeader=function(g,S){this.A.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var x=S.next();!x.done;)x=x.value,g.push(x[0]+": "+x[1]),x=S.next();return g.join(`\r
`)};function Ti(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(no.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ti(g){let S="";return Fe(g,function(x,b){S+=b,S+=":",S+=x,S+=`\r
`}),S}function io(g,S,x){e:{for(b in x){var b=!1;break e}b=!0}b||(x=ti(x),typeof g=="string"?x!=null&&_i(x):st(g,S,x))}function at(g){wt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(at,wt);var qi=/^https?$/i,vl=["POST","PUT"];n=at.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,S,x,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gs.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(j){so(this,j);return}if(g=x||"",x=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var G in b)x.set(G,b[G]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const j of b.keys())x.set(j,b.get(j));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(x.keys()).find(j=>j.toLowerCase()=="content-type"),G=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(vl,S,void 0)>=0)||b||G||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ue]of x)this.g.setRequestHeader(j,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(j){so(this,j)}};function so(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,Tl(g),us(g)}function Tl(g){g.A||(g.A=!0,It(g,"complete"),It(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,It(this,"complete"),It(this,"abort"),us(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),us(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ro(this):this.Xa())},n.Xa=function(){ro(this)};function ro(g){if(g.h&&typeof l<"u"){if(g.v&&Ei(g)==4)setTimeout(g.Ca.bind(g),0);else if(It(g,"readystatechange"),Ei(g)==4){g.h=!1;try{const j=g.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var x;if(!(x=S)){var b;if(b=j===0){let ue=String(g.D).match(Ku)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),b=!qi.test(ue?ue.toLowerCase():"")}x=b}if(x)It(g,"complete"),It(g,"success");else{g.o=6;try{var G=Ei(g)>2?g.g.statusText:""}catch{G=""}g.l=G+" ["+g.ca()+"]",Tl(g)}}finally{us(g)}}}}function us(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const x=g.g;g.g=null,S||It(g,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ei(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),Ho(S)}};function Wt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function cs(g){const S={};g=(g.g&&Ei(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(M(g[b]))continue;var x=Wr(g[b]);const G=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const j=S[G]||[];S[G]=j,j.push(x)}Qe(S,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(g,S,x){return x&&x.internalChannelParams&&x.internalChannelParams[g]||S}function Xs(g){this.za=0,this.i=[],this.j=new An,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fi("baseRetryDelayMs",5e3,g),this.Za=Fi("retryDelaySeedMs",1e4,g),this.Ta=Fi("forwardChannelMaxRetries",2,g),this.va=Fi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new yn(g&&g.concurrentRequestLimit),this.Ba=new Qs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Xs.prototype,n.ka=8,n.I=1,n.connect=function(g,S,x,b){pt(0),this.W=g,this.H=S||{},x&&b!==void 0&&(this.H.OSID=x,this.H.OAID=b),this.F=this.X,this.J=sc(this,null,this.W),Bi(this)};function El(g){if(ea(g),g.I==3){var S=g.V++,x=Ut(g.J);if(st(x,"SID",g.M),st(x,"RID",S),st(x,"TYPE","terminate"),oo(g,x),S=new qn(g,g.j,S),S.M=2,S.A=eo(Ut(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=S.A,x=!0),x||(S.g=rc(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Zn(S)}ic(g)}function Ws(g){g.g&&(Al(g),g.g.cancel(),g.g=null)}function ea(g){Ws(g),g.v&&(u.clearTimeout(g.v),g.v=null),na(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Bi(g){if(!Cn(g.h)&&!g.m){g.m=!0;var S=g.Ea;de||N(),ce||(de(),ce=!0),D.add(S,g),g.D=0}}function ta(g,S){return xn(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Xn(p(g.Ea,g,S),nc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const G=new qn(this,this.j,g);let j=this.o;if(this.U&&(j?(j=q(j),le(j,this.U)):j=this.U),this.u!==null||this.R||(G.J=j,j=null),this.S)e:{for(var S=0,x=0;x<this.i.length;x++){t:{var b=this.i[x];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(S+=b,S>4096){S=x;break e}if(S===4096||x===this.i.length-1){S=x+1;break e}}S=1e3}else S=1e3;S=Wu(this,G,S),x=Ut(this.J),st(x,"RID",g),st(x,"CVER",22),this.G&&st(x,"X-HTTP-Session-Id",this.G),oo(this,x),j&&(this.R?S="headers="+_i(ti(j))+"&"+S:this.u&&io(x,this.u,j)),dl(this.h,G),this.Ra&&st(x,"TYPE","init"),this.S?(st(x,"$req",S),st(x,"SID","null"),G.U=!0,Wn(G,x,null)):Wn(G,x,S),this.I=2}}else this.I==3&&(g?Sl(this,g):this.i.length==0||Cn(this.h)||Sl(this))};function Sl(g,S){var x;S?x=S.l:x=g.V++;const b=Ut(g.J);st(b,"SID",g.M),st(b,"RID",x),st(b,"AID",g.K),oo(g,b),g.u&&g.o&&io(b,g.u,g.o),x=new qn(g,g.j,x,g.D+1),g.u===null&&(x.J=g.o),S&&(g.i=S.G.concat(g.i)),S=Wu(g,x,1e3),x.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),dl(g.h,x),Wn(x,b,S)}function oo(g,S){g.H&&Fe(g.H,function(x,b){st(S,b,x)}),g.l&&Fe({},function(x,b){st(S,b,x)})}function Wu(g,S,x){x=Math.min(g.i.length,x);const b=g.l?p(g.l.Ka,g.l,g):null;e:{var G=g.i;let De=-1;for(;;){const Nt=["count="+x];De==-1?x>0?(De=G[0].g,Nt.push("ofs="+De)):De=0:Nt.push("ofs="+De);let et=!0;for(let St=0;St<x;St++){var j=G[St].g;const ni=G[St].map;if(j-=De,j<0)De=Math.max(0,G[St].g-100),et=!1;else try{j="req"+j+"_"||"";try{var ue=ni instanceof Map?ni:Object.entries(ni);for(const[Gi,Si]of ue){let Ai=Si;f(Si)&&(Ai=yi(Si)),Nt.push(j+Gi+"="+encodeURIComponent(Ai))}}catch(Gi){throw Nt.push(j+"type="+encodeURIComponent("_badmap")),Gi}}catch{b&&b(ni)}}if(et){ue=Nt.join("&");break e}}ue=void 0}return g=g.i.splice(0,x),S.G=g,ue}function Zu(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;de||N(),ce||(de(),ce=!0),D.add(S,g),g.A=0}}function ao(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Xn(p(g.Da,g),nc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Xn(p(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Ws(this),ec(this))};function Al(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function ec(g){g.g=new qn(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=Ut(g.na);st(S,"RID","rpc"),st(S,"SID",g.M),st(S,"AID",g.K),st(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&st(S,"TO",g.ia),st(S,"TYPE","xmlhttp"),oo(g,S),g.u&&g.o&&io(S,g.u,g.o),g.O&&(g.g.H=g.O);var x=g.g;g=g.ba,x.M=1,x.A=eo(Ut(S)),x.u=null,x.R=!0,Hs(x,g)}n.Va=function(){this.C!=null&&(this.C=null,Ws(this),ao(this),pt(19))};function na(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function tc(g,S){var x=null;if(g.g==S){na(g),Al(g),g.g=null;var b=2}else if(Ui(g.h,S))x=S.G,fl(g.h,S),b=1;else return;if(g.I!=0){if(S.o)if(b==1){x=S.u?S.u.length:0,S=Date.now()-S.F;var G=g.D;b=ss(),It(b,new Sn(b,x)),Bi(g)}else Zu(g);else if(G=S.m,G==3||G==0&&S.X>0||!(b==1&&ta(g,S)||b==2&&ao(g)))switch(x&&x.length>0&&(S=g.h,S.i=S.i.concat(x)),G){case 1:zi(g,5);break;case 4:zi(g,10);break;case 3:zi(g,6);break;default:zi(g,2)}}}function nc(g,S){let x=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(x*=2),x*S}function zi(g,S){if(g.j.info("Error code "+S),S==2){var x=p(g.bb,g),b=g.Ua;const G=!b;b=new Bn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||jt(b,"https"),eo(b),G?vi(b.toString(),x):_l(b.toString(),x)}else pt(2);g.I=0,g.l&&g.l.pa(S),ic(g),ea(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function ic(g){if(g.I=0,g.ja=[],g.l){const S=hl(g.h);(S.length!=0||g.i.length!=0)&&(L(g.ja,S),L(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function sc(g,S,x){var b=x instanceof Bn?Ut(x):new Bn(x);if(b.g!="")S&&(b.g=S+"."+b.g),Ys(b,b.u);else{var G=u.location;b=G.protocol,S=S?S+"."+G.hostname:G.hostname,G=+G.port;const j=new Bn(null);b&&jt(j,b),S&&(j.g=S),G&&Ys(j,G),x&&(j.h=x),b=j}return x=g.G,S=g.wa,x&&S&&st(b,x,S),st(b,"VER",g.ka),oo(g,b),b}function rc(g,S,x){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new at(new Oi({ab:x})):new at(g.ma),S.Fa(g.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oc(){}n=oc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Zs(){}Zs.prototype.g=function(g,S){return new _n(g,S)};function _n(g,S){wt.call(this),this.g=new Xs(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!M(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!M(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new ds(this)}E(_n,wt),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){El(this.g)},_n.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var x={};x.__data__=g,g=x}else this.v&&(x={},x.__data__=yi(g),g=x);S.i.push(new Ve(S.Ya++,g)),S.I==3&&Bi(S)},_n.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,_n.Z.N.call(this)};function ac(g){kt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const x in S){g=x;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}E(ac,kt);function lc(){pn.call(this),this.status=1}E(lc,pn);function ds(g){this.g=g}E(ds,oc),ds.prototype.ra=function(){It(this.g,"a")},ds.prototype.qa=function(g){It(this.g,new ac(g))},ds.prototype.pa=function(g){It(this.g,new lc)},ds.prototype.oa=function(){It(this.g,"b")},Zs.prototype.createWebChannel=Zs.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,gA=function(){return new Zs},pA=function(){return ss()},mA=Et,ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,Cd=Vi,zs.COMPLETE="complete",hA=zs,$r.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",wt.prototype.listen=wt.prototype.J,fu=$r,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,fA=at}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});const G0="@firebase/firestore",H0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Vp("@firebase/firestore");function Pa(){return Vo.logLevel}function pe(n,...e){if(Vo.logLevel<=Ge.DEBUG){const t=e.map(Jp);Vo.debug(`Firestore (${nl}): ${n}`,...t)}}function Ds(n,...e){if(Vo.logLevel<=Ge.ERROR){const t=e.map(Jp);Vo.error(`Firestore (${nl}): ${n}`,...t)}}function Ka(n,...e){if(Vo.logLevel<=Ge.WARN){const t=e.map(Jp);Vo.warn(`Firestore (${nl}): ${n}`,...t)}}function Jp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,yA(n,i,t)}function yA(n,e,t){let i=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ds(i),new Error(i)}function nt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||yA(e,o,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Vs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class h1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class m1{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Pr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Pr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new _A(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class p1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class g1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new p1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Y0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const i=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Y0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Y0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=_1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function He(n,e){return n<e?-1:n>e?1:0}function sp(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return Om(o)===Om(l)?He(o,l):Om(o)?1:-1}return He(n.length,e.length)}const v1=55296,T1=57343;function Om(n){const e=n.charCodeAt(0);return e>=v1&&e<=T1}function ja(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__name__";class ji{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=ji.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const i=ji.isNumericId(e),o=ji.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ji.extractNumericId(e).compare(ji.extractNumericId(t)):sp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class vt extends ji{construct(e,t,i){return new vt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const E1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends ji{construct(e,t,i){return new rn(e,t,i)}static isValidIdentifier(e){return E1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J0}static keyField(){return new rn([J0])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ve(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ve(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ve(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(l(),o++)}if(l(),u)throw new ve(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(vt.fromString(e))}static fromName(e){return new Ee(vt.fromString(e).popFirst(5))}static empty(){return new Ee(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e,t){if(!t)throw new ve(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function S1(n,e,t,i){if(e===!0&&i===!0)throw new ve(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function K0(n){if(!Ee.isDocumentKey(n))throw new ve(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function j0(n){if(Ee.isDocumentKey(n))throw new ve(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Ri(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jp(n);throw new ve(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function qu(n,e){if(!TA(n))throw new ve(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ve(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=-62135596800,$0=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*$0);return new Tt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q0)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$0}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:zt("string",Tt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Tt(0,0))}static max(){return new be(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=-1;function A1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new Tt(t+1,0):new Tt(t,i));return new Vr(o,Ee.empty(),e)}function C1(n){return new Vr(n.readTime,n.key,Iu)}class Vr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vr(be.min(),Ee.empty(),Iu)}static max(){return new Vr(be.max(),Ee.empty(),Iu)}}function x1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==w1)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,l=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++l,u&&l===o&&t()}),(m=>i(m)))})),u=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((v=>{u[p]=v,++f,f===l&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function R1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=-1;function df(n){return n==null}function Fd(n){return n===0&&1/n==-1/0}function b1(n){return typeof n=="number"&&Number.isInteger(n)&&!Fd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="";function N1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=X0(e)),e=M1(n.get(t),e);return X0(e)}function M1(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case EA:t+="";break;default:t+=l}}return t}function X0(n){return n+EA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new sn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Qn([])}unionWith(e){let t=new Jt(rn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new AA("Invalid base64 string: "+l):l}})(e);return new on(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const D1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(n){if(nt(!!n,39018),typeof n=="string"){let e=0;const t=D1.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lr(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="server_timestamp",xA="__type__",wA="__previous_value__",IA="__local_write_time__";function $p(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[xA])==null?void 0:i.stringValue)===CA}function ff(n){const e=n.mapValue.fields[wA];return $p(e)?ff(e):e}function Ru(n){const e=Ur(n.mapValue.fields[IA].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t,i,o,l,u,f,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const Bd="(default)";class bu{constructor(e,t){this.projectId=e,this.database=t||Bd}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===Bd}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="__type__",k1="__max__",pd={mapValue:{}},bA="__vector__",zd="value";function Or(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$p(n)?4:U1(n)?9007199254740991:V1(n)?10:11:we(28295,{value:n})}function ts(n,e){if(n===e)return!0;const t=Or(n);if(t!==Or(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ru(n).isEqual(Ru(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=Ur(o.timestampValue),f=Ur(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Lr(o.bytesValue).isEqual(Lr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Pt(o.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(o.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Pt(o.integerValue)===Pt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=Pt(o.doubleValue),f=Pt(l.doubleValue);return u===f?Fd(u)===Fd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return ja(n.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},f=l.mapValue.fields||{};if(W0(u)!==W0(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!ts(u[m],f[m])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Nu(n,e){return(n.values||[]).find((t=>ts(t,e)))!==void 0}function Qa(n,e){if(n===e)return 0;const t=Or(n),i=Or(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Pt(l.integerValue||l.doubleValue),m=Pt(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return eT(n.timestampValue,e.timestampValue);case 4:return eT(Ru(n),Ru(e));case 5:return sp(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=Lr(l),m=Lr(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),m=u.split("/");for(let p=0;p<f.length&&p<m.length;p++){const v=He(f[p],m[p]);if(v!==0)return v}return He(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=He(Pt(l.latitude),Pt(u.latitude));return f!==0?f:He(Pt(l.longitude),Pt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return tT(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var A,w,L,F;const f=l.fields||{},m=u.fields||{},p=(A=f[zd])==null?void 0:A.arrayValue,v=(w=m[zd])==null?void 0:w.arrayValue,E=He(((L=p==null?void 0:p.values)==null?void 0:L.length)||0,((F=v==null?void 0:v.values)==null?void 0:F.length)||0);return E!==0?E:tT(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===pd.mapValue&&u===pd.mapValue)return 0;if(l===pd.mapValue)return 1;if(u===pd.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=u.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const A=sp(m[E],v[E]);if(A!==0)return A;const w=Qa(f[m[E]],p[v[E]]);if(w!==0)return w}return He(m.length,v.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function eT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=Ur(n),i=Ur(e),o=He(t.seconds,i.seconds);return o!==0?o:He(t.nanos,i.nanos)}function tT(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Qa(t[o],i[o]);if(l)return l}return He(t.length,i.length)}function $a(n){return rp(n)}function rp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ur(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Lr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=rp(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of i)l?l=!1:o+=",",o+=`${u}:${rp(t.fields[u])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function xd(n){switch(Or(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(n);return e?16+xd(e):16;case 5:return 2*n.stringValue.length;case 6:return Lr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+xd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Hr(i.fields,((l,u)=>{o+=l.length+xd(u)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function op(n){return!!n&&"integerValue"in n}function Xp(n){return!!n&&"arrayValue"in n}function nT(n){return!!n&&"nullValue"in n}function iT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wd(n){return!!n&&"mapValue"in n}function V1(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[RA])==null?void 0:i.stringValue)===bA}function _u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Hr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=_u(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(n.arrayValue.values[t]);return e}return{...n}}function U1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===k1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!wd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=rn.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=f.popLast()}u?i[f.lastSegment()]=_u(u):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());wd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];wd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Hr(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new kn(_u(this.value))}}function NA(n){const e=[];return Hr(n.fields,((t,i)=>{const o=new rn([t]);if(wd(i)){const l=NA(i.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t,i,o,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new fn(e,0,be.min(),be.min(),be.min(),kn.empty(),0)}static newFoundDocument(e,t,i,o){return new fn(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new fn(e,2,t,be.min(),be.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,be.min(),be.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.position=e,this.inclusive=t}}function sT(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Qa(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function rT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ts(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t="asc"){this.field=e,this.dir=t}}function L1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class Yt extends MA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new q1(e,t,i):t==="array-contains"?new z1(e,i):t==="in"?new G1(e,i):t==="not-in"?new H1(e,i):t==="array-contains-any"?new Y1(e,i):new Yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new F1(e,i):new B1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qa(t,this.value)):t!==null&&Or(this.value)===Or(t)&&this.matchesComparison(Qa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends MA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ns(e,t)}matches(e){return DA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DA(n){return n.op==="and"}function PA(n){return O1(n)&&DA(n)}function O1(n){for(const e of n.filters)if(e instanceof ns)return!1;return!0}function ap(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(PA(n))return n.filters.map((e=>ap(e))).join(",");{const e=n.filters.map((t=>ap(t))).join(",");return`${n.op}(${e})`}}function kA(n,e){return n instanceof Yt?(function(i,o){return o instanceof Yt&&i.op===o.op&&i.field.isEqual(o.field)&&ts(i.value,o.value)})(n,e):n instanceof ns?(function(i,o){return o instanceof ns&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,u,f)=>l&&kA(u,o.filters[f])),!0):!1})(n,e):void we(19439)}function VA(n){return n instanceof Yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`})(n):n instanceof ns?(function(t){return t.op.toString()+" {"+t.getFilters().map(VA).join(" ,")+"}"})(n):"Filter"}class q1 extends Yt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class F1 extends Yt{constructor(e,t){super(e,"in",t),this.keys=UA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class B1 extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=UA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function UA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class z1 extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xp(t)&&Nu(t.arrayValue,this.value)}}class G1 extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nu(this.value.arrayValue,t)}}class H1 extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nu(this.value.arrayValue,t)}}class Y1 extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Nu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t=null,i=[],o=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function oT(n,e=null,t=[],i=[],o=null,l=null,u=null){return new J1(n,e,t,i,o,l,u)}function Wp(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ap(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$a(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$a(i))).join(",")),e.Te=t}return e.Te}function Zp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!L1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rT(n.startAt,e.startAt)&&rT(n.endAt,e.endAt)}function lp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t=null,i=[],o=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function K1(n,e,t,i,o,l,u,f){return new hf(n,e,t,i,o,l,u,f)}function eg(n){return new hf(n)}function aT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function j1(n){return n.collectionGroup!==null}function vu(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Jt(rn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Hd(l,i))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new Hd(rn.keyField(),i))}return e.Ie}function Xi(n){const e=Me(n);return e.Ee||(e.Ee=Q1(e,vu(n))),e.Ee}function Q1(n,e){if(n.limitType==="F")return oT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Hd(o.field,l)}));const t=n.endAt?new Gd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Gd(n.startAt.position,n.startAt.inclusive):null;return oT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function up(n,e,t){return new hf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mf(n,e){return Zp(Xi(n),Xi(e))&&n.limitType===e.limitType}function LA(n){return`${Wp(Xi(n))}|lt:${n.limitType}`}function ka(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>VA(o))).join(", ")}]`),df(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>$a(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>$a(o))).join(",")),`Target(${i})`})(Xi(n))}; limitType=${n.limitType})`}function pf(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of vu(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,m){const p=sT(u,f,m);return u.inclusive?p<=0:p<0})(i.startAt,vu(i),o)||i.endAt&&!(function(u,f,m){const p=sT(u,f,m);return u.inclusive?p>=0:p>0})(i.endAt,vu(i),o))})(n,e)}function $1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OA(n){return(e,t)=>{let i=!1;for(const o of vu(n)){const l=X1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function X1(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,u,f){const m=u.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Qa(m,p):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return SA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new Ct(Ee.comparator);function Ps(){return W1}const qA=new Ct(Ee.comparator);function hu(...n){let e=qA;for(const t of n)e=e.insert(t.key,t);return e}function FA(n){let e=qA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function wo(){return Tu()}function BA(){return Tu()}function Tu(){return new qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Z1=new Ct(Ee.comparator),eM=new Jt(Ee.comparator);function Ye(...n){let e=eM;for(const t of n)e=e.add(t);return e}const tM=new Jt(He);function nM(){return tM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fd(e)?"-0":e}}function zA(n){return{integerValue:""+n}}function iM(n,e){return b1(e)?zA(e):tg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function sM(n,e,t){return n instanceof Yd?(function(o,l){const u={fields:{[xA]:{stringValue:CA},[IA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&$p(l)&&(l=ff(l)),l&&(u.fields[wA]=l),{mapValue:u}})(t,e):n instanceof Mu?HA(n,e):n instanceof Du?YA(n,e):(function(o,l){const u=GA(o,l),f=lT(u)+lT(o.Ae);return op(u)&&op(o.Ae)?zA(f):tg(o.serializer,f)})(n,e)}function rM(n,e,t){return n instanceof Mu?HA(n,e):n instanceof Du?YA(n,e):t}function GA(n,e){return n instanceof Jd?(function(i){return op(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Yd extends gf{}class Mu extends gf{constructor(e){super(),this.elements=e}}function HA(n,e){const t=JA(e);for(const i of n.elements)t.some((o=>ts(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Du extends gf{constructor(e){super(),this.elements=e}}function YA(n,e){let t=JA(e);for(const i of n.elements)t=t.filter((o=>!ts(o,i)));return{arrayValue:{values:t}}}class Jd extends gf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lT(n){return Pt(n.integerValue||n.doubleValue)}function JA(n){return Xp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function oM(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Mu&&o instanceof Mu||i instanceof Du&&o instanceof Du?ja(i.elements,o.elements,ts):i instanceof Jd&&o instanceof Jd?ts(i.Ae,o.Ae):i instanceof Yd&&o instanceof Yd})(n.transform,e.transform)}class aM{constructor(e,t){this.version=e,this.transformResults=t}}class bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Id(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yf{}function KA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ng(n.key,bi.none()):new Fu(n.key,n.data,bi.none());{const t=n.data,i=kn.empty();let o=new Jt(rn.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),o=o.add(l)}return new Yr(n.key,i,new Qn(o.toArray()),bi.none())}}function lM(n,e,t){n instanceof Fu?(function(o,l,u){const f=o.value.clone(),m=cT(o.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Yr?(function(o,l,u){if(!Id(o.precondition,l))return void l.convertToUnknownDocument(u.version);const f=cT(o.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(jA(o)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Eu(n,e,t,i){return n instanceof Fu?(function(l,u,f,m){if(!Id(l.precondition,u))return f;const p=l.value.clone(),v=dT(l.fieldTransforms,m,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Yr?(function(l,u,f,m){if(!Id(l.precondition,u))return f;const p=dT(l.fieldTransforms,m,u),v=u.data;return v.setAll(jA(l)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,u,f){return Id(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function uM(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=GA(i.transform,o||null);l!=null&&(t===null&&(t=kn.empty()),t.set(i.field,l))}return t||null}function uT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ja(i,o,((l,u)=>oM(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fu extends yf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Yr extends yf{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function jA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function cT(n,e,t){const i=new Map;nt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,f=e.data.field(l.field);i.set(l.field,rM(u,f,t[o]))}return i}function dT(n,e,t){const i=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);i.set(o.field,sM(l,u,e))}return i}class ng extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cM extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&lM(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Eu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Eu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=BA();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(o.key)?null:f;const m=KA(u,f);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,((t,i)=>uT(t,i)))&&ja(this.baseMutations,e.baseMutations,((t,i)=>uT(t,i)))}}class ig{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return Z1})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,i[u].version);return new ig(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ke;function mM(n){switch(n){case oe.OK:return we(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function QA(n){if(n===void 0)return Ds("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Bt.OK:return oe.OK;case Bt.CANCELLED:return oe.CANCELLED;case Bt.UNKNOWN:return oe.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return oe.INTERNAL;case Bt.UNAVAILABLE:return oe.UNAVAILABLE;case Bt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Bt.NOT_FOUND:return oe.NOT_FOUND;case Bt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Bt.ABORTED:return oe.ABORTED;case Bt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Bt.DATA_LOSS:return oe.DATA_LOSS;default:return we(39323,{code:n})}}(Ke=Bt||(Bt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new Dr([4294967295,4294967295],0);function fT(n){const e=pM().encode(n),t=new dA;return t.update(e),new Uint8Array(t.digest())}function hT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Dr([t,i],0),new Dr([o,l],0)]}class sg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new mu(`Invalid padding: ${t}`);if(i<0)throw new mu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Dr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Dr.fromNumber(i)));return o.compare(gM)===1&&(o=new Dr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=fT(e),[i,o]=hT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new sg(l,o,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=fT(e),[i,o]=hT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new _f(be.min(),o,new Ct(He),Ps(),Ye())}}class Bu{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Bu(i,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class $A{constructor(e,t){this.targetId=e,this.Ce=t}}class XA{constructor(e,t,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class mT{constructor(){this.ve=0,this.Fe=pT(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),i=Ye();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:l})}})),new Bu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=pT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ps(),this.Je=gd(),this.He=gd(),this.Ye=new Ct(He)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(lp(l))if(i===0){const u=new Ee(l.path);this.et(t,u,fn.newNoDocument(u,be.min()))}else nt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let u,f;try{u=Lr(i).toUint8Array()}catch(m){if(m instanceof AA)return Ka("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new sg(u,o,l)}catch(m){return Ka(m instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&lp(f.target)){const m=new Ee(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,fn.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=Ye();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const o=new _f(e,t,this.Ye,this.je,i);return this.je=Ps(),this.Je=gd(),this.He=gd(),this.Ye=new Ct(He),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Jt(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Jt(He),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gd(){return new Ct(Ee.comparator)}function pT(){return new Ct(Ee.comparator)}const _M={asc:"ASCENDING",desc:"DESCENDING"},vM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TM={and:"AND",or:"OR"};class EM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cp(n,e){return n.useProto3Json||df(e)?e:{value:e}}function Kd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SM(n,e){return Kd(n,e.toTimestamp())}function Wi(n){return nt(!!n,49232),be.fromTimestamp((function(t){const i=Ur(t);return new Tt(i.seconds,i.nanos)})(n))}function rg(n,e){return dp(n,e).canonicalString()}function dp(n,e){const t=(function(o){return new vt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ZA(n){const e=vt.fromString(n);return nt(sC(e),10190,{key:e.toString()}),e}function fp(n,e){return rg(n.databaseId,e.path)}function qm(n,e){const t=ZA(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(tC(t))}function eC(n,e){return rg(n.databaseId,e)}function AM(n){const e=ZA(n);return e.length===4?vt.emptyPath():tC(e)}function hp(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tC(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function gT(n,e,t){return{name:fp(n,e),fields:t.value.mapValue.fields}}function CM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:we(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(nt(v===void 0||typeof v=="string",58123),on.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),on.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(p){const v=p.code===void 0?oe.UNKNOWN:QA(p.code);return new ve(v,p.message||"")})(u);t=new XA(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=qm(n,i.document.name),l=Wi(i.document.updateTime),u=i.document.createTime?Wi(i.document.createTime):be.min(),f=new kn({mapValue:{fields:i.document.fields}}),m=fn.newFoundDocument(o,l,u,f),p=i.targetIds||[],v=i.removedTargetIds||[];t=new Rd(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=qm(n,i.document),l=i.readTime?Wi(i.readTime):be.min(),u=fn.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Rd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=qm(n,i.document),l=i.removedTargetIds||[];t=new Rd([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,u=new hM(o,l),f=i.targetId;t=new $A(f,u)}}return t}function xM(n,e){let t;if(e instanceof Fu)t={update:gT(n,e.key,e.value)};else if(e instanceof ng)t={delete:fp(n,e.key)};else if(e instanceof Yr)t={update:gT(n,e.key,e.data),updateMask:kM(e.fieldMask)};else{if(!(e instanceof cM))return we(16599,{Vt:e.type});t={verify:fp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof Yd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Mu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Du)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Jd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw we(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:SM(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function wM(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Wi(o.updateTime):Wi(l);return u.isEqual(be.min())&&(u=Wi(l)),new aM(u,o.transformResults||[])})(t,e)))):[]}function IM(n,e){return{documents:[eC(n,e.path)]}}function RM(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=eC(n,o);const l=(function(p){if(p.length!==0)return iC(ns.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((v=>(function(A){return{field:Va(A.field),direction:MM(A.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=cp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function bM(n){let e=AM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){nt(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=nC(E);return A instanceof ns&&PA(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((A=>(function(L){return new Hd(Ua(L.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let A;return A=typeof E=="object"?E.value:E,df(A)?null:A})(t.limit));let m=null;t.startAt&&(m=(function(E){const A=!!E.before,w=E.values||[];return new Gd(w,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const A=!E.before,w=E.values||[];return new Gd(w,A)})(t.endAt)),K1(e,o,u,l,f,"F",m,p)}function NM(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ua(t.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ua(t.unaryFilter.field);return Yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ua(t.unaryFilter.field);return Yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ua(t.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Yt.create(Ua(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ns.create(t.compositeFilter.filters.map((i=>nC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function MM(n){return _M[n]}function DM(n){return vM[n]}function PM(n){return TM[n]}function Va(n){return{fieldPath:n.canonicalString()}}function Ua(n){return rn.fromServerFormat(n.fieldPath)}function iC(n){return n instanceof Yt?(function(t){if(t.op==="=="){if(iT(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(nT(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iT(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(nT(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:DM(t.op),value:t.value}}})(n):n instanceof ns?(function(t){const i=t.getFilters().map((o=>iC(o)));return i.length===1?i[0]:{compositeFilter:{op:PM(t.op),filters:i}}})(n):we(54877,{filter:n})}function kM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t,i,o,l=be.min(),u=be.min(),f=on.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.yt=e}}function UM(n){const e=bM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?up(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.Cn=new OM}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Vr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class OM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Jt(vt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Jt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rC=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(rC,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xa(0)}static cr(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="LruGarbageCollector",qM=1048576;function vT([n,e],[t,i]){const o=He(n,t);return o===0?He(e,i):o}class FM{constructor(e){this.Ir=e,this.buffer=new Jt(vT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();vT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(_T,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sl(t)?pe(_T,"Ignoring IndexedDB error during garbage collection: ",t):await il(t)}await this.Vr(3e5)}))}}class zM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(cf.ce);const i=new FM(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(yT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,u,f,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(p=Date.now(),Pa()<=Ge.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function GM(n,e){return new zM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.changes=new qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Eu(i.mutation,o,Qn.empty(),Tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ye()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ye()){const o=wo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let u=hu();return l.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=wo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ye())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,o){let l=Ps();const u=Tu(),f=(function(){return Tu()})();return t.forEach(((m,p)=>{const v=i.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof Yr)?l=l.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Eu(v.mutation,p,v.mutation.getFieldMask(),Tt.now())):u.set(p.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>f.set(p,new YM(v,u.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Tu();let o=new Ct(((u,f)=>u-f)),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=i.get(m)||Qn.empty();v=f.applyToLocalView(p,v),i.set(m,v);const E=(o.get(f.batchId)||Ye()).add(m);o=o.insert(f.batchId,E)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,v=m.value,E=BA();v.forEach((A=>{if(!l.has(A)){const w=KA(t.get(A),i.get(A));w!==null&&E.set(A,w),l=l.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):j1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):se.resolve(wo());let f=Iu,m=l;return u.next((p=>se.forEach(p,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{m=m.insert(v,A)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,Ye()))).next((v=>({batchId:f,changes:FA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=hu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let u=hu();return this.indexManager.getCollectionParents(e,l).next((f=>se.forEach(f,(m=>{const p=(function(E,A){return new hf(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next((v=>{v.forEach(((E,A)=>{u=u.insert(E,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((u=>{l.forEach(((m,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,fn.newInvalidDocument(v)))}));let f=hu();return u.forEach(((m,p)=>{const v=l.get(m);v!==void 0&&Eu(v.mutation,p,Qn.empty(),Tt.now()),pf(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Wi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:UM(o.bundledQuery),readTime:Wi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.overlays=new Ct(Ee.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=wo();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=wo(),l=t.length+1,u=new Ee(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new Ct(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let v=l.get(p.largestBatchId);v===null&&(v=wo(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const f=wo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>f.set(p,v))),!(f.size()>=o)););return se.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new fM(t,i));let l=this.qr.get(t);l===void 0&&(l=Ye(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Qr=new Jt($t.$r),this.Ur=new Jt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new vt([])),i=new $t(t,e),o=new $t(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new vt([])),i=new $t(t,e),o=new $t(t,e+1);let l=Ye();return this.Ur.forEachInRange([i,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new $t(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Jt($t.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new dM(l,t,i,o);this.mutationQueue.push(u);for(const f of o)this.Zr=this.Zr.add(new $t(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Qp:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(u=>{const f=this.Xr(u.Yr);l.push(f)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Jt(He);return t.forEach((o=>{const l=new $t(o,0),u=new $t(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const u=new $t(new Ee(l),0);let f=new Jt(He);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(f=f.add(m.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const l=new $t(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new $t(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let i=Ps();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():fn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ps();const u=t.path,f=new Ee(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||x1(C1(v),i)<=0||(o.has(v.key)||pf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new WM(this)}getSize(e){return se.resolve(this.size)}}class WM extends HM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.persistence=e,this.si=new qo((t=>Wp(t)),Zp),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new og,this.targetCount=0,this.ai=Xa.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.ui={},this.overlays={},this.ci=new cf(0),this.li=!1,this.li=!0,this.hi=new QM,this.referenceDelegate=e(this),this.Pi=new ZM(this),this.indexManager=new LM,this.remoteDocumentCache=(function(o){return new XM(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new VM(t),this.Ii=new KM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new $M(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new eD(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class eD extends I1{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Ri=new og,this.Vi=null}static mi(e){return new ag(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class jd{constructor(e,t){this.persistence=e,this.pi=new qo((i=>N1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=GM(this,t)}static mi(e,t){return new jd(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,be.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xd(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ye(),o=Ye();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new lg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PI()?8:R1(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new tD;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Pa()<=Ge.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Pa()<=Ge.DEBUG&&pe("QueryEngine","Query:",ka(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Pa()<=Ge.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xi(t))):se.resolve())}ys(e,t){if(aT(t))return se.resolve(null);let i=Xi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=up(t,null,"F"),i=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Ye(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.Ds(t,f);return this.Cs(t,p,u,m.readTime)?this.ys(e,up(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,i,o){return aT(t)||o.isEqual(be.min())?se.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,o)?se.resolve(null):(Pa()<=Ge.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ka(t)),this.vs(e,u,t,A1(o,Iu)).next((f=>f)))}))}Ds(e,t){let i=new Jt(OA(e));return t.forEach(((o,l)=>{pf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Pa()<=Ge.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ka(t)),this.ps.getDocumentsMatchingQuery(e,t,Vr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="LocalStore",iD=3e8;class sD{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ct(He),this.xs=new qo((l=>Wp(l)),Zp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function rD(n,e,t,i){return new sD(n,e,t,i)}async function aC(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let m=Ye();for(const p of o){u.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){f.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:f})))}))}))}function oD(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,v){const E=p.batch,A=E.keys();let w=se.resolve();return A.forEach((L=>{w=w.next((()=>v.getEntry(m,L))).next((F=>{const B=p.docVersions.get(L);nt(B!==null,48541),F.version.compareTo(B)<0&&(E.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),v.addEntry(F)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=Ye();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function lC(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function aD(n,e){const t=Me(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let w=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(on.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),o=o.insert(E,w),(function(F,B,$){return F.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=iD?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(A,w,v)&&f.push(t.Pi.updateTargetData(l,w))}));let m=Ps(),p=Ye();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(lD(l,u,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!i.isEqual(be.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(v)}return se.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=o,l)))}function lD(n,e,t){let i=Ye(),o=Ye();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=Ps();return t.forEach(((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(be.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):pe(ug,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:o}}))}function uD(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function cD(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new Rr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function mp(n,e,t){const i=Me(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!sl(u))throw u;pe(ug,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function TT(n,e,t){const i=Me(n);let o=be.min(),l=Ye();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,v){const E=Me(m),A=E.xs.get(v);return A!==void 0?se.resolve(E.Ms.get(A)):E.Pi.getTargetData(p,v)})(i,u,Xi(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?l:Ye()))).next((f=>(dD(i,$1(e),f),{documents:f,Qs:l})))))}function dD(n,e,t){let i=n.Os.get(e)||be.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class ET{constructor(){this.activeTargetIds=nM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fD{constructor(){this.Mo=new ET,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ET,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="ConnectivityMonitor";class AT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(ST,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(ST,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function pp(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="RestConnection",mD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Bd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const u=pp(),f=this.zo(e,t.toUriEncodedString());pe(Fm,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,l);const{host:p}=new URL(f),v=Za(p);return this.Jo(e,f,m,i,v).then((E=>(pe(Fm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ka(Fm,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,o,l,u){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=mD[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class yD extends pD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const u=pp();return new Promise(((f,m)=>{const p=new fA;p.setWithCredentials(!0),p.listenOnce(hA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Cd.NO_ERROR:const E=p.getResponseJson();pe(ln,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Cd.TIMEOUT:pe(ln,`RPC '${e}' ${u} timed out`),m(new ve(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:const A=p.getStatus();if(pe(ln,`RPC '${e}' ${u} failed with status:`,A,"response text:",p.getResponseText()),A>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const L=w==null?void 0:w.error;if(L&&L.status&&L.message){const F=(function($){const X=$.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(X)>=0?X:oe.UNKNOWN})(L.status);m(new ve(F,L.message))}else m(new ve(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ve(oe.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{pe(ln,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);pe(ln,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=pp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=gA(),f=pA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");pe(ln,`Creating RPC '${e}' stream ${o}: ${v}`,m);const E=u.createWebChannel(v,m);this.I_(E);let A=!1,w=!1;const L=new gD({Yo:B=>{w?pe(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(A||(pe(ln,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),pe(ln,`RPC '${e}' stream ${o} sending:`,B),E.send(B))},Zo:()=>E.close()}),F=(B,$,X)=>{B.listen($,(W=>{try{X(W)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return F(E,fu.EventType.OPEN,(()=>{w||(pe(ln,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),F(E,fu.EventType.CLOSE,(()=>{w||(w=!0,pe(ln,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(E))})),F(E,fu.EventType.ERROR,(B=>{w||(w=!0,Ka(ln,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),L.a_(new ve(oe.UNAVAILABLE,"The operation could not be completed")))})),F(E,fu.EventType.MESSAGE,(B=>{var $;if(!w){const X=B.data[0];nt(!!X,16349);const W=X,ae=(W==null?void 0:W.error)||(($=W[0])==null?void 0:$.error);if(ae){pe(ln,`RPC '${e}' stream ${o} received error:`,ae);const de=ae.status;let ce=(function(R){const k=Bt[R];if(k!==void 0)return QA(k)})(de),D=ae.message;ce===void 0&&(ce=oe.INTERNAL,D="Unknown error status: "+de+" with message "+ae.message),w=!0,L.a_(new ve(ce,D)),E.close()}else pe(ln,`RPC '${e}' stream ${o} received:`,X),L.u_(X)}})),F(f,mA.STAT_EVENT,(B=>{B.stat===ip.PROXY?pe(ln,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===ip.NOPROXY&&pe(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n){return new EM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="PersistentStream";class cC{constructor(e,t,i,o,l,u,f,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ve(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(CT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(CT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _D extends cC{constructor(e,t,i,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return be.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Wi(u.readTime):be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=hp(this.serializer),t.addTarget=(function(l,u){let f;const m=u.target;if(f=lp(m)?{documents:IM(l,m)}:{query:RM(l,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=WA(l,u.resumeToken);const p=cp(l,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(be.min())>0){f.readTime=Kd(l,u.snapshotVersion.toTimestamp());const p=cp(l,u.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=NM(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=hp(this.serializer),t.removeTarget=e,this.q_(t)}}class vD extends cC{constructor(e,t,i,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=wM(e.writeResults,e.commitTime),i=Wi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=hp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>xM(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{}class ED extends TD{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,dp(t,i),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(oe.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,dp(t,i),o,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ve(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RemoteStore";class AD{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Fo(this)&&(pe(Uo,"Restarting streams for network reachability change."),await(async function(m){const p=Me(m);p.Ea.add(4),await zu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Tf(p)})(this))}))})),this.Ra=new SD(i,o)}}async function Tf(n){if(Fo(n))for(const e of n.da)await e(!0)}async function zu(n){for(const e of n.da)await e(!1)}function dC(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hg(t)?fg(t):rl(t).O_()&&dg(t,e))}function cg(n,e){const t=Me(n),i=rl(t);t.Ia.delete(e),i.O_()&&fC(t,e),t.Ia.size===0&&(i.O_()?i.L_():Fo(t)&&t.Ra.set("Unknown"))}function dg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rl(n).Y_(e)}function fC(n,e){n.Va.Ue(e),rl(n).Z_(e)}function fg(n){n.Va=new yM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),rl(n).start(),n.Ra.ua()}function hg(n){return Fo(n)&&!rl(n).x_()&&n.Ia.size>0}function Fo(n){return Me(n).Ea.size===0}function hC(n){n.Va=void 0}async function CD(n){n.Ra.set("Online")}async function xD(n){n.Ia.forEach(((e,t)=>{dg(n,e)}))}async function wD(n,e){hC(n),hg(n)?(n.Ra.ha(e),fg(n)):n.Ra.set("Unknown")}async function ID(n,e,t){if(n.Ra.set("Online"),e instanceof XA&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){pe(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qd(n,i)}else if(e instanceof Rd?n.Va.Ze(e):e instanceof $A?n.Va.st(e):n.Va.tt(e),!t.isEqual(be.min()))try{const i=await lC(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,p)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(on.EMPTY_BYTE_STRING,v.snapshotVersion)),fC(l,m);const E=new Rr(v.target,m,p,v.sequenceNumber);dg(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){pe(Uo,"Failed to raise snapshot:",i),await Qd(n,i)}}async function Qd(n,e,t){if(!sl(e))throw e;n.Ea.add(1),await zu(n),n.Ra.set("Offline"),t||(t=()=>lC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Uo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Tf(n)}))}function mC(n,e){return e().catch((t=>Qd(n,t,e)))}async function Ef(n){const e=Me(n),t=qr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qp;for(;RD(e);)try{const o=await uD(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,bD(e,o)}catch(o){await Qd(e,o)}pC(e)&&gC(e)}function RD(n){return Fo(n)&&n.Ta.length<10}function bD(n,e){n.Ta.push(e);const t=qr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function pC(n){return Fo(n)&&!qr(n).x_()&&n.Ta.length>0}function gC(n){qr(n).start()}async function ND(n){qr(n).ra()}async function MD(n){const e=qr(n);for(const t of n.Ta)e.ea(t.mutations)}async function DD(n,e,t){const i=n.Ta.shift(),o=ig.from(i,e,t);await mC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Ef(n)}async function PD(n,e){e&&qr(n).X_&&await(async function(i,o){if((function(u){return mM(u)&&u!==oe.ABORTED})(o.code)){const l=i.Ta.shift();qr(i).B_(),await mC(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Ef(i)}})(n,e),pC(n)&&gC(n)}async function xT(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),pe(Uo,"RemoteStore received new credentials");const i=Fo(t);t.Ea.add(3),await zu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Tf(t)}async function kD(n,e){const t=Me(n);e?(t.Ea.delete(2),await Tf(t)):e||(t.Ea.add(2),await zu(t),t.Ra.set("Unknown"))}function rl(n){return n.ma||(n.ma=(function(t,i,o){const l=Me(t);return l.sa(),new _D(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:CD.bind(null,n),t_:xD.bind(null,n),r_:wD.bind(null,n),H_:ID.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),hg(n)?fg(n):n.Ra.set("Unknown")):(await n.ma.stop(),hC(n))}))),n.ma}function qr(n){return n.fa||(n.fa=(function(t,i,o){const l=Me(t);return l.sa(),new vD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:ND.bind(null,n),r_:PD.bind(null,n),ta:MD.bind(null,n),na:DD.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ef(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Uo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const u=Date.now()+i,f=new mg(e,t,u,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(n,e){if(Ds("AsyncQueue",`${e}: ${n}`),sl(n))return new ve(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=hu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new za;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.ga=new Ct(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wa{constructor(e,t,i,o,l,u,f,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,o,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Wa(e,t,za.emptySet(t),u,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UD{constructor(){this.queries=IT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Me(t),l=o.queries;o.queries=IT(),l.forEach(((u,f)=>{for(const m of f.Sa)m.onError(i)}))})(this,new ve(oe.ABORTED,"Firestore shutting down"))}}function IT(){return new qo((n=>LA(n)),mf)}async function yC(n,e){const t=Me(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new VD,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const f=pg(u,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&gg(t)}async function _C(n,e){const t=Me(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function LD(n,e){const t=Me(n);let i=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(o)&&(i=!0);u.wa=o}}i&&gg(t)}function OD(n,e,t){const i=Me(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function gg(n){n.Ca.forEach((e=>{e.next()}))}var gp,RT;(RT=gp||(gp={})).Ma="default",RT.Cache="cache";class vC{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.key=e}}class EC{constructor(e){this.key=e}}class qD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=OA(e),this.tu=new za(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new wT,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),w=pf(this.query,E)?E:null,L=!!A&&this.mutatedKeys.has(A.key),F=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let B=!1;A&&w?A.data.isEqual(w.data)?L!==F&&(i.track({type:3,doc:w}),B=!0):this.su(A,w)||(i.track({type:2,doc:w}),B=!0,(m&&this.eu(w,m)>0||p&&this.eu(w,p)<0)&&(f=!0)):!A&&w?(i.track({type:0,doc:w}),B=!0):A&&!w&&(i.track({type:1,doc:A}),B=!0,(m||p)&&(f=!0)),B&&(w?(u=u.add(w),l=F?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(w,L){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:B})}};return F(w)-F(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new Wa(this.query,e.tu,l,u,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new EC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new TC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yg="SyncEngine";class FD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class BD{constructor(e){this.key=e,this.hu=!1}}class zD{constructor(e,t,i,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new qo((f=>LA(f)),mf),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ee.comparator),this.Au=new Map,this.Ru=new og,this.Vu={},this.mu=new Map,this.fu=Xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GD(n,e,t=!0){const i=IC(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await SC(i,e,t,!0),o}async function HD(n,e){const t=IC(n);await SC(t,e,!0,!1)}async function SC(n,e,t,i){const o=await cD(n.localStore,Xi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await YD(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&dC(n.remoteStore,o),f}async function YD(n,e,t,i,o){n.pu=(E,A,w)=>(async function(F,B,$,X){let W=B.view.ru($);W.Cs&&(W=await TT(F.localStore,B.query,!1).then((({documents:D})=>B.view.ru(D,W))));const ae=X&&X.targetChanges.get(B.targetId),de=X&&X.targetMismatches.get(B.targetId)!=null,ce=B.view.applyChanges(W,F.isPrimaryClient,ae,de);return NT(F,B.targetId,ce.au),ce.snapshot})(n,E,A,w);const l=await TT(n.localStore,e,!0),u=new qD(e,l.Qs),f=u.ru(l.documents),m=Bu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),p=u.applyChanges(f,n.isPrimaryClient,m);NT(n,t,p.au);const v=new FD(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function JD(n,e,t){const i=Me(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((u=>!mf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await mp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&cg(i.remoteStore,o.targetId),yp(i,o.targetId)})).catch(il)):(yp(i,o.targetId),await mp(i.localStore,o.targetId,!0))}async function KD(n,e){const t=Me(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),cg(t.remoteStore,i.targetId))}async function jD(n,e,t){const i=tP(n);try{const o=await(function(u,f){const m=Me(u),p=Tt.now(),v=f.reduce(((w,L)=>w.add(L.key)),Ye());let E,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let L=Ps(),F=Ye();return m.Ns.getEntries(w,v).next((B=>{L=B,L.forEach((($,X)=>{X.isValidDocument()||(F=F.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,L))).next((B=>{E=B;const $=[];for(const X of f){const W=uM(X,E.get(X.key).overlayedDocument);W!=null&&$.push(new Yr(X.key,W,NA(W.value.mapValue),bi.exists(!0)))}return m.mutationQueue.addMutationBatch(w,p,$,f)})).next((B=>{A=B;const $=B.applyToLocalDocumentSet(E,F);return m.documentOverlayCache.saveOverlays(w,B.batchId,$)}))})).then((()=>({batchId:A.batchId,changes:FA(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new Ct(He)),p=p.insert(f,m),u.Vu[u.currentUser.toKey()]=p})(i,o.batchId,t),await Gu(i,o.changes),await Ef(i.remoteStore)}catch(o){const l=pg(o,"Failed to persist write");t.reject(l)}}async function AC(n,e){const t=Me(n);try{const i=await aD(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Au.get(l);u&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?nt(u.hu,14607):o.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))})),await Gu(t,i,e)}catch(i){await il(i)}}function bT(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const m=Me(u);m.onlineState=f;let p=!1;m.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(f)&&(p=!0)})),p&&gg(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function QD(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let u=new Ct(Ee.comparator);u=u.insert(l,fn.newNoDocument(l,be.min()));const f=Ye().add(l),m=new _f(be.min(),new Map,new Ct(He),u,f);await AC(i,m),i.du=i.du.remove(l),i.Au.delete(e),_g(i)}else await mp(i.localStore,e,!1).then((()=>yp(i,e,t))).catch(il)}async function $D(n,e){const t=Me(n),i=e.batch.batchId;try{const o=await oD(t.localStore,e);xC(t,i,null),CC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Gu(t,o)}catch(o){await il(o)}}async function XD(n,e,t){const i=Me(n);try{const o=await(function(u,f){const m=Me(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,f).next((E=>(nt(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(i.localStore,e);xC(i,e,t),CC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Gu(i,o)}catch(o){await il(o)}}function CC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function xC(n,e,t){const i=Me(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function yp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||wC(n,i)}))}function wC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(cg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),_g(n))}function NT(n,e,t){for(const i of t)i instanceof TC?(n.Ru.addReference(i.key,e),WD(n,i)):i instanceof EC?(pe(yg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||wC(n,i.key)):we(19791,{wu:i})}function WD(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(pe(yg,"New document in limbo: "+t),n.Eu.add(i),_g(n))}function _g(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(vt.fromString(e)),i=n.fu.next();n.Au.set(i,new BD(t)),n.du=n.du.insert(t,i),dC(n.remoteStore,new Rr(Xi(eg(t.path)),i,"TargetPurposeLimboResolution",cf.ce))}}async function Gu(n,e,t){const i=Me(n),o=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{u.push(i.pu(m,e,t).then((p=>{var v;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){o.push(p);const E=lg.As(m.targetId,p);l.push(E)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(m,p){const v=Me(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(p,(A=>se.forEach(A.Es,(w=>v.persistence.referenceDelegate.addReference(E,A.targetId,w))).next((()=>se.forEach(A.ds,(w=>v.persistence.referenceDelegate.removeReference(E,A.targetId,w)))))))))}catch(E){if(!sl(E))throw E;pe(ug,"Failed to update sequence numbers: "+E)}for(const E of p){const A=E.targetId;if(!E.fromCache){const w=v.Ms.get(A),L=w.snapshotVersion,F=w.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(A,F)}}})(i.localStore,l))}async function ZD(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){pe(yg,"User change. New user:",e.toKey());const i=await aC(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new ve(oe.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Gu(t,i.Ls)}}function eP(n,e){const t=Me(n),i=t.Au.get(e);if(i&&i.hu)return Ye().add(i.key);{let o=Ye();const l=t.Iu.get(e);if(!l)return o;for(const u of l){const f=t.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function IC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QD.bind(null,e),e.Pu.H_=LD.bind(null,e.eventManager),e.Pu.yu=OD.bind(null,e.eventManager),e}function tP(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$D.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XD.bind(null,e),e}class $d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rD(this.persistence,new nD,e.initialUser,this.serializer)}Cu(e){return new oC(ag.mi,this.serializer)}Du(e){return new fD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$d.provider={build:()=>new $d};class nP extends $d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof jd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new oC((i=>jd.mi(i,t)),this.serializer)}}class _p{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZD.bind(null,this.syncEngine),await kD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UD})()}createDatastore(e){const t=vf(e.databaseInfo.databaseId),i=(function(l){return new yD(l)})(e.databaseInfo);return(function(l,u,f,m){return new ED(l,u,f,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,u,f){return new AD(i,o,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>bT(this.syncEngine,t,0)),(function(){return AT.v()?new AT:new hD})())}createSyncEngine(e,t){return(function(o,l,u,f,m,p,v){const E=new zD(o,l,u,f,m,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Me(o);pe(Uo,"RemoteStore shutting down."),l.Ea.add(5),await zu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}_p.provider={build:()=>new _p};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class iP{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{pe(Fr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(Fr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function zm(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Fr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await aC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function MT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await sP(n);pe(Fr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>xT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>xT(e.remoteStore,o))),n._onlineComponents=e}async function sP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Fr,"Using user provided OfflineComponentProvider");try{await zm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ka("Error using user provided cache. Falling back to memory cache: "+t),await zm(n,new $d)}}else pe(Fr,"Using default OfflineComponentProvider"),await zm(n,new nP(void 0));return n._offlineComponents}async function bC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Fr,"Using user provided OnlineComponentProvider"),await MT(n,n._uninitializedComponentsProvider._online)):(pe(Fr,"Using default OnlineComponentProvider"),await MT(n,new _p))),n._onlineComponents}function rP(n){return bC(n).then((e=>e.syncEngine))}async function vp(n){const e=await bC(n),t=e.eventManager;return t.onListen=GD.bind(null,e.syncEngine),t.onUnlisten=JD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KD.bind(null,e.syncEngine),t}function oP(n,e,t={}){const i=new Pr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,p){const v=new RC({next:A=>{v.Nu(),u.enqueueAndForget((()=>_C(l,E))),A.fromCache&&m.source==="server"?p.reject(new ve(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),E=new vC(f,v,{includeMetadataChanges:!0,qa:!0});return yC(l,E)})(await vp(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firestore.googleapis.com",PT=!0;class kT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MC,this.ssl=PT}else this.host=e.host,this.ssl=e.ssl??PT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qM)throw new ve(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new f1;switch(i.type){case"firstParty":return new g1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=DT.get(t);i&&(pe("ComponentProvider","Removing Datastore"),DT.delete(t),i.terminate())})(this),Promise.resolve()}}function aP(n,e,t,i={}){var p;n=Ri(n,Sf);const o=Za(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(ES(`https://${f}`),SS("Firestore",!0)),l.host!==MC&&l.host!==f&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:o,emulatorOptions:i};if(!Mo(m,u)&&(n._setSettings(m),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=cn.MOCK_USER;else{v=CI(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new ve(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new cn(A)}n._authCredentials=new h1(new _A(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hu(this.firestore,e,this._query)}}class Gt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(qu(t,Gt._jsonSchema))return new Gt(e,i||null,new Ee(vt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:zt("string",Gt._jsonSchemaVersion),referencePath:zt("string")};class kr extends Hu{constructor(e,t,i){super(e,t,eg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new Ee(e))}withConverter(e){return new kr(this.firestore,e,this._path)}}function lP(n,e,...t){if(n=Xt(n),vA("collection","path",e),n instanceof Sf){const i=vt.fromString(e,...t);return j0(i),new kr(n,null,i)}{if(!(n instanceof Gt||n instanceof kr))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vt.fromString(e,...t));return j0(i),new kr(n.firestore,null,i)}}function Io(n,e,...t){if(n=Xt(n),arguments.length===1&&(e=Kp.newId()),vA("doc","path",e),n instanceof Sf){const i=vt.fromString(e,...t);return K0(i),new Gt(n,null,new Ee(i))}{if(!(n instanceof Gt||n instanceof kr))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vt.fromString(e,...t));return K0(i),new Gt(n.firestore,n instanceof kr?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="AsyncQueue";class UT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uC(this,"async_queue_retry"),this._c=()=>{const i=Bm();i&&pe(VT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;pe(VT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",LT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=mg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:LT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function LT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Lo extends Sf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new UT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UT(e),this._firestoreClient=void 0,await e}}}function uP(n,e){const t=typeof n=="object"?n:wS(),i=typeof n=="string"?n:Bd,o=Lp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=SI("firestore");l&&aP(o,...l)}return o}function vg(n){if(n._terminated)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cP(n),n._firestoreClient}function cP(n){var i,o,l;const e=n._freezeSettings(),t=(function(f,m,p,v){return new P1(f,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,NC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new iP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(on.fromBase64String(e))}catch(t){throw new ve(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fi(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,fi._jsonSchema))return fi.fromBase64String(e.bytes)}}fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:zt("string",fi._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(e){if(qu(e,Zi._jsonSchema))return new Zi(e.latitude,e.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:zt("string",Zi._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new es(e.vectorValues);throw new ve(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:zt("string",es._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=/^__.*__$/;class fP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fu(e,this.data,t,this.fieldTransforms)}}class DC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class Eg{constructor(e,t,i,o,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Eg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PC(this.Ac)&&dP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||vf(e)}Cc(e,t,i,o=!1){return new Eg({Ac:e,methodName:t,Dc:i,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kC(n){const e=n._freezeSettings(),t=vf(n._databaseId);return new hP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mP(n,e,t,i,o,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Sg("Data must be an object, but it was:",u,i);const f=VC(i,u);let m,p;if(l.merge)m=new Qn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=Tp(e,E,t);if(!u.contains(A))throw new ve(oe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);LC(v,A)||v.push(A)}m=new Qn(v),p=u.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,p=u.fieldTransforms;return new fP(new kn(f),m,p)}class Cf extends Tg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cf}}function pP(n,e,t,i){const o=n.Cc(1,e,t);Sg("Data must be an object, but it was:",o,i);const l=[],u=kn.empty();Hr(i,((m,p)=>{const v=Ag(e,m,t);p=Xt(p);const E=o.yc(v);if(p instanceof Cf)l.push(v);else{const A=xf(p,E);A!=null&&(l.push(v),u.set(v,A))}}));const f=new Qn(l);return new DC(u,f,o.fieldTransforms)}function gP(n,e,t,i,o,l){const u=n.Cc(1,e,t),f=[Tp(e,i,t)],m=[o];if(l.length%2!=0)throw new ve(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)f.push(Tp(e,l[A])),m.push(l[A+1]);const p=[],v=kn.empty();for(let A=f.length-1;A>=0;--A)if(!LC(p,f[A])){const w=f[A];let L=m[A];L=Xt(L);const F=u.yc(w);if(L instanceof Cf)p.push(w);else{const B=xf(L,F);B!=null&&(p.push(w),v.set(w,B))}}const E=new Qn(p);return new DC(v,E,u.fieldTransforms)}function xf(n,e){if(UC(n=Xt(n)))return Sg("Unsupported field value:",e,n),VC(n,e);if(n instanceof Tg)return(function(i,o){if(!PC(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let u=0;for(const f of i){let m=xf(f,o.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=Xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iM(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Tt.fromDate(i);return{timestampValue:Kd(o.serializer,l)}}if(i instanceof Tt){const l=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kd(o.serializer,l)}}if(i instanceof Zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fi)return{bytesValue:WA(o.serializer,i._byteString)};if(i instanceof Gt){const l=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof es)return(function(u,f){return{mapValue:{fields:{[RA]:{stringValue:bA},[zd]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return tg(f.serializer,p)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${jp(i)}`)})(n,e)}function VC(n,e){const t={};return SA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(n,((i,o)=>{const l=xf(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function UC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof Zi||n instanceof fi||n instanceof Gt||n instanceof Tg||n instanceof es)}function Sg(n,e,t){if(!UC(t)||!TA(t)){const i=jp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Tp(n,e,t){if((e=Xt(e))instanceof Af)return e._internalPath;if(typeof e=="string")return Ag(n,e);throw Xd("Field path arguments must be of type string or ",n,!1,void 0,t)}const yP=new RegExp("[~\\*/\\[\\]]");function Ag(n,e,t){if(e.search(yP)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Af(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xd(n,e,t,i,o){const l=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new ve(oe.INVALID_ARGUMENT,f+n+m)}function LC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _P(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _P extends OC{data(){return super.data()}}function qC(n,e){return typeof e=="string"?Ag(n,e):e instanceof Af?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vP{convertValue(e,t="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Hr(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[zd].arrayValue)==null?void 0:o.values)==null?void 0:l.map((u=>Pt(u.doubleValue)));return new es(t)}convertGeoPoint(e){return new Zi(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ff(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=Ur(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=vt.fromString(e);nt(sC(i),9688,{name:e});const o=new bu(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return o.isEqual(t)||Ds(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bo extends OC{constructor(e,t,i,o,l,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(qC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",bo._jsonSchema={type:zt("string",bo._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class bd extends bo{data(e={}){return super.data(e)}}class No{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new pu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new bd(this._firestore,this._userDataWriter,i.key,i,new pu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const m=new bd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new pu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new bd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new pu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:EP(f.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:zt("string",No._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class Cg extends vP{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function SP(n){n=Ri(n,Hu);const e=Ri(n.firestore,Lo),t=vg(e),i=new Cg(e);return FC(n._query),oP(t,n._query).then((o=>new No(e,i,n,o)))}function Ep(n,e,t){n=Ri(n,Gt);const i=Ri(n.firestore,Lo),o=TP(n.converter,e,t);return xg(i,[mP(kC(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,bi.none())])}function Sp(n,e,t,...i){n=Ri(n,Gt);const o=Ri(n.firestore,Lo),l=kC(o);let u;return u=typeof(e=Xt(e))=="string"||e instanceof Af?gP(l,"updateDoc",n._key,e,t,i):pP(l,"updateDoc",n._key,e),xg(o,[u.toMutation(n._key,bi.exists(!0))])}function AP(n){return xg(Ri(n.firestore,Lo),[new ng(n._key,bi.none())])}function CP(n,...e){var m,p,v;n=Xt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||OT(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(OT(e[i])){const E=e[i];e[i]=(m=E.next)==null?void 0:m.bind(E),e[i+1]=(p=E.error)==null?void 0:p.bind(E),e[i+2]=(v=E.complete)==null?void 0:v.bind(E)}let l,u,f;if(n instanceof Gt)u=Ri(n.firestore,Lo),f=eg(n._key.path),l={next:E=>{e[i]&&e[i](xP(u,n,E))},error:e[i+1],complete:e[i+2]};else{const E=Ri(n,Hu);u=Ri(E.firestore,Lo),f=E._query;const A=new Cg(u);l={next:w=>{e[i]&&e[i](new No(u,A,E,w))},error:e[i+1],complete:e[i+2]},FC(n._query)}return(function(A,w,L,F){const B=new RC(F),$=new vC(w,B,L);return A.asyncQueue.enqueueAndForget((async()=>yC(await vp(A),$))),()=>{B.Nu(),A.asyncQueue.enqueueAndForget((async()=>_C(await vp(A),$)))}})(vg(u),f,o,l)}function xg(n,e){return(function(i,o){const l=new Pr;return i.asyncQueue.enqueueAndForget((async()=>jD(await rP(i),o,l))),l.promise})(vg(n),e)}function xP(n,e,t){const i=t.docs.get(e._key),o=new Cg(n);return new bo(n,o,e._key,i,new pu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){nl=o})(el),Ja(new Do("firestore",((i,{instanceIdentifier:o,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Lo(new m1(i.getProvider("auth-internal")),new y1(u,i.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ve(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(p.options.projectId,v)})(u,o),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Mr(G0,H0,e),Mr(G0,H0,"esm2020")})();const wP={apiKey:"AIzaSyDmqsdfWwUVK5koxlOnW_-k_TsMLGVCQ7o",authDomain:"inspiramais-6f73b.firebaseapp.com",projectId:"inspiramais-6f73b",storageBucket:"inspiramais-6f73b.firebasestorage.app",messagingSenderId:"747123918474",appId:"1:747123918474:web:bd55b098fd2f2c2ec0cf73",measurementId:"G-EBE8DRQ48E"},BC=xS(wP),_d=cA(BC),Ir=uP(BC),zC=ee.createContext(void 0),IP=({children:n})=>{const[e,t]=ee.useState(null),[i,o]=ee.useState(!0),[l,u]=ee.useState(null);ee.useEffect(()=>Zb(_d,w=>{t(w),o(!1)}),[]);const f=async A=>{u(null);try{await $b(_d,A.email,A.password)}catch(w){console.error("Login error:",w);let L="Falha ao entrar.";throw w.code==="auth/invalid-credential"&&(L="E-mail ou senha incorretos."),w.code==="auth/user-not-found"&&(L="Usurio no encontrado."),w.code==="auth/wrong-password"&&(L="Senha incorreta."),u(L),w}},m=async A=>{u(null);try{await ZS(_d,A.email,A.password)}catch(w){console.error("Signup error:",w);let L="Falha ao criar conta.";throw w.code==="auth/email-already-in-use"&&(L="Este e-mail j est em uso."),w.code==="auth/weak-password"&&(L="A senha  muito fraca."),u(L),w}},p=async()=>{try{await eN(_d)}catch(A){console.error("Error during logout:",A)}},v=!!e,E=(e==null?void 0:e.email)||null;return T.jsx(zC.Provider,{value:{currentUser:e,isAuthenticated:v,userEmail:E,login:f,signup:m,logout:p,isLoading:i,authError:l},children:n})},GC=()=>{const n=ee.useContext(zC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},HC=ee.createContext(void 0),YC=[{id:"read_quotes",title:"Leitor Voraz",description:"Leia 5 citaes",target:5,current:0,xpReward:50,completed:!1,icon:"auto_stories"},{id:"like_quote",title:"Curadoria",description:"Curta 1 citao",target:1,current:0,xpReward:30,completed:!1,icon:"favorite"},{id:"share_quote",title:"Mensageiro",description:"Compartilhe sabedoria",target:1,current:0,xpReward:100,completed:!1,icon:"ios_share"}],Gm={onboardingComplete:!1,isPremium:!1,subscriptionExpiry:"",source:"",age:"",name:"",gender:"",relationshipStatus:"",isReligious:"",beliefs:"",zodiac:"",feeling:"",feelingReason:"",improvementAreas:[],goals:"",appGoals:[],topics:[],stats:{xp:0,level:1,currentStreak:0,lastLoginDate:"",quests:YC,totalQuotesRead:0,totalLikes:0,totalShares:0}},RP=n=>Math.floor(1+Math.sqrt((n||0)/100)),bP=({children:n})=>{const{currentUser:e,isAuthenticated:t}=GC(),[i,o]=ee.useState(null),[l,u]=ee.useState(!0);ee.useEffect(()=>{if(!t||!e){o(null),u(!1);return}u(!0);const v=Io(Ir,"users",e.uid),E=CP(v,A=>{if(A.exists()){const w=A.data(),L=new Date().toISOString().split("T")[0];let F=!1,B={...w.stats};if(B.quests||(B={...Gm.stats,lastLoginDate:L},F=!0),B.lastLoginDate!==L){if(B.quests=YC.map(X=>({...X})),B.lastLoginDate){new Date(B.lastLoginDate);const X=new Date;X.setDate(X.getDate()-1);const W=X.toISOString().split("T")[0];B.lastLoginDate===W?B.currentStreak=(B.currentStreak||0)+1:B.currentStreak=1}else B.currentStreak=1;B.lastLoginDate=L,F=!0}let $=w.isPremium||!1;if($&&w.subscriptionExpiry){const X=new Date(w.subscriptionExpiry);new Date>X&&($=!1,F=!0)}F?Sp(v,{stats:B,isPremium:$}).catch(console.error):o({...w,isPremium:$})}else o(null);u(!1)},A=>{console.error("Firestore sync error:",A),u(!1)});return()=>E()},[e,t]);const f=async v=>{if(!e)return;const E=new Date().toISOString().split("T")[0],A={...Gm,...v,stats:{...Gm.stats,lastLoginDate:E,currentStreak:1}};try{await Ep(Io(Ir,"users",e.uid),A),o(A)}catch(w){console.error("Error initializing user in Firestore",w)}},m=ee.useCallback(async v=>{if(e){o(E=>E?{...E,...v}:null);try{const E=Io(Ir,"users",e.uid);await Ep(E,v,{merge:!0})}catch(E){console.error("Error updating user data:",E)}}},[e]),p=ee.useCallback(v=>{if(!i||!i.stats||!e)return null;const E=i.stats,A=E.quests?E.quests.map($=>({...$})):[],w={...E,quests:A,totalQuotesRead:E.totalQuotesRead||0,totalLikes:E.totalLikes||0,totalShares:E.totalShares||0};v==="read_quotes"&&(w.totalQuotesRead+=1),v==="like_quote"&&(w.totalLikes+=1),v==="share_quote"&&(w.totalShares+=1);let L=!1,F=w.level;const B=w.quests.findIndex($=>$.id===v);if(B!==-1){const $=w.quests[B];if(!$.completed&&($.current=($.current||0)+1,$.current>=$.target)){$.completed=!0,w.xp+=$.xpReward;const X=RP(w.xp);X>w.level&&(w.level=X,L=!0,F=X)}}return m({stats:w}),L?{leveledUp:!0,newLevel:F}:null},[i,e,m]);return T.jsx(HC.Provider,{value:{userData:i,setUserData:o,updateUserData:m,loading:l,completeQuest:p,initializeUser:f},children:n})},Vn=()=>{const n=ee.useContext(HC);if(n===void 0)throw new Error("useUserData must be used within a UserDataProvider");return n},qe=({iconName:n,className:e="",filled:t=!1,style:i,...o})=>{const l={...t?{fontVariationSettings:"'FILL' 1"}:{},width:"1em",height:"1em",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",...i};return T.jsx("span",{className:`material-symbols-outlined leading-none select-none ${e}`,style:l,...o,children:n})},NP=n=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",...n,children:[T.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),T.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),T.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),T.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),JC=n=>T.jsx(qe,{iconName:"lock",...n}),Wd=n=>T.jsx(qe,{iconName:"workspace_premium",filled:!0,...n}),MP=n=>T.jsx(qe,{iconName:"share",...n}),wf=n=>T.jsx(qe,{iconName:"account_circle",...n}),If=n=>T.jsx(qe,{iconName:"arrow_back_ios_new",...n}),E3=n=>T.jsx(qe,{iconName:"arrow_forward_ios",...n}),DP=n=>T.jsx(qe,{iconName:"keyboard_arrow_down",...n}),PP=n=>T.jsx(qe,{iconName:"credit_card",...n}),kP=n=>T.jsx(qe,{iconName:"settings",...n}),Zd=n=>T.jsx(qe,{iconName:"check",...n}),KC=n=>T.jsx(qe,{iconName:"check",filled:!0,...n}),S3=n=>T.jsx(qe,{iconName:"link",...n}),A3=n=>T.jsx(qe,{iconName:"content_copy",...n}),VP=n=>T.jsx(qe,{iconName:"format_quote",...n}),dn=n=>T.jsx(qe,{iconName:"check_circle",filled:!0,...n}),UP=n=>T.jsx(qe,{iconName:"filter_list",...n}),Ap=n=>T.jsx(qe,{iconName:"close",...n}),jC=n=>T.jsx(qe,{iconName:"warning",...n}),C3=n=>T.jsx(qe,{iconName:"trending_up",...n}),LP=n=>T.jsx(qe,{iconName:"wb_sunny",...n}),OP=n=>T.jsx(qe,{iconName:"emoji_events",...n}),qP=n=>T.jsx(qe,{iconName:"local_fire_department",filled:!0,...n}),Ro=n=>T.jsx(qe,{iconName:"auto_awesome",...n}),FP=n=>T.jsx(qe,{iconName:"cached",...n}),x3=n=>T.jsx(qe,{iconName:"lightbulb",filled:!0,...n}),w3=n=>T.jsx(qe,{iconName:"edit",...n}),BP=n=>T.jsx(qe,{iconName:"logout",...n}),zP=n=>T.jsx(qe,{iconName:"self_improvement",...n}),GP=n=>T.jsx(qe,{iconName:"psychology",...n}),I3=n=>T.jsx(qe,{iconName:"ads_click",...n}),R3=n=>T.jsx(qe,{iconName:"bolt",filled:!0,...n}),HP=n=>T.jsx(qe,{iconName:"star",filled:!0,...n}),YP=n=>T.jsx(qe,{iconName:"mail",...n}),JP=n=>T.jsx(qe,{iconName:"phone",...n}),b3=n=>T.jsx(qe,{iconName:"download",...n}),Cp=n=>T.jsx(qe,{iconName:"favorite",...n}),wg=n=>T.jsx(qe,{iconName:"arrow_forward",...n}),Tn=({children:n,title:e,subtitle:t,footer:i,showSkip:o,onSkip:l,showBack:u,onBack:f,progress:m})=>T.jsxs("div",{className:"w-full h-full flex flex-col text-center bg-gray-50 p-4 md:p-6",children:[T.jsxs("header",{className:"flex-shrink-0 w-full max-w-xl mx-auto",role:"banner",children:[T.jsxs("h2",{className:"text-2xl font-bold text-gray-800 text-center","aria-label":"Inspira mais",children:["Inspira",T.jsx("span",{className:"text-violet-500",children:"+"})]}),(u||o||m!==void 0)&&T.jsxs("div",{className:"flex justify-between items-center z-10 w-full mx-auto h-16 space-x-4 mt-2",role:"region","aria-label":"Barra de progresso e navegao",children:[T.jsx("div",{className:"w-14 flex-shrink-0",children:u&&T.jsx("button",{onClick:f,"aria-label":"Voltar",className:"w-12 h-12 rounded-full flex items-center justify-center text-gray-500 hover:text-gray-800 hover:bg-gray-200 transition-colors",children:T.jsx(If,{className:"text-3xl"})})}),T.jsx("div",{className:"flex-grow",children:m!==void 0&&T.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":m,"aria-valuemin":0,"aria-valuemax":100,children:T.jsx("div",{className:"h-2 bg-violet-500 rounded-full transition-all duration-500",style:{width:`${m}%`}})})}),T.jsx("div",{className:"w-14 flex-shrink-0 text-right",children:o&&T.jsx("button",{onClick:l,"aria-label":"Pular esta etapa",className:"text-gray-500 hover:text-gray-800 transition-colors font-semibold text-lg px-2",children:"Pular"})})]})]}),T.jsxs("main",{className:"w-full max-w-xl mx-auto flex flex-col px-1 pt-4 flex-grow overflow-y-auto scrollbar-hide",children:[T.jsxs("div",{className:"flex-shrink-0 mb-8 text-center",role:"region","aria-label":"Ttulo da etapa de onboarding",children:[T.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-gray-900",children:e}),t&&T.jsx("p",{className:"text-gray-600 text-lg",children:t})]}),T.jsx("div",{className:"w-full",children:n}),i&&T.jsx("footer",{className:"w-full flex-shrink-0 pt-6 pb-4",children:i})]})]}),Bo=({onClick:n,disabled:e=!1,text:t="Continuar",type:i="button"})=>T.jsx("div",{className:"w-full",children:T.jsx("button",{type:i,onClick:n,disabled:e,className:"w-full bg-violet-500 text-white font-bold py-4 px-4 rounded-full transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-violet-600 active:bg-violet-700 transform active:scale-95 shadow-lg shadow-violet-500/30 hover:shadow-violet-500/40",children:t})}),KP=({onNext:n,onQuickStart:e,progress:t})=>T.jsx(Tn,{title:"Bem-vinda ao seu momento dirio",subtitle:"Encontre inspirao para fortalecer sua autoestima, clarear sua mente e nutrir sua alma.",progress:t,footer:T.jsxs("div",{className:"w-full space-y-3 animate-slide-in-up",style:{animationDelay:"0.5s"},children:[T.jsx(Bo,{onClick:n,text:"Personalizar Jornada"}),T.jsx("button",{onClick:e,className:"w-full text-gray-700 font-bold py-4 px-4 rounded-full transition-all bg-white ring-1 ring-gray-300 hover:bg-gray-100 active:bg-gray-200 transform active:scale-95","aria-label":"Incio Rpido, sem personalizao",children:"Entrar Agora"})]}),children:T.jsx("div",{className:"flex-grow flex items-center justify-center w-full my-4",children:T.jsx("div",{className:"my-4 animate-slide-in-up",style:{animationDelay:"0.3s"},children:T.jsx("div",{className:"relative w-48 h-48 flex items-center justify-center",children:T.jsx("div",{className:"relative w-full h-full rounded-full bg-violet-100 flex items-center justify-center","aria-hidden":"true",children:T.jsx("div",{className:"relative text-violet-500 flex items-center justify-center","aria-hidden":"true",children:T.jsx(zP,{style:{fontSize:"11rem"}})})})})})})}),jP=["Autoamor & Autoestima","Maternidade Real","Empreendedorismo Feminino","Liderana Feminina","Sagrado Feminino","Ciclos Naturais","Ansiedade & Sade Mental","Relacionamentos Saudveis","Carreira & Propsito","Independncia Financeira","Espiritualidade","Gratido Diria","Superao & Fora","Corpo Positivo","Amizade & Sororidade","Criatividade","Intuio","Equilbrio Vida-Trabalho","Resilincia","Felicidade Plena"],QP=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState([]),{updateUserData:l}=Vn(),u=p=>{o(v=>v.includes(p)?v.filter(E=>E!==p):[...v,p])},f=()=>{i.length>0&&(l({topics:i}),n())},m=()=>{n()};return T.jsx(Tn,{title:"O que toca seu corao hoje?",subtitle:"Selecione temas para guiarmos sua inspirao.",showSkip:!0,onSkip:m,showBack:!0,onBack:e,progress:t,footer:T.jsx(Bo,{onClick:f,disabled:i.length<3,text:"Concluir Personalizao"}),children:T.jsx("div",{role:"group","aria-label":"Tpicos de interesse",className:"flex flex-wrap gap-3 justify-center",children:jP.map(p=>T.jsx("button",{onClick:()=>u(p),className:`px-4 py-2 rounded-full transition-all duration-300 border-2 font-semibold text-base ${i.includes(p)?"bg-violet-500 border-violet-500 text-white":"bg-white border-gray-200 hover:border-violet-500 text-gray-800"}`,role:"checkbox","aria-checked":i.includes(p),children:p},p))})})},$P=["TikTok","Instagram","Facebook","Busca on-line","Amiga/Famlia","Outro"],XP=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(null),{updateUserData:l}=Vn(),u=f=>{o(f),l({source:f}),setTimeout(()=>{n()},300)};return T.jsx(Tn,{title:"Como voc conheceu o Inspira+?",showBack:!0,onBack:e,progress:t,children:T.jsx("div",{role:"radiogroup","aria-label":"Opes de como conheceu o Inspira+",className:"space-y-3 w-full",children:$P.map(f=>T.jsxs("button",{onClick:()=>u(f),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i===f?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"radio","aria-checked":i===f,children:[T.jsx("span",{children:f}),i===f&&T.jsx(dn,{className:"text-2xl text-white","aria-hidden":"true"})]},f))})})},WP=["13 a 17","18 a 24","25 a 34","35 a 44","45 a 54","55+"],ZP=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(null),{updateUserData:l}=Vn(),u=f=>{o(f),l({age:f}),setTimeout(()=>{n()},300)};return T.jsx(Tn,{title:"Qual  sua idade?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,children:T.jsx("div",{role:"radiogroup","aria-label":"Opes de idade",className:"space-y-3 w-full",children:WP.map(f=>T.jsxs("button",{onClick:()=>u(f),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i===f?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"radio","aria-checked":i===f,children:[T.jsx("span",{children:f}),i===f&&T.jsx(dn,{className:"text-2xl text-white","aria-hidden":"true"})]},f))})})},e2=["Em um relacionamento feliz","Em um relacionamento desafiador","Solteira feliz","Solteira  procura","No interessada nesse tpico"],t2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(null),{updateUserData:l}=Vn(),u=f=>{o(f),l({relationshipStatus:f}),setTimeout(()=>{n()},300)};return T.jsx(Tn,{title:"Como voc descreveria o seu relacionamento?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,children:T.jsx("div",{role:"radiogroup","aria-label":"Opes de status de relacionamento",className:"space-y-3 w-full",children:e2.map(f=>T.jsxs("button",{onClick:()=>u(f),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i===f?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"radio","aria-checked":i===f,children:[T.jsx("span",{children:f}),i===f&&T.jsx(dn,{className:"text-2xl text-white","aria-hidden":"true"})]},f))})})},n2=["Sim","No","Espiritual, mas no religiosa"],i2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(null),l=u=>{o(u),setTimeout(()=>{n(u)},300)};return T.jsx(Tn,{title:"Voc  religiosa?",showSkip:!0,onSkip:()=>n("Pular"),showBack:!0,onBack:e,progress:t,children:T.jsx("div",{role:"radiogroup","aria-label":"Opes de crena religiosa",className:"space-y-3 w-full",children:n2.map(u=>T.jsxs("button",{onClick:()=>l(u),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i===u?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"radio","aria-checked":i===u,children:[T.jsx("span",{children:u}),i===u&&T.jsx(dn,{className:"text-2xl text-white","aria-hidden":"true"})]},u))})})},s2=["Cristianismo","Judasmo","Islamismo","Hindusmo","Budismo","Outro"],r2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(null),{updateUserData:l}=Vn(),u=f=>{o(f),l({beliefs:f}),setTimeout(()=>{n()},300)};return T.jsx(Tn,{title:"Qual descreve melhor suas crenas?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,children:T.jsx("div",{role:"radiogroup","aria-label":"Opes de crena espiritual",className:"space-y-3 w-full",children:s2.map(f=>T.jsxs("button",{onClick:()=>u(f),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i===f?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"radio","aria-checked":i===f,children:[T.jsx("span",{children:f}),i===f&&T.jsx(dn,{className:"text-2xl text-white","aria-hidden":"true"})]},f))})})},o2=["ries","Touro","Gmeos","Cncer","Leo","Virgem","Libra","Escorpio","Sagitrio","Capricrnio","Aqurio","Peixes"],a2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(null),{updateUserData:l}=Vn(),u=f=>{o(f),l({zodiac:f}),setTimeout(()=>{n()},300)};return T.jsx(Tn,{title:"Qual  o seu signo do zodaco?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,children:T.jsx("div",{role:"radiogroup","aria-label":"Opes de signo do zodaco",className:"grid grid-cols-2 sm:grid-cols-3 gap-3 w-full",children:o2.map(f=>T.jsx("button",{onClick:()=>u(f),className:`p-4 rounded-xl text-center transition-all duration-200 flex items-center justify-center font-medium text-lg border-2 relative ${i===f?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"radio","aria-checked":i===f,children:T.jsx("span",{children:f})},f))})})},l2=["Sndrome da Impostora","Sobrecarga Mental","Aceitao do Corpo","Relacionamentos Txicos","Culpa Materna","Falta de Tempo para Mim"],u2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState([]),{updateUserData:l}=Vn(),u=m=>{o(p=>p.includes(m)?p.filter(v=>v!==m):[...p,m])},f=()=>{i.length>0&&(l({improvementAreas:i}),n())};return T.jsx(Tn,{title:"O que voc quer superar?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,footer:T.jsx(Bo,{onClick:f,disabled:i.length===0,text:"Continuar"}),children:T.jsx("div",{role:"group","aria-label":"reas para melhorar",className:"space-y-3 w-full",children:l2.map(m=>T.jsxs("button",{onClick:()=>u(m),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i.includes(m)?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"checkbox","aria-checked":i.includes(m),children:[T.jsx("span",{children:m}),i.includes(m)&&T.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center",children:T.jsx(KC,{className:"text-violet-500 text-2xl"})})]},m))})})},c2=["Resgatar minha autoestima","Equilibrar maternidade e carreira","Ter independncia emocional","Diminuir a carga mental e ansiedade","Me sentir mais empoderada","Desenvolver amor prprio","Conectar com minha intuio"],d2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState([]),{updateUserData:l}=Vn(),u=m=>{o(p=>p.includes(m)?p.filter(v=>v!==m):[...p,m])},f=()=>{i.length>0&&(l({appGoals:i}),n())};return T.jsx(Tn,{title:"O que voc busca aqui, mulher?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,footer:T.jsx(Bo,{onClick:f,disabled:i.length===0,text:"Continuar"}),children:T.jsx("div",{role:"group","aria-label":"Objetivos com o aplicativo",className:"space-y-3 w-full",children:c2.map(m=>T.jsxs("button",{onClick:()=>u(m),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i.includes(m)?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"checkbox","aria-checked":i.includes(m),children:[T.jsx("span",{className:"pr-4",children:m}),i.includes(m)&&T.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center flex-shrink-0",children:T.jsx(KC,{className:"text-violet-500 text-2xl"})})]},m))})})},f2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(""),{updateUserData:l}=Vn(),u=()=>{l({goals:i}),n()};return T.jsx(Tn,{title:"Quais so seus objetivos no momento?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,footer:T.jsx(Bo,{onClick:u,text:"Continuar"}),children:T.jsxs("div",{className:"w-full",children:[T.jsx("textarea",{value:i,onChange:f=>o(f.target.value),placeholder:"Compartilhe as suas ideias aqui",maxLength:250,className:"w-full h-36 p-4 bg-white rounded-2xl text-gray-800 text-base outline-none transition-colors resize-none border-2 border-gray-200 focus:border-violet-500 focus:ring-1 focus:ring-violet-500 placeholder-gray-400","aria-label":"Campo para descrever seus objetivos"}),T.jsxs("p",{className:"text-right text-sm text-gray-500 mt-2",children:[i.length,"/250"]})]})})},h2=({onNext:n,onBack:e,progress:t})=>T.jsx(Tn,{title:"Responda a algumas perguntas para ter contedo personalizado",progress:t,showBack:!0,onBack:e,footer:T.jsx(Bo,{onClick:n,text:"Continuar"}),children:T.jsx("div",{className:"flex-grow flex items-center justify-center my-12",children:T.jsx("div",{className:"text-violet-400 flex items-center justify-center",children:T.jsx(GP,{style:{fontSize:"15rem"}})})})}),m2=["Excelente","Bem","Normal","Mal","Terrvel"],p2=({onNext:n,onBack:e,progress:t})=>{const{userData:i,updateUserData:o}=Vn(),[l,u]=ee.useState(null),f=m=>{u(m),o({feeling:m}),setTimeout(()=>{n()},300)};return T.jsx(Tn,{title:`Como voc tem se sentido ultimamente, ${(i==null?void 0:i.name)||"voc"}?`,showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,children:T.jsx("div",{className:"space-y-3 w-full",children:m2.map(m=>T.jsxs("button",{onClick:()=>f(m),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${l===m?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,children:[T.jsx("span",{children:m}),l===m&&T.jsx(dn,{className:"text-2xl text-white"})]},m))})})},g2=["Famlia","Amigos","Trabalho","Sade","Relao","Dvida","Outro"],y2=({onNext:n,onBack:e,progress:t})=>{const[i,o]=ee.useState(null),{updateUserData:l}=Vn(),u=f=>{o(f),l({feelingReason:f}),setTimeout(()=>{n()},300)};return T.jsx(Tn,{title:"O que est fazendo voc se sentir assim?",showSkip:!0,onSkip:n,showBack:!0,onBack:e,progress:t,children:T.jsx("div",{className:"space-y-3 w-full",children:g2.map(f=>T.jsxs("button",{onClick:()=>u(f),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${i===f?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,children:[T.jsx("span",{children:f}),i===f&&T.jsx(dn,{className:"text-2xl text-white"})]},f))})})},_2=[{question:"Tenho alguma garantia?",answer:"Sim! Voc tem 7 dias de garantia incondicional. Se no sentir que o Inspira+ est transformando seus dias, basta solicitar o reembolso diretamente na plataforma de pagamento ou via suporte. Sem perguntas."},{question:" seguro colocar meu carto?",answer:"Totalmente. O pagamento  processado por uma das maiores plataformas de produtos digitais do mundo (como Hotmart/Kiwify), que utiliza criptografia de ponta e segurana bancria. Ns no temos acesso aos seus dados financeiros."},{question:"Vou ter tempo de usar o app?",answer:"Com certeza. O Inspira+ foi criado justamente para mulheres ocupadas. O mtodo funciona com micro-doses de 30 segundos por dia."},{question:"Como funciona o cancelamento?",answer:"Voc tem total controle. Voc pode gerenciar sua renovao diretamente pelo link recebido no seu e-mail de compra ou falando com nosso suporte humanizado."},{question:"O contedo  atualizado?",answer:"Sim, diariamente! Nossa inteligncia artificial gera reflexes nicas baseadas no seu momento atual, e nossa curadoria humana adiciona novos temas toda semana. Voc nunca ficar sem inspirao nova."},{question:"E se eu precisar de ajuda?",answer:"Voc nunca estar sozinha. Nosso suporte  100% humanizado, feito por pessoas reais prontas para te ouvir e resolver qualquer dvida com carinho e agilidade."}],un=({children:n,delay:e="0s"})=>{const[t,i]=ee.useState(!1),o=ee.useRef(null);return ee.useEffect(()=>{const l=new IntersectionObserver(([u])=>{u.isIntersecting&&(i(!0),l.unobserve(u.target))},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return o.current&&l.observe(o.current),()=>{o.current&&l.disconnect()}},[]),T.jsx("div",{ref:o,className:`transition-all duration-1000 ease-out transform ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,style:{transitionDelay:e},children:n})},Hm=({text:n,author:e,label:t})=>T.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 p-6 md:p-8 rounded-3xl relative hover:bg-white/10 transition-colors duration-300 flex flex-col h-full justify-between",children:[T.jsxs("div",{children:[T.jsx("div",{className:"flex gap-1 mb-4",children:[1,2,3,4,5].map(i=>T.jsx(HP,{className:"text-amber-400 text-xs md:text-sm",filled:!0},i))}),T.jsxs("p",{className:"text-gray-200 mb-6 leading-relaxed text-base md:text-lg font-light font-serif",children:['"',n,'"']})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center font-bold text-white shadow-lg text-lg font-sans",children:e.charAt(0)}),T.jsxs("div",{children:[T.jsx("p",{className:"text-white font-bold text-sm md:text-base font-sans",children:e}),T.jsx("p",{className:"text-xs text-violet-300 font-medium uppercase tracking-wider font-sans",children:t})]})]})]}),v2=({onGetStarted:n,onLoginClick:e,onShowTerms:t,onShowPrivacy:i})=>{const[o,l]=ee.useState(null),u=f=>{l(o===f?null:f)};return T.jsxs("div",{className:"w-full h-full overflow-y-auto bg-[#050505] text-gray-100 font-sans selection:bg-violet-500/30 selection:text-white scrollbar-hide relative",children:[T.jsx("div",{className:"fixed inset-0 bg-noise opacity-[0.03] pointer-events-none z-50"}),T.jsxs("nav",{className:"fixed top-0 w-full z-40 px-4 md:px-6 py-4 flex justify-between items-center bg-[#050505]/80 backdrop-blur-xl border-b border-white/5 transition-all duration-300",children:[T.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[T.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-600 flex items-center justify-center text-white shadow-[0_0_15px_rgba(124,58,237,0.5)] group-hover:scale-110 transition-transform",children:T.jsx(Ro,{className:"text-lg"})}),T.jsxs("span",{className:"text-xl font-bold font-sans tracking-tight text-white",children:["Inspira",T.jsx("span",{className:"text-violet-500",children:"+"})]})]}),T.jsx("button",{onClick:e,className:"px-5 py-2 rounded-full bg-white text-black text-sm font-bold font-sans hover:bg-gray-200 hover:scale-105 active:scale-95 transition-all shadow-lg",children:"Entrar"})]}),T.jsxs("header",{className:"relative min-h-[90vh] flex flex-col justify-center items-center px-6 pt-32 pb-28 overflow-hidden",children:[T.jsx("div",{className:"absolute top-[20%] left-[-10%] w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-violet-800/20 rounded-full blur-[100px] pointer-events-none animate-pulse-slow"}),T.jsx("div",{className:"absolute bottom-[10%] right-[-10%] w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-fuchsia-800/10 rounded-full blur-[100px] pointer-events-none"}),T.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto text-center space-y-8 md:space-y-10",children:[T.jsx(un,{children:T.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-violet-500/30 bg-violet-500/10 text-violet-300 text-[10px] md:text-[11px] font-bold tracking-[0.2em] uppercase mb-4 backdrop-blur-md shadow-[0_0_20px_rgba(139,92,246,0.15)] font-sans",children:[T.jsx(Ro,{className:"text-sm"})," Mtodo Comprovado"]})}),T.jsx(un,{delay:"100ms",children:T.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-sans font-extrabold text-white leading-[1.1] tracking-tight drop-shadow-2xl",children:["Acorda com peso no peito pensando: ",T.jsx("br",{}),T.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-violet-400 via-fuchsia-300 to-white pr-2",children:'"Mais um dia igual"?'})]})}),T.jsx(un,{delay:"200ms",children:T.jsxs("p",{className:"text-base md:text-xl text-gray-400 font-light leading-relaxed max-w-2xl mx-auto font-sans px-4",children:["Receba doses dirias, curtas e 100% brasileiras de motivao. ",T.jsx("br",{className:"hidden md:block"}),T.jsx("span",{className:"text-white font-medium",children:"Sem clichs. Sem presso. S voc."})]})}),T.jsx(un,{delay:"300ms",children:T.jsxs("div",{className:"flex flex-col items-center pt-8",children:[T.jsxs("button",{onClick:n,className:"group relative w-full sm:w-auto px-8 md:px-12 py-4 md:py-5 bg-white text-black rounded-full font-bold font-sans text-lg shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(255,255,255,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-3 overflow-hidden",children:[T.jsx("span",{className:"relative z-10",children:"Comear sequncia de 30 dias"}),T.jsx(wg,{className:"relative z-10 text-xl group-hover:translate-x-1 transition-transform"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-100 to-white opacity-0 group-hover:opacity-100 transition-opacity"})]}),T.jsxs("p",{className:"text-[10px] md:text-xs text-gray-500 mt-6 flex items-center gap-2 uppercase tracking-wider font-semibold font-sans",children:[T.jsx(dn,{className:"text-violet-500"})," Teste Gratuito Disponvel"]})]})})]}),T.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 animate-bounce opacity-30",children:T.jsx("div",{className:"w-5 h-8 border-2 border-white rounded-full flex justify-center pt-2",children:T.jsx("div",{className:"w-1 h-2 bg-white rounded-full"})})})]}),T.jsx("section",{className:"py-24 md:py-32 px-6 bg-gradient-to-b from-[#050505] to-[#0a0a0a]",children:T.jsxs("div",{className:"max-w-6xl mx-auto",children:[T.jsx(un,{children:T.jsxs("div",{className:"text-center mb-16 md:mb-20",children:[T.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-white mb-4",children:"Parece familiar?"}),T.jsx("p",{className:"text-gray-500 text-lg font-sans",children:"Voc no  a nica que se sente assim."})]})}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[T.jsx(un,{delay:"100ms",children:T.jsx("div",{className:"space-y-4 font-sans",children:[{icon:"",text:"Vive no piloto automtico, s pagando boleto."},{icon:"",text:"Sente uma mistura de ansiedade, culpa e vazio."},{icon:"",text:"Se sente 'fraca' por no manter hbitos."},{icon:"",text:"Compara sua vida com a perfeio das redes."},{icon:"",text:"Medo de se arrepender de no ter tentado mais."}].map((f,m)=>T.jsxs("div",{className:"flex gap-5 items-center bg-[#111] p-5 rounded-2xl border border-white/5 hover:border-red-500/20 hover:bg-[#151111] transition-colors group",children:[T.jsx("span",{className:"text-2xl grayscale group-hover:grayscale-0 transition-all opacity-70 group-hover:opacity-100",children:f.icon}),T.jsx("p",{className:"text-gray-300 font-medium text-sm md:text-base",children:f.text})]},m))})}),T.jsx(un,{delay:"300ms",children:T.jsxs("div",{className:"relative mt-8 md:mt-0",children:[T.jsx("div",{className:"absolute inset-0 bg-violet-600/20 blur-[60px] rounded-full pointer-events-none"}),T.jsxs("div",{className:"relative bg-[#111]/80 backdrop-blur-xl p-8 md:p-10 rounded-[2.5rem] border border-white/10 shadow-2xl",children:[T.jsx(VP,{className:"text-violet-500 text-5xl mb-6 opacity-50"}),T.jsx("h3",{className:"text-xl md:text-2xl text-white font-serif leading-relaxed mb-8",children:"Eu no consigo ser consistente. Todo mundo consegue, menos eu. J tentei de tudo e sempre desisto."}),T.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[T.jsx("div",{className:"h-px bg-white/20 w-12"}),T.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider font-bold font-sans",children:"A voz na sua cabea"})]}),T.jsxs("div",{className:"bg-violet-500/10 rounded-2xl p-6 border border-violet-500/20",children:[T.jsxs("p",{className:"text-violet-300 font-bold mb-2 flex items-center gap-2 text-sm font-sans",children:[T.jsx(Ro,{})," A verdade libertadora:"]}),T.jsx("p",{className:"text-gray-300 leading-relaxed text-sm md:text-base font-sans",children:"Voc no precisa virar outra pessoa. Voc s precisa de um passo minsculo, mas real."})]})]})]})})]})]})}),T.jsxs("section",{className:"py-24 md:py-32 px-6 relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-violet-500/50 to-transparent"}),T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-[0.03]"}),T.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[T.jsx("div",{className:"text-center mb-24 max-w-4xl mx-auto",children:T.jsxs(un,{children:[T.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-amber-500/10 rounded-full flex items-center justify-center mx-auto mb-8 border border-amber-500/20 shadow-[0_0_30px_rgba(245,158,11,0.2)]",children:T.jsx(Wd,{className:"text-3xl md:text-4xl text-amber-500"})}),T.jsxs("h2",{className:"text-2xl md:text-4xl lg:text-5xl font-serif text-white mb-8 leading-tight",children:["Em ",T.jsx("span",{className:"text-amber-400",children:"3060 dias"})," voc vai olhar pra trs e se orgulhar da mulher que est voltando a ser."]})]})}),T.jsx("div",{className:"grid md:grid-cols-3 gap-6 md:gap-8",children:[{title:"Personalizao Real",desc:"Para sua situao atual: 'me que voltou da licena', 'ansiedade no trabalho', ou 'recm-separada'.",icon:T.jsx(wf,{className:"text-3xl text-white"}),color:"from-violet-600 to-indigo-600"},{title:"Sem Presso",desc:"Sem texto. Sem teorias complexas. Uma dose diria que te d um passo to pequeno que  impossvel desistir.",icon:T.jsx(Cp,{className:"text-3xl text-white",filled:!0}),color:"from-pink-600 to-rose-600"},{title:"Gente como a gente",desc:"Contedo criado por mulheres reais que j passaram exatamente pelo que voc est passando hoje.",icon:T.jsx(dn,{className:"text-3xl text-white"}),color:"from-emerald-600 to-teal-600"}].map((f,m)=>T.jsx(un,{delay:`${m*150}ms`,children:T.jsxs("div",{className:"group bg-[#151515] p-8 md:p-10 rounded-[2.5rem] border border-white/5 hover:border-white/20 transition-all duration-500 hover:-translate-y-2 h-full relative overflow-hidden font-sans",children:[T.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${f.color} blur-[60px] opacity-20 group-hover:opacity-40 transition-opacity`}),T.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${f.color} flex items-center justify-center shadow-lg mb-8 group-hover:scale-110 transition-transform`,children:f.icon}),T.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-4 font-sans",children:f.title}),T.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base font-sans",children:f.desc})]})},m))})]})]}),T.jsx("section",{className:"py-24 md:py-32 px-6 bg-[#080808]",children:T.jsxs("div",{className:"max-w-6xl mx-auto",children:[T.jsx(un,{children:T.jsxs("div",{className:"flex flex-col items-center text-center mb-16 md:mb-20",children:[T.jsxs("div",{className:"flex -space-x-4 mb-8",children:[[1,2,3,4].map(f=>T.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-[#080808] bg-gray-800 overflow-hidden relative",children:T.jsx("img",{src:`https://randomuser.me/api/portraits/women/${f+40}.jpg`,alt:"User",className:"w-full h-full object-cover"})},f)),T.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-[#080808] bg-gradient-to-br from-violet-600 to-fuchsia-600 flex items-center justify-center text-white text-sm font-bold shadow-lg z-10 font-sans",children:"+38k"})]}),T.jsx("h2",{className:"text-3xl md:text-5xl font-serif text-white mb-4",children:"Mais de 38 mil mulheres"}),T.jsx("p",{className:"text-gray-400 text-lg font-sans",children:"J mantiveram o streak por mais de 45 dias."})]})}),T.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[T.jsx(un,{delay:"0ms",children:T.jsx(Hm,{text:"Eu mantive 87 dias seguidos, nunca consegui isso na vida. A mensagem de hoje parecia que tinha sido escrita pra mim.",author:"Ana Clara",label:"87 dias seguidos"})}),T.jsx(un,{delay:"200ms",children:T.jsx(Hm,{text:"Hoje faz 21 dias e eu chorei de orgulho. No  sobre a frase,  sobre lembrar quem eu sou todo santo dia.",author:"Fernanda S.",label:"21 dias seguidos"})}),T.jsx(un,{delay:"400ms",children:T.jsx(Hm,{text:"Comecei achando que era s mais um app. Hoje  meu ritual sagrado antes de levantar da cama. Mudou meu humor matinal.",author:"Juliana M.",label:"4 meses de uso"})})]})]})}),T.jsxs("section",{className:"py-24 md:py-32 px-6 relative overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#080808] to-amber-950/20 pointer-events-none"}),T.jsx("div",{className:"max-w-5xl mx-auto relative z-10",children:T.jsxs(un,{children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsxs("h2",{className:"text-3xl md:text-4xl font-serif text-white mb-4",children:["Invista em voc",T.jsx("br",{})]}),T.jsx("p",{className:"text-gray-400 font-sans",children:"Menos que um caf na padaria."})]}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto items-center",children:[T.jsxs("div",{className:"order-2 md:order-1 bg-[#111] border border-white/5 rounded-[2rem] p-8 md:p-10 transition-all duration-300 opacity-90 hover:opacity-100 hover:scale-[1.02]",children:[T.jsx("h3",{className:"text-xl font-bold text-gray-200 mb-2 font-serif",children:"Plano Mensal"}),T.jsxs("div",{className:"flex items-baseline gap-1 leading-none text-white mb-6",children:[T.jsx("span",{className:"text-sm text-gray-400 font-medium self-start mt-2",children:"R$"}),T.jsx("span",{className:"text-4xl font-bold font-sans",children:"14,90"}),T.jsx("span",{className:"text-sm text-gray-400 font-medium self-end mb-1",children:"/ms"})]}),T.jsxs("ul",{className:"space-y-3 mb-8 text-gray-400 text-sm",children:[T.jsxs("li",{className:"flex gap-2",children:[T.jsx(dn,{className:"text-gray-500"})," Sem Anncios"]}),T.jsxs("li",{className:"flex gap-2",children:[T.jsx(dn,{className:"text-gray-500"})," Acesso Ilimitado"]}),T.jsxs("li",{className:"flex gap-2",children:[T.jsx(dn,{className:"text-gray-500"})," Cancele quando quiser"]})]}),T.jsx("button",{onClick:n,className:"w-full bg-white/10 hover:bg-white/20 text-white font-bold py-4 rounded-xl transition-all",children:"Escolher Mensal"})]}),T.jsxs("div",{className:"order-1 md:order-2 relative bg-[#0a0a0a] border-2 border-amber-500/50 rounded-[2.5rem] p-8 md:p-12 overflow-hidden shadow-[0_0_50px_rgba(245,158,11,0.2)] transform transition-all duration-300 scale-105 z-10",children:[T.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-l from-amber-500 to-yellow-600 text-black text-[10px] md:text-xs font-bold px-6 py-2 rounded-bl-2xl uppercase tracking-widest shadow-lg font-sans",children:"Melhor Oferta"}),T.jsx("h3",{className:"text-2xl font-bold text-amber-100 mb-2 font-serif",children:"Plano Anual"}),T.jsx("p",{className:"text-amber-500/80 text-xs font-bold uppercase tracking-wider mb-8",children:"Economize 33%"}),T.jsxs("div",{className:"flex items-baseline gap-1 leading-none text-white mb-10",children:[T.jsx("span",{className:"text-lg text-gray-400 font-medium self-start mt-2",children:"R$"}),T.jsx("span",{className:"text-6xl font-bold font-sans text-transparent bg-clip-text bg-gradient-to-b from-amber-200 to-amber-500",children:"9,90"}),T.jsx("span",{className:"text-xl text-gray-400 font-medium self-end mb-2",children:"/ms"})]}),T.jsx("p",{className:"text-xs text-gray-500 -mt-8 mb-8",children:"Cobrado anualmente (R$ 118,80)"}),T.jsxs("ul",{className:"space-y-4 mb-10 text-gray-300 text-sm md:text-base",children:[T.jsxs("li",{className:"flex gap-3",children:[T.jsx(dn,{className:"text-amber-500 text-xl"})," Sem Anncios"]}),T.jsxs("li",{className:"flex gap-3",children:[T.jsx(dn,{className:"text-amber-500 text-xl"})," Acesso Ilimitado"]}),T.jsxs("li",{className:"flex gap-3",children:[T.jsx(dn,{className:"text-amber-500 text-xl"})," Cancele quando quiser"]})]}),T.jsxs("button",{onClick:n,className:"w-full bg-gradient-to-r from-amber-500 to-yellow-600 text-black font-bold py-5 rounded-full text-lg shadow-[0_0_40px_rgba(245,158,11,0.3)] hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-2",children:[T.jsx(Wd,{className:"text-xl"})," Comear Agora"]}),T.jsx("p",{className:"text-center text-[10px] text-gray-500 mt-4 uppercase tracking-wider",children:"Garantia de 7 dias incondicional"})]})]})]})})]}),T.jsx("section",{className:"py-24 px-6 bg-[#0a0a0a] border-t border-white/5",children:T.jsxs("div",{className:"max-w-3xl mx-auto",children:[T.jsx(un,{children:T.jsx("h2",{className:"text-3xl md:text-4xl font-serif text-white mb-12 text-center",children:"Dvidas Frequentes"})}),T.jsx("div",{className:"space-y-4",children:_2.map((f,m)=>{const p=o===m;return T.jsx(un,{delay:`${m*100}ms`,children:T.jsxs("div",{className:"bg-[#111] rounded-2xl border border-white/5 overflow-hidden transition-colors hover:bg-white/5",children:[T.jsxs("button",{onClick:()=>u(m),className:"w-full flex items-center justify-between p-6 text-left focus:outline-none","aria-expanded":p,children:[T.jsx("span",{className:"font-semibold text-base md:text-lg text-gray-200 pr-4 font-sans",children:f.question}),T.jsx("div",{className:`w-8 h-8 rounded-full bg-white/5 flex items-center justify-center transition-transform duration-300 ${p?"rotate-180 bg-white/10":""}`,children:T.jsx(DP,{className:"text-gray-400"})})]}),T.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${p?"max-h-60 opacity-100":"max-h-0 opacity-0"}`,children:T.jsx("p",{className:"p-6 pt-0 text-sm md:text-base text-gray-400 leading-relaxed font-sans border-t border-white/5",children:f.answer})})]})},m)})})]})}),T.jsxs("footer",{className:"py-12 text-center text-gray-600 text-xs border-t border-white/5 bg-[#050505] font-sans",children:[T.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 opacity-50 hover:opacity-100 transition-opacity",children:[T.jsx(Ro,{className:"text-violet-500"}),T.jsx("span",{className:"font-bold text-gray-400",children:"Inspira+"})]}),T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto mb-8 text-left px-8",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-gray-500 mb-4 uppercase tracking-wider",children:"Legal"}),T.jsxs("ul",{className:"space-y-2",children:[T.jsx("li",{children:T.jsx("button",{onClick:t,className:"hover:text-violet-400 transition-colors",children:"Termos de Uso"})}),T.jsx("li",{children:T.jsx("button",{onClick:i,className:"hover:text-violet-400 transition-colors",children:"Privacidade"})})]})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-gray-500 mb-4 uppercase tracking-wider",children:"Suporte"}),T.jsxs("ul",{className:"space-y-2",children:[T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-violet-400 transition-colors",children:"Central de Ajuda"})}),T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-violet-400 transition-colors",children:"Fale Conosco"})})]})]})]}),T.jsxs("p",{children:[" ",new Date().getFullYear()," Inspira+. Feito com carinho no Brasil."]})]})]})};var QC=(n=>(n[n.Landing=0]="Landing",n[n.Welcome=1]="Welcome",n[n.Source=2]="Source",n[n.Age=3]="Age",n[n.Relationship=4]="Relationship",n[n.Religious=5]="Religious",n[n.Beliefs=6]="Beliefs",n[n.Zodiac=7]="Zodiac",n[n.PersonalizeIntro3=8]="PersonalizeIntro3",n[n.Feeling=9]="Feeling",n[n.FeelingReason=10]="FeelingReason",n[n.Improvement=11]="Improvement",n[n.AppGoals=12]="AppGoals",n[n.Goals=13]="Goals",n[n.Topics=14]="Topics",n))(QC||{});const T2=({onLoginClick:n,onShowTerms:e,onShowPrivacy:t})=>{const[i,o]=ee.useState([0]),{updateUserData:l}=Vn(),u=i[i.length-1],f=()=>{o(F=>[...F,F[F.length-1]+1])},m=()=>{i.length>1&&o(F=>F.slice(0,-1))},p=F=>{o(B=>[...B,F])},v=()=>{p(14)},E=()=>{localStorage.setItem("inspiraMoodCheckin",new Date().getTime().toString()),l({onboardingComplete:!0})},A=F=>{l({isReligious:F}),p(F==="Sim"||F==="Espiritual, mas no religioso"?6:8)};Object.keys(QC).length/2;const w=u/15*100,L=()=>{switch(u){case 0:return T.jsx(v2,{onGetStarted:f,onLoginClick:n,onShowTerms:e,onShowPrivacy:t});case 1:return T.jsx(KP,{onNext:f,onQuickStart:v,progress:w});case 2:return T.jsx(XP,{onNext:f,onBack:m,progress:w});case 3:return T.jsx(ZP,{onNext:f,onBack:m,progress:w});case 4:return T.jsx(t2,{onNext:f,onBack:m,progress:w});case 5:return T.jsx(i2,{onNext:A,onBack:m,progress:w});case 6:return T.jsx(r2,{onNext:f,onBack:m,progress:w});case 7:return T.jsx(a2,{onNext:f,onBack:m,progress:w});case 8:return T.jsx(h2,{onNext:f,onBack:m,progress:w});case 9:return T.jsx(p2,{onNext:f,onBack:m,progress:w});case 10:return T.jsx(y2,{onNext:f,onBack:m,progress:w});case 11:return T.jsx(u2,{onNext:f,onBack:m,progress:w});case 12:return T.jsx(d2,{onNext:f,onBack:m,progress:w});case 13:return T.jsx(f2,{onNext:f,onBack:m,progress:w});case 14:return T.jsx(QP,{onNext:E,onBack:m,progress:w});default:return T.jsx("div",{children:"Step not found"})}};return T.jsx("div",{className:"h-full w-full bg-gray-50 text-gray-800",children:L()})},E2=()=>{const[n,e]=ee.useState({text:"",author:""});return ee.useEffect(()=>{const t=new URLSearchParams(window.location.search),i=t.get("text")||"Sua citao inspiradora aparecer aqui.",o=t.get("author")||null;e({text:i,author:o||""})},[]),T.jsx("div",{className:"h-screen w-screen bg-black font-sans flex items-center justify-center p-8",children:T.jsxs("div",{className:"relative w-full max-w-md h-[85vh] max-h-[800px] flex flex-col justify-center items-start p-8 text-left text-white rounded-2xl shadow-2xl overflow-hidden aurora-background",children:[T.jsxs("div",{className:"relative z-10",children:[T.jsx("h1",{className:"text-2xl font-bold leading-tight drop-shadow-lg",children:n.text}),n.author&&T.jsxs("p",{className:"mt-4 text-lg italic opacity-80 drop-shadow-md",children:["- ",n.author]})]}),T.jsx("div",{className:"absolute bottom-6 left-8 z-10 text-lg font-bold text-white/80 drop-shadow-lg",children:"Inspira+"})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let S2,A2;function C2(){return{geminiUrl:S2,vertexUrl:A2}}function x2(n,e,t,i){var o,l;if(!(n!=null&&n.baseUrl)){const u=C2();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Us{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let p=0;p<m.length;p++){const v=m[p];h(v,e.slice(l+1),t[p])}else for(const p of m)h(p,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];h(m[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function w2(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),l=i.split("."),u=new Set;let f=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const p=l[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}xp(n,o,l,0,u)}}function xp(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const m of f[u])xp(m,e,t,i+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(p=>!p.startsWith("_")&&!o.has(p)),m={};for(const p of f)m[p]=u[p];for(const[p,v]of Object.entries(m)){const E=[];for(const A of t.slice(i))A==="*"?E.push(p):E.push(A);h(u,E,v)}for(const p of f)delete u[p]}}else{const u=n;l in u&&xp(u[l],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ig(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I2(n){const e={},t=d(n,["operationName"]);t!=null&&h(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&h(e,["_url","resourceName"],i),e}function R2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],N2(u)),e}function b2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["response"]);return u!=null&&h(e,["response"],M2(u)),e}function N2(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>D2(u))),h(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function M2(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>P2(u))),h(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function D2(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],q2(t)),e}function P2(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],F2(t)),e}function k2(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function V2(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function U2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["response"]);return u!=null&&h(e,["response"],L2(u)),e}function L2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&h(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function $C(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["response"]);return u!=null&&h(e,["response"],O2(u)),e}function O2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&h(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function q2(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&h(e,["videoBytes"],Ig(i));const o=d(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function F2(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],Ig(i));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qT||(qT={}));var FT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(FT||(FT={}));var BT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(BT||(BT={}));var mt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(mt||(mt={}));var zT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(zT||(zT={}));var GT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(GT||(GT={}));var HT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(HT||(HT={}));var YT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(YT||(YT={}));var JT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(JT||(JT={}));var KT;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(KT||(KT={}));var jT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(jT||(jT={}));var QT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(QT||(QT={}));var $T;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})($T||($T={}));var XT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(XT||(XT={}));var WT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(WT||(WT={}));var ZT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ZT||(ZT={}));var eE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eE||(eE={}));var tE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(tE||(tE={}));var nE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nE||(nE={}));var ef;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ef||(ef={}));var iE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(iE||(iE={}));var sE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sE||(sE={}));var rE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rE||(rE={}));var wp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wp||(wp={}));var oE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(oE||(oE={}));var aE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aE||(aE={}));var lE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(lE||(lE={}));var uE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(uE||(uE={}));var cE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cE||(cE={}));var dE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(dE||(dE={}));var fE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(fE||(fE={}));var hE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(hE||(hE={}));var mE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(mE||(mE={}));var pE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(pE||(pE={}));var gE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gE||(gE={}));var yE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yE||(yE={}));var _E;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_E||(_E={}));var vE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vE||(vE={}));var TE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(TE||(TE={}));var EE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(EE||(EE={}));var SE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(SE||(SE={}));var AE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(AE||(AE={}));var CE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(CE||(CE={}));var xE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(xE||(xE={}));var wE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(wE||(wE={}));var IE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(IE||(IE={}));var RE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(RE||(RE={}));var bE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(bE||(bE={}));var NE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(NE||(NE={}));var ME;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ME||(ME={}));var DE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(DE||(DE={}));var PE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(PE||(PE={}));var kE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kE||(kE={}));var VE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(VE||(VE={}));var Oa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Oa||(Oa={}));class Ip{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class lu{get text(){var e,t,i,o,l,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const A of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[w,L]of Object.entries(A))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(L!==null||L!==void 0)&&E.push(w);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,p+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,i,o,l,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[A,w]of Object.entries(E))A!=="inlineData"&&(w!==null||w!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,o,l,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,o,l,u,f,m,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,o,l,u,f,m,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class UE{}class LE{}class B2{}class z2{}class G2{}class H2{}class OE{}class qE{}class FE{}class Y2{}class tf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new tf;let o;const l=e;return t?o=b2(l):o=R2(l),Object.assign(i,o),i}}class BE{}class zE{}class GE{}class HE{}class J2{}class K2{}class j2{}class Rg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Rg,l=U2(e);return Object.assign(i,l),i}}class Q2{}class $2{}class X2{}class YE{}class W2{get text(){var e,t,i;let o="",l=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&u.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,i;let o="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,m]of Object.entries(u))f!=="inlineData"&&m!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Z2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new bg,l=$C(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ze(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function XC(n,e){const t=Ze(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function WC(n){return Array.isArray(n)?n.map(e=>nf(e)):[nf(n)]}function nf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function ZC(n){const e=nf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ex(n){const e=nf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function tx(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>JE(e)):[JE(n)]}function Rp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function KE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function jE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function hn(n){if(n==null)throw new Error("ContentUnion is required");return Rp(n)?n:{role:"user",parts:tx(n)}}function Ng(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=hn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=hn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>hn(t)):[hn(e)]}function hi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(KE(n)||jE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hn(n)]}const e=[],t=[],i=Rp(n[0]);for(const o of n){const l=Rp(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(KE(o)||jE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:tx(t)}),e}function ek(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(mt).includes(t[0].toUpperCase())?t[0].toUpperCase():mt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(mt).includes(i.toUpperCase())?i.toUpperCase():mt.TYPE_UNSPECIFIED})}}function Ga(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&ek(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(mt).includes(f.toUpperCase())?f.toUpperCase():mt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ga(f);else if(i.includes(u)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(Ga(p))}e[u]=m}else if(o.includes(u)){const m={};for(const[p,v]of Object.entries(f))m[p]=Ga(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Mg(n){return Ga(n)}function Dg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Pg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ol(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ga(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ga(e.response));return n}function al(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function tk(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ls(n,e){if(typeof e!="string")throw new Error("name must be a string");return tk(n,e,"cachedContents")}function nx(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Jr(n){return Ig(n)}function nk(n){return n!=null&&typeof n=="object"&&"name"in n}function ik(n){return n!=null&&typeof n=="object"&&"video"in n}function sk(n){return n!=null&&typeof n=="object"&&"uri"in n}function ix(n){var e;let t;if(nk(n)&&(t=n.name),!(sk(n)&&(t=n.uri,t===void 0))&&!(ik(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function sx(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function rx(n){for(const e of["models","tunedModels","publisherModels"])if(rk(n,e))return n[e];return[]}function rk(n,e){return n!==null&&typeof n=="object"&&e in n}function ok(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function ak(n,e={}){const t=[],i=new Set;for(const o of n){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=ok(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function ox(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function lk(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ax(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ll(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function lx(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uk(n){const e={},t=d(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Gk(u))),h(e,["inlinedResponses"],l)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function ck(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function dk(n){const e={},t=d(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&h(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Nd(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const o=d(n,["metadata","state"]);o!=null&&h(e,["state"],lx(o));const l=d(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=d(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["metadata","model"]);m!=null&&h(e,["model"],m);const p=d(n,["metadata","output"]);return p!=null&&h(e,["dest"],uk(ax(p))),e}function bp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const o=d(n,["state"]);o!=null&&h(e,["state"],lx(o));const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["createTime"]);u!=null&&h(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&h(e,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(e,["endTime"],m);const p=d(n,["updateTime"]);p!=null&&h(e,["updateTime"],p);const v=d(n,["model"]);v!=null&&h(e,["model"],v);const E=d(n,["inputConfig"]);E!=null&&h(e,["src"],fk(E));const A=d(n,["outputConfig"]);A!=null&&h(e,["dest"],ck(ax(A)));const w=d(n,["completionStats"]);return w!=null&&h(e,["completionStats"],w),e}function fk(n){const e={},t=d(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function hk(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&h(t,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>zk(n,u))),h(t,["requests","requests"],l)}return t}function mk(n){const e={},t=d(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&h(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pk(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function gk(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],ll(n,i)),t}function yk(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],ll(n,i)),t}function _k(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],vk(i));const o=d(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const p=d(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=d(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(w=>w)),h(e,["safetyRatings"],A)}const E=d(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function vk(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["citations"],i)}return e}function ux(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>$k(l))),h(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function Tk(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Ek(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=d(n,["dest"]);return e!==void 0&&o!=null&&h(e,["outputConfig"],dk(lk(o))),t}function QE(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["src"]);o!=null&&h(t,["batch","inputConfig"],hk(n,ox(n,o)));const l=d(e,["config"]);return l!=null&&Tk(l,t),t}function Sk(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["model"],Ze(n,i));const o=d(e,["src"]);o!=null&&h(t,["inputConfig"],mk(ox(n,o)));const l=d(e,["config"]);return l!=null&&Ek(l,t),t}function Ak(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["batch","displayName"],i),t}function Ck(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["src"]);o!=null&&h(t,["batch","inputConfig"],Mk(n,o));const l=d(e,["config"]);return l!=null&&Ak(l,t),t}function xk(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],ll(n,i)),t}function wk(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],ll(n,i)),t}function Ik(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function Rk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function bk(n,e){const t={},i=d(e,["contents"]);if(i!=null){let l=Ng(n,i);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const o=d(e,["config"]);return o!=null&&(h(t,["_self"],Nk(o,t)),w2(t,{"requests[].*":"requests[].request.*"})),t}function Nk(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Mk(n,e){const t={},i=d(e,["fileName"]);i!=null&&h(t,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&h(t,["requests"],bk(n,o)),t}function Dk(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Pk(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kk(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&h(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Vk(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],ux(hn(o)));const l=d(e,["temperature"]);l!=null&&h(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&h(i,["topP"],u);const f=d(e,["topK"]);f!=null&&h(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(i,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&h(i,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&h(i,["responseLogprobs"],E);const A=d(e,["logprobs"]);A!=null&&h(i,["logprobs"],A);const w=d(e,["presencePenalty"]);w!=null&&h(i,["presencePenalty"],w);const L=d(e,["frequencyPenalty"]);L!=null&&h(i,["frequencyPenalty"],L);const F=d(e,["seed"]);F!=null&&h(i,["seed"],F);const B=d(e,["responseMimeType"]);B!=null&&h(i,["responseMimeType"],B);const $=d(e,["responseSchema"]);$!=null&&h(i,["responseSchema"],Mg($));const X=d(e,["responseJsonSchema"]);if(X!=null&&h(i,["responseJsonSchema"],X),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=d(e,["safetySettings"]);if(t!==void 0&&W!=null){let U=W;Array.isArray(U)&&(U=U.map(M=>Xk(M))),h(t,["safetySettings"],U)}const ae=d(e,["tools"]);if(t!==void 0&&ae!=null){let U=al(ae);Array.isArray(U)&&(U=U.map(M=>Zk(ol(M)))),h(t,["tools"],U)}const de=d(e,["toolConfig"]);if(t!==void 0&&de!=null&&h(t,["toolConfig"],Wk(de)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&h(t,["cachedContent"],Ls(n,ce));const D=d(e,["responseModalities"]);D!=null&&h(i,["responseModalities"],D);const N=d(e,["mediaResolution"]);N!=null&&h(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&h(i,["speechConfig"],Dg(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=d(e,["thinkingConfig"]);k!=null&&h(i,["thinkingConfig"],k);const P=d(e,["imageConfig"]);return P!=null&&h(i,["imageConfig"],Bk(P)),i}function Uk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>_k(p))),h(e,["candidates"],m)}const o=d(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&h(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function Lk(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],ll(n,i)),t}function Ok(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],ll(n,i)),t}function qk(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Fk(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Bk(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zk(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["request","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let f=hi(o);Array.isArray(f)&&(f=f.map(m=>ux(m))),h(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=d(e,["config"]);return u!=null&&h(t,["request","generationConfig"],Vk(n,u,d(t,["request"],{}))),t}function Gk(n){const e={},t=d(n,["response"]);t!=null&&h(e,["response"],Uk(t));const i=d(n,["error"]);return i!=null&&h(e,["error"],i),e}function Hk(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Yk(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function Jk(n){const e={},t=d(n,["config"]);return t!=null&&Hk(t,e),e}function Kk(n){const e={},t=d(n,["config"]);return t!=null&&Yk(t,e),e}function jk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Nd(u))),h(e,["batchJobs"],l)}return e}function Qk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>bp(u))),h(e,["batchJobs"],l)}return e}function $k(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],Dk(l));const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],Pk(u));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],pk(m));const p=d(n,["text"]);p!=null&&h(e,["text"],p);const v=d(n,["thought"]);v!=null&&h(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=d(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function Xk(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function Wk(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],kk(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],i),e}function Zk(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],qk(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],Fk(m));const p=d(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ks;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ks||(ks={}));class zo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eV extends Us{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(ks.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=QE(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,m=f.requests,p=[];for(const v of m){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=A,E.request=w}p.push(E)}return f.requests=p,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Sk(this.apiClient,e);return f=fe("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>bp(v))}else{const p=QE(this.apiClient,e);return f=fe("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Nd(v))}}async createEmbeddingsInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Ck(this.apiClient,e);return l=fe("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Nd(m))}}async get(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Ok(this.apiClient,e);return f=fe("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>bp(v))}else{const p=Lk(this.apiClient,e);return f=fe("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Nd(v))}}async cancel(e){var t,i,o,l;let u="",f={};if(this.apiClient.isVertexAI()){const m=yk(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=gk(this.apiClient,e);u=fe("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Kk(e);return f=fe("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=Qk(v),A=new YE;return Object.assign(A,E),A})}else{const p=Jk(e);return f=fe("batches",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=jk(v),A=new YE;return Object.assign(A,E),A})}}async delete(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=wk(this.apiClient,e);return f=fe("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>Rk(v))}else{const p=xk(this.apiClient,e);return f=fe("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>Ik(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tV(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function $E(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>CV(l))),h(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function nV(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let v=hi(u);Array.isArray(v)&&(v=v.map(E=>$E(E))),h(e,["contents"],v)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],$E(hn(f)));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>wV(E))),h(e,["tools"],v)}const p=d(n,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],xV(p)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function iV(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let E=hi(u);Array.isArray(E)&&(E=E.map(A=>A)),h(e,["contents"],E)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],hn(f));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(A=>IV(A))),h(e,["tools"],E)}const p=d(n,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function sV(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["model"],XC(n,i));const o=d(e,["config"]);return o!=null&&nV(o,t),t}function rV(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["model"],XC(n,i));const o=d(e,["config"]);return o!=null&&iV(o,t),t}function oV(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],Ls(n,i)),t}function aV(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],Ls(n,i)),t}function lV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function uV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function cV(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function dV(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fV(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&h(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hV(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function mV(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],Ls(n,i)),t}function pV(n,e){const t={},i=d(e,["name"]);return i!=null&&h(t,["_url","name"],Ls(n,i)),t}function gV(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function yV(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function _V(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function vV(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function TV(n){const e={},t=d(n,["config"]);return t!=null&&_V(t,e),e}function EV(n){const e={},t=d(n,["config"]);return t!=null&&vV(t,e),e}function SV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function AV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function CV(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],cV(l));const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],dV(u));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],tV(m));const p=d(n,["text"]);p!=null&&h(e,["text"],p);const v=d(n,["thought"]);v!=null&&h(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=d(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function xV(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],fV(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],i),e}function wV(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],gV(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],yV(m));const p=d(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function IV(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>hV(A))),h(e,["functionDeclarations"],E)}const i=d(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const p=d(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function RV(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function bV(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function NV(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Ls(n,i));const o=d(e,["config"]);return o!=null&&RV(o,t),t}function MV(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Ls(n,i));const o=d(e,["config"]);return o!=null&&bV(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DV extends Us{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(ks.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=rV(this.apiClient,e);return f=fe("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=sV(this.apiClient,e);return f=fe("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=pV(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=mV(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=aV(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=uV(v),A=new GE;return Object.assign(A,E),A})}else{const p=oV(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=lV(v),A=new GE;return Object.assign(A,E),A})}}async update(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=MV(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=NV(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=EV(e);return f=fe("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=AV(v),A=new HE;return Object.assign(A,E),A})}else{const p=TV(e);return f=fe("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=SV(v),A=new HE;return Object.assign(A,E),A})}}}function XE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(n){return this instanceof _t?(this.v=n,this):new _t(n)}function Ha(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(L){return Promise.resolve(L).then(w,E)}}function f(w,L){i[w]&&(o[w]=function(F){return new Promise(function(B,$){l.push([w,F,B,$])>1||m(w,F)})},L&&(o[w]=L(o[w])))}function m(w,L){try{p(i[w](L))}catch(F){A(l[0][3],F)}}function p(w){w.value instanceof _t?Promise.resolve(w.value.v).then(v,E):A(l[0][2],w)}function v(w){m("next",w)}function E(w){m("throw",w)}function A(w,L){w(L),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Su(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof XE=="function"?XE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(f,m){u=n[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PV(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:cx(t)}function cx(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function kV(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function WE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let l=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),l&&!cx(n[i])&&(l=!1),i++;l?e.push(...o):e.pop()}return e}class VV{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new UV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class UV{constructor(e,t,i,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),kV(l)}async sendMessage(e){var t;await this.sendPromise;const i=hn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,f;const m=await o,p=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(f=v.slice(E))!==null&&f!==void 0?f:[]);const w=p?[p]:[];this.recordHistory(i,w,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=hn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?WE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return Ha(this,arguments,function*(){var u,f,m,p;const v=[];try{for(var E=!0,A=Su(e),w;w=yield _t(A.next()),u=w.done,!u;E=!0){p=w.value,E=!1;const L=p;if(PV(L)){const F=(o=(i=L.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;F!==void 0&&v.push(F)}yield yield _t(L)}}catch(L){f={error:L}}finally{try{!E&&!u&&(m=A.return)&&(yield _t(m.call(A)))}finally{if(f)throw f.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...WE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Rf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LV(n){const e={},t=d(n,["file"]);return t!=null&&h(e,["file"],t),e}function OV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function qV(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],ix(t)),e}function FV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function BV(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],ix(t)),e}function zV(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function GV(n){const e={},t=d(n,["config"]);return t!=null&&zV(t,e),e}function HV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YV extends Us{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(ks.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=GV(e);return l=fe("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=HV(m),v=new Q2;return Object.assign(v,p),v})}}async createInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=LV(e);return l=fe("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=OV(m),v=new $2;return Object.assign(v,p),v})}}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=BV(e);return l=fe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qV(e);return l=fe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=FV(m),v=new X2;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Md(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function JV(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>lU(l))),h(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function KV(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function jV(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QV(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function $V(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const p=d(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=d(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const E=d(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const A=d(n,["responseLogprobs"]);A!=null&&h(e,["responseLogprobs"],A);const w=d(n,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const L=d(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const F=d(n,["responseSchema"]);F!=null&&h(e,["responseSchema"],F);const B=d(n,["routingConfig"]);B!=null&&h(e,["routingConfig"],B);const $=d(n,["seed"]);$!=null&&h(e,["seed"],$);const X=d(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],dx(X));const W=d(n,["stopSequences"]);W!=null&&h(e,["stopSequences"],W);const ae=d(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const de=d(n,["thinkingConfig"]);de!=null&&h(e,["thinkingConfig"],de);const ce=d(n,["topK"]);ce!=null&&h(e,["topK"],ce);const D=d(n,["topP"]);if(D!=null&&h(e,["topP"],D),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function XV(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function WV(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function ZV(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Pg(E));const A=d(n,["thinkingConfig"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","thinkingConfig"],A);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const L=d(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],JV(hn(L)));const F=d(n,["tools"]);if(e!==void 0&&F!=null){let ce=al(F);Array.isArray(ce)&&(ce=ce.map(D=>cU(ol(D)))),h(e,["setup","tools"],ce)}const B=d(n,["sessionResumption"]);e!==void 0&&B!=null&&h(e,["setup","sessionResumption"],uU(B));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=d(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const W=d(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&h(e,["setup","realtimeInputConfig"],W);const ae=d(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const de=d(n,["proactivity"]);return e!==void 0&&de!=null&&h(e,["setup","proactivity"],de),t}function eU(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],$V(i));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],dx(Pg(E)));const A=d(n,["thinkingConfig"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","thinkingConfig"],A);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const L=d(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],hn(L));const F=d(n,["tools"]);if(e!==void 0&&F!=null){let ce=al(F);Array.isArray(ce)&&(ce=ce.map(D=>dU(ol(D)))),h(e,["setup","tools"],ce)}const B=d(n,["sessionResumption"]);e!==void 0&&B!=null&&h(e,["setup","sessionResumption"],B);const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=d(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const W=d(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&h(e,["setup","realtimeInputConfig"],W);const ae=d(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const de=d(n,["proactivity"]);return e!==void 0&&de!=null&&h(e,["setup","proactivity"],de),t}function tU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["setup","model"],Ze(n,i));const o=d(e,["config"]);return o!=null&&h(t,["config"],ZV(o,t)),t}function nU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["setup","model"],Ze(n,i));const o=d(e,["config"]);return o!=null&&h(t,["config"],eU(o,t)),t}function iU(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function sU(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["weightedPrompts"],i)}return e}function rU(n){const e={},t=d(n,["media"]);if(t!=null){let p=WC(t);Array.isArray(p)&&(p=p.map(v=>Md(v))),h(e,["mediaChunks"],p)}const i=d(n,["audio"]);i!=null&&h(e,["audio"],Md(ex(i)));const o=d(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&h(e,["video"],Md(ZC(l)));const u=d(n,["text"]);u!=null&&h(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function oU(n){const e={},t=d(n,["media"]);if(t!=null){let p=WC(t);Array.isArray(p)&&(p=p.map(v=>v)),h(e,["mediaChunks"],p)}const i=d(n,["audio"]);i!=null&&h(e,["audio"],ex(i));const o=d(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&h(e,["video"],ZC(l));const u=d(n,["text"]);u!=null&&h(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function aU(n){const e={},t=d(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&h(e,["serverContent"],i);const o=d(n,["toolCall"]);o!=null&&h(e,["toolCall"],o);const l=d(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=d(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],fU(u));const f=d(n,["goAway"]);f!=null&&h(e,["goAway"],f);const m=d(n,["sessionResumptionUpdate"]);return m!=null&&h(e,["sessionResumptionUpdate"],m),e}function lU(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],KV(l));const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],jV(u));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],Md(m));const p=d(n,["text"]);p!=null&&h(e,["text"],p);const v=d(n,["thought"]);v!=null&&h(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=d(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function uU(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dx(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const i=d(n,["voiceConfig"]);if(i!=null&&h(e,["voiceConfig"],i),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function cU(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],XV(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],WV(m));const p=d(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function dU(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>QV(A))),h(e,["functionDeclarations"],E)}const i=d(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const p=d(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function fU(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const o=d(n,["candidatesTokenCount"]);o!=null&&h(e,["responseTokenCount"],o);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=d(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const m=d(n,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(L=>L)),h(e,["promptTokensDetails"],w)}const p=d(n,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(L=>L)),h(e,["cacheTokensDetails"],w)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(L=>L)),h(e,["responseTokensDetails"],w)}const E=d(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(L=>L)),h(e,["toolUsePromptTokensDetails"],w)}const A=d(n,["trafficType"]);return A!=null&&h(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hU(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function mU(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],pU(i));const o=d(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const p=d(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=d(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(w=>w)),h(e,["safetyRatings"],A)}const E=d(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function pU(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["citations"],i)}return e}function gU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let l=hi(o);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["contents"],l)}return t}function yU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["tokensInfo"],o)}return e}function _U(n){const e={},t=d(n,["values"]);t!=null&&h(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&h(e,["statistics"],vU(i)),e}function vU(n){const e={},t=d(n,["truncated"]);t!=null&&h(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&h(e,["tokenCount"],i),e}function bf(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>RL(l))),h(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function TU(n){const e={},t=d(n,["controlType"]);t!=null&&h(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&h(e,["computeControl"],i),e}function EU(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function SU(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&h(e,["systemInstruction"],hn(i));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>gx(f))),h(e,["tools"],u)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],hL(l)),t}function AU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let u=hi(o);Array.isArray(u)&&(u=u.map(f=>bf(f))),h(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&EU(l),t}function CU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let u=hi(o);Array.isArray(u)&&(u=u.map(f=>f)),h(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&SU(l,t),t}function xU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&h(e,["totalTokens"],i);const o=d(n,["cachedContentTokenCount"]);return o!=null&&h(e,["cachedContentTokenCount"],o),e}function wU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&h(e,["totalTokens"],i),e}function IU(n,e){const t={},i=d(e,["model"]);return i!=null&&h(t,["_url","name"],Ze(n,i)),t}function RU(n,e){const t={},i=d(e,["model"]);return i!=null&&h(t,["_url","name"],Ze(n,i)),t}function bU(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function NU(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function MU(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const p=d(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const A=d(n,["includeRaiReason"]);e!==void 0&&A!=null&&h(e,["parameters","includeRaiReason"],A);const w=d(n,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const L=d(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const F=d(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&h(e,["parameters","outputOptions","compressionQuality"],F);const B=d(n,["addWatermark"]);e!==void 0&&B!=null&&h(e,["parameters","addWatermark"],B);const $=d(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const X=d(n,["editMode"]);e!==void 0&&X!=null&&h(e,["parameters","editMode"],X);const W=d(n,["baseSteps"]);return e!==void 0&&W!=null&&h(e,["parameters","editConfig","baseSteps"],W),t}function DU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>kL(m))),h(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&MU(u,t),t}function PU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Nf(l))),h(e,["generatedImages"],o)}return e}function kU(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function VU(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&h(e,["instances[]","task_type"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&h(e,["instances[]","title"],o);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&h(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),t}function UU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let f=Ng(n,o);Array.isArray(f)&&(f=f.map(m=>m)),h(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&kU(l,t);const u=d(e,["model"]);return u!==void 0&&h(t,["requests[]","model"],Ze(n,u)),t}function LU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let u=Ng(n,o);Array.isArray(u)&&(u=u.map(f=>f)),h(t,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&VU(l,t),t}function OU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function qU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>_U(u))),h(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function FU(n){const e={},t=d(n,["endpoint"]);t!=null&&h(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&h(e,["deployedModelId"],i),e}function BU(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function zU(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GU(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&h(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HU(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function YU(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],bf(hn(o)));const l=d(e,["temperature"]);l!=null&&h(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&h(i,["topP"],u);const f=d(e,["topK"]);f!=null&&h(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(i,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&h(i,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&h(i,["responseLogprobs"],E);const A=d(e,["logprobs"]);A!=null&&h(i,["logprobs"],A);const w=d(e,["presencePenalty"]);w!=null&&h(i,["presencePenalty"],w);const L=d(e,["frequencyPenalty"]);L!=null&&h(i,["frequencyPenalty"],L);const F=d(e,["seed"]);F!=null&&h(i,["seed"],F);const B=d(e,["responseMimeType"]);B!=null&&h(i,["responseMimeType"],B);const $=d(e,["responseSchema"]);$!=null&&h(i,["responseSchema"],Mg($));const X=d(e,["responseJsonSchema"]);if(X!=null&&h(i,["responseJsonSchema"],X),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=d(e,["safetySettings"]);if(t!==void 0&&W!=null){let U=W;Array.isArray(U)&&(U=U.map(M=>VL(M))),h(t,["safetySettings"],U)}const ae=d(e,["tools"]);if(t!==void 0&&ae!=null){let U=al(ae);Array.isArray(U)&&(U=U.map(M=>zL(ol(M)))),h(t,["tools"],U)}const de=d(e,["toolConfig"]);if(t!==void 0&&de!=null&&h(t,["toolConfig"],BL(de)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&h(t,["cachedContent"],Ls(n,ce));const D=d(e,["responseModalities"]);D!=null&&h(i,["responseModalities"],D);const N=d(e,["mediaResolution"]);N!=null&&h(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&h(i,["speechConfig"],Dg(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=d(e,["thinkingConfig"]);k!=null&&h(i,["thinkingConfig"],k);const P=d(e,["imageConfig"]);return P!=null&&h(i,["imageConfig"],_L(P)),i}function JU(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],hn(o));const l=d(e,["temperature"]);l!=null&&h(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&h(i,["topP"],u);const f=d(e,["topK"]);f!=null&&h(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(i,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&h(i,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&h(i,["responseLogprobs"],E);const A=d(e,["logprobs"]);A!=null&&h(i,["logprobs"],A);const w=d(e,["presencePenalty"]);w!=null&&h(i,["presencePenalty"],w);const L=d(e,["frequencyPenalty"]);L!=null&&h(i,["frequencyPenalty"],L);const F=d(e,["seed"]);F!=null&&h(i,["seed"],F);const B=d(e,["responseMimeType"]);B!=null&&h(i,["responseMimeType"],B);const $=d(e,["responseSchema"]);$!=null&&h(i,["responseSchema"],Mg($));const X=d(e,["responseJsonSchema"]);X!=null&&h(i,["responseJsonSchema"],X);const W=d(e,["routingConfig"]);W!=null&&h(i,["routingConfig"],W);const ae=d(e,["modelSelectionConfig"]);ae!=null&&h(i,["modelConfig"],ae);const de=d(e,["safetySettings"]);if(t!==void 0&&de!=null){let J=de;Array.isArray(J)&&(J=J.map(re=>re)),h(t,["safetySettings"],J)}const ce=d(e,["tools"]);if(t!==void 0&&ce!=null){let J=al(ce);Array.isArray(J)&&(J=J.map(re=>gx(ol(re)))),h(t,["tools"],J)}const D=d(e,["toolConfig"]);t!==void 0&&D!=null&&h(t,["toolConfig"],D);const N=d(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const R=d(e,["cachedContent"]);t!==void 0&&R!=null&&h(t,["cachedContent"],Ls(n,R));const k=d(e,["responseModalities"]);k!=null&&h(i,["responseModalities"],k);const P=d(e,["mediaResolution"]);P!=null&&h(i,["mediaResolution"],P);const U=d(e,["speechConfig"]);U!=null&&h(i,["speechConfig"],px(Dg(U)));const M=d(e,["audioTimestamp"]);M!=null&&h(i,["audioTimestamp"],M);const Se=d(e,["thinkingConfig"]);Se!=null&&h(i,["thinkingConfig"],Se);const Ie=d(e,["imageConfig"]);return Ie!=null&&h(i,["imageConfig"],vL(Ie)),i}function ZE(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let u=hi(o);Array.isArray(u)&&(u=u.map(f=>bf(f))),h(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],YU(n,l,t)),t}function eS(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["contents"]);if(o!=null){let u=hi(o);Array.isArray(u)&&(u=u.map(f=>f)),h(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],JU(n,l,t)),t}function tS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>mU(p))),h(e,["candidates"],m)}const o=d(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&h(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function nS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(v=>v)),h(e,["candidates"],p)}const o=d(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=d(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const u=d(n,["promptFeedback"]);u!=null&&h(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&h(e,["responseId"],f);const m=d(n,["usageMetadata"]);return m!=null&&h(e,["usageMetadata"],m),e}function KU(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const m=d(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const p=d(n,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const v=d(n,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const A=d(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&h(e,["parameters","outputOptions","compressionQuality"],A),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&h(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function jU(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const p=d(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const A=d(n,["includeRaiReason"]);e!==void 0&&A!=null&&h(e,["parameters","includeRaiReason"],A);const w=d(n,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const L=d(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const F=d(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&h(e,["parameters","outputOptions","compressionQuality"],F);const B=d(n,["addWatermark"]);e!==void 0&&B!=null&&h(e,["parameters","addWatermark"],B);const $=d(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const X=d(n,["imageSize"]);e!==void 0&&X!=null&&h(e,["parameters","sampleImageSize"],X);const W=d(n,["enhancePrompt"]);return e!==void 0&&W!=null&&h(e,["parameters","enhancePrompt"],W),t}function QU(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&KU(l,t),t}function $U(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&jU(l,t),t}function XU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>uL(u))),h(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],hx(o)),e}function WU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Nf(u))),h(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],mx(o)),e}function ZU(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=d(n,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const p=d(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],Mf(v));const E=d(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(w=>t4(w))),h(e,["instances[0]","referenceImages"],A)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function eL(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const l=d(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&h(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const p=d(n,["resolution"]);e!==void 0&&p!=null&&h(e,["parameters","resolution"],p);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const E=d(n,["pubsubTopic"]);e!==void 0&&E!=null&&h(e,["parameters","pubsubTopic"],E);const A=d(n,["negativePrompt"]);e!==void 0&&A!=null&&h(e,["parameters","negativePrompt"],A);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const L=d(n,["generateAudio"]);e!==void 0&&L!=null&&h(e,["parameters","generateAudio"],L);const F=d(n,["lastFrame"]);e!==void 0&&F!=null&&h(e,["instances[0]","lastFrame"],Mi(F));const B=d(n,["referenceImages"]);if(e!==void 0&&B!=null){let W=B;Array.isArray(W)&&(W=W.map(ae=>n4(ae))),h(e,["instances[0]","referenceImages"],W)}const $=d(n,["mask"]);e!==void 0&&$!=null&&h(e,["instances[0]","mask"],e4($));const X=d(n,["compressionQuality"]);return e!==void 0&&X!=null&&h(e,["parameters","compressionQuality"],X),t}function tL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],rL(u)),e}function nL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["response"]);return u!=null&&h(e,["response"],oL(u)),e}function iL(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],Mf(l));const u=d(e,["video"]);u!=null&&h(t,["instances[0]","video"],yx(u));const f=d(e,["source"]);f!=null&&aL(f,t);const m=d(e,["config"]);return m!=null&&ZU(m,t),t}function sL(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],Mi(l));const u=d(e,["video"]);u!=null&&h(t,["instances[0]","video"],_x(u));const f=d(e,["source"]);f!=null&&lL(f,t);const m=d(e,["config"]);return m!=null&&eL(m,t),t}function rL(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>dL(u))),h(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function oL(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>fL(u))),h(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function aL(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],Mf(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],yx(l)),t}function lL(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],Mi(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],_x(l)),t}function uL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],TL(t));const i=d(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const o=d(n,["_self"]);return o!=null&&h(e,["safetyAttributes"],hx(o)),e}function Nf(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],fx(t));const i=d(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const o=d(n,["_self"]);o!=null&&h(e,["safetyAttributes"],mx(o));const l=d(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function cL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["mask"],fx(t));const i=d(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["labels"],o)}return e}function dL(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],WL(t)),e}function fL(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],ZL(t)),e}function hL(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const p=d(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=d(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const E=d(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const A=d(n,["responseLogprobs"]);A!=null&&h(e,["responseLogprobs"],A);const w=d(n,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const L=d(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const F=d(n,["responseSchema"]);F!=null&&h(e,["responseSchema"],F);const B=d(n,["routingConfig"]);B!=null&&h(e,["routingConfig"],B);const $=d(n,["seed"]);$!=null&&h(e,["seed"],$);const X=d(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],px(X));const W=d(n,["stopSequences"]);W!=null&&h(e,["stopSequences"],W);const ae=d(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const de=d(n,["thinkingConfig"]);de!=null&&h(e,["thinkingConfig"],de);const ce=d(n,["topK"]);ce!=null&&h(e,["topK"],ce);const D=d(n,["topP"]);if(D!=null&&h(e,["topP"],D),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mL(n,e){const t={},i=d(e,["model"]);return i!=null&&h(t,["_url","name"],Ze(n,i)),t}function pL(n,e){const t={},i=d(e,["model"]);return i!=null&&h(t,["_url","name"],Ze(n,i)),t}function gL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function yL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function _L(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vL(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&h(e,["imageSize"],i);const o=d(n,["outputMimeType"]);o!=null&&h(e,["imageOutputOptions","mimeType"],o);const l=d(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function TL(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],Jr(t));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function fx(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],Jr(i));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Mf(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],Jr(t));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Mi(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Jr(i));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function EL(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],sx(n,f)),i}function SL(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],sx(n,f)),i}function AL(n,e){const t={},i=d(e,["config"]);return i!=null&&EL(n,i,t),t}function CL(n,e){const t={},i=d(e,["config"]);return i!=null&&SL(n,i,t),t}function xL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let l=rx(o);Array.isArray(l)&&(l=l.map(u=>Np(u))),h(e,["models"],l)}return e}function wL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let l=rx(o);Array.isArray(l)&&(l=l.map(u=>Mp(u))),h(e,["models"],l)}return e}function IL(n){const e={},t=d(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&h(e,["maskClasses"],i);const o=d(n,["maskDilation"]);return o!=null&&h(e,["dilation"],o),e}function Np(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const o=d(n,["description"]);o!=null&&h(e,["description"],o);const l=d(n,["version"]);l!=null&&h(e,["version"],l);const u=d(n,["_self"]);u!=null&&h(e,["tunedModelInfo"],GL(u));const f=d(n,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);const m=d(n,["outputTokenLimit"]);m!=null&&h(e,["outputTokenLimit"],m);const p=d(n,["supportedGenerationMethods"]);p!=null&&h(e,["supportedActions"],p);const v=d(n,["temperature"]);v!=null&&h(e,["temperature"],v);const E=d(n,["maxTemperature"]);E!=null&&h(e,["maxTemperature"],E);const A=d(n,["topP"]);A!=null&&h(e,["topP"],A);const w=d(n,["topK"]);w!=null&&h(e,["topK"],w);const L=d(n,["thinking"]);return L!=null&&h(e,["thinking"],L),e}function Mp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const o=d(n,["description"]);o!=null&&h(e,["description"],o);const l=d(n,["versionId"]);l!=null&&h(e,["version"],l);const u=d(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(A=>FU(A))),h(e,["endpoints"],E)}const f=d(n,["labels"]);f!=null&&h(e,["labels"],f);const m=d(n,["_self"]);m!=null&&h(e,["tunedModelInfo"],HL(m));const p=d(n,["defaultCheckpointId"]);p!=null&&h(e,["defaultCheckpointId"],p);const v=d(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),h(e,["checkpoints"],E)}return e}function RL(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],BU(l));const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],zU(u));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],hU(m));const p=d(n,["text"]);p!=null&&h(e,["text"],p);const v=d(n,["thought"]);v!=null&&h(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=d(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function bL(n){const e={},t=d(n,["productImage"]);return t!=null&&h(e,["image"],Mi(t)),e}function NL(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&h(e,["parameters","baseSteps"],o);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=d(n,["addWatermark"]);e!==void 0&&p!=null&&h(e,["parameters","addWatermark"],p);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const A=d(n,["enhancePrompt"]);e!==void 0&&A!=null&&h(e,["parameters","enhancePrompt"],A);const w=d(n,["labels"]);return e!==void 0&&w!=null&&h(e,["labels"],w),t}function ML(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["source"]);o!=null&&PL(o,t);const l=d(e,["config"]);return l!=null&&NL(l,t),t}function DL(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Nf(o))),h(e,["generatedImages"],i)}return e}function PL(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const o=d(n,["personImage"]);e!==void 0&&o!=null&&h(e,["instances[0]","personImage","image"],Mi(o));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>bL(f))),h(e,["instances[0]","productImages"],u)}return t}function kL(n){const e={},t=d(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],Mi(t));const i=d(n,["referenceId"]);i!=null&&h(e,["referenceId"],i);const o=d(n,["referenceType"]);o!=null&&h(e,["referenceType"],o);const l=d(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],IL(l));const u=d(n,["controlImageConfig"]);u!=null&&h(e,["controlImageConfig"],TU(u));const f=d(n,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);const m=d(n,["subjectImageConfig"]);return m!=null&&h(e,["subjectImageConfig"],m),e}function hx(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function mx(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function VL(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function UL(n){const e={},t=d(n,["image"]);return t!=null&&h(e,["image"],Mi(t)),e}function LL(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&h(e,["parameters","mode"],i);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&h(e,["parameters","maxPredictions"],o);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&h(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);const m=d(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),t}function OL(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["source"]);o!=null&&FL(o,t);const l=d(e,["config"]);return l!=null&&LL(l,t),t}function qL(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>cL(o))),h(e,["generatedMasks"],i)}return e}function FL(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],Mi(o));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],UL(l)),t}function px(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const i=d(n,["voiceConfig"]);if(i!=null&&h(e,["voiceConfig"],i),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function BL(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],GU(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],i),e}function zL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],gL(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],yL(m));const p=d(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function gx(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>HU(A))),h(e,["functionDeclarations"],E)}const i=d(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const p=d(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function GL(n){const e={},t=d(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&h(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function HL(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&h(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function YL(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function JL(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function KL(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","name"],Ze(n,i));const o=d(e,["config"]);return o!=null&&YL(o,t),t}function jL(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["config"]);return o!=null&&JL(o,t),t}function QL(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const m=d(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const p=d(n,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=d(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const A=d(n,["numberOfImages"]);e!==void 0&&A!=null&&h(e,["parameters","sampleCount"],A);const w=d(n,["mode"]);return e!==void 0&&w!=null&&h(e,["parameters","mode"],w),t}function $L(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],Ze(n,i));const o=d(e,["image"]);o!=null&&h(t,["instances[0]","image"],Mi(o));const l=d(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&QL(u,t),t}function XL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Nf(l))),h(e,["generatedImages"],o)}return e}function WL(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&h(e,["videoBytes"],Jr(i));const o=d(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function ZL(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],Jr(i));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function e4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["_self"],Mi(t));const i=d(n,["maskMode"]);return i!=null&&h(e,["maskMode"],i),e}function t4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],Mf(t));const i=d(n,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function n4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],Mi(t));const i=d(n,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function yx(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&h(e,["encodedVideo"],Jr(i));const o=d(n,["mimeType"]);return o!=null&&h(e,["encoding"],o),e}function _x(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Jr(i));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i4(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["displayName"],i),t}function s4(n){const e={},t=d(n,["config"]);return t!=null&&i4(t,e),e}function r4(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function o4(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&r4(i,e),e}function a4(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function l4(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const o=d(n,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),t}function u4(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const u=d(n,["response"]);return u!=null&&h(e,["response"],d4(u)),e}function c4(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&h(e,["fileName"],i);const o=d(n,["config"]);return o!=null&&l4(o,e),e}function d4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&h(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function f4(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function h4(n){const e={},t=d(n,["config"]);return t!=null&&f4(t,e),e}function m4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function vx(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&h(e,["mimeType"],i);const o=d(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function p4(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&vx(i,e),e}function g4(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y4="Content-Type",_4="X-Server-Timeout",v4="User-Agent",Dp="x-goog-api-client",T4="1.31.0",E4=`google-genai-sdk/${T4}`,S4="v1beta1",A4="v1beta",iS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class C4{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:S4,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:A4,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&x4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await sS(o),new Ip(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await sS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ha(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:m}=yield _t(o.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(m,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),w=A.status,L=A.code,F=`got status: ${w}. ${JSON.stringify(E)}`;if(L>=400&&L<600)throw new Rf({message:F,status:L})}}catch(E){if(E.name==="ApiError")throw E}u+=p;let v=u.match(iS);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield _t(new Ip(A)),u=u.slice(v[0].length),v=u.match(iS)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=E4+" "+this.clientOptions.userAgentExtra;return e[v4]=t,e[Dp]=t,e[y4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))i.append(o,l);e.timeout&&e.timeout>0&&i.append(_4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m={file:o},p=this.getFileName(e),v=fe("upload/v1beta/files",m._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,p,m,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const l=this.clientOptions.uploader,u=await l.stat(t),f=String(u.size),m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};i!=null&&vx(i,E);const A=await this.fetchUploadUrl(p,f,m,v,E,i==null?void 0:i.httpOptions);return l.uploadToFileSearchStore(t,A,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,l,u){var f;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function sS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Rf({message:o,status:t}):new Error(o)}}function x4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const f=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const p=u[m],v=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w4="mcp_used/unknown";let I4=!1;function Tx(n){for(const e of n)if(R4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return I4}function Ex(n){var e;const t=(e=n[Dp])!==null&&e!==void 0?e:"";n[Dp]=(t+` ${w4}`).trimStart()}function R4(n){return n!==null&&typeof n=="object"&&n instanceof kg}function b4(n,e=100){return Ha(this,arguments,function*(){let i,o=0;for(;o<e;){const l=yield _t(n.listTools({cursor:i}));for(const u of l.tools)yield yield _t(u),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class kg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new kg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var f=!0,m=(t=void 0,Su(b4(v))),p;p=await m.next(),e=p.done,!e;f=!0){o=p.value,f=!1;const E=o;u.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){t={error:E}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ak(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function N4(n,e,t){const i=new Z2;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class M4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=k4(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const v=new Promise(W=>{p=W}),E=e.callbacks,A=function(){p({})},w=this.apiClient,L={onopen:A,onmessage:W=>{N4(w,E.onmessage,W)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(W){}},F=this.webSocketFactory.create(m,P4(u),L);F.connect(),await v;const X={setup:{model:Ze(this.apiClient,e.model)}};return F.send(JSON.stringify(X)),new D4(F,this.apiClient)}}class D4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=iU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Oa.PLAY)}pause(){this.sendPlaybackControl(Oa.PAUSE)}stop(){this.sendPlaybackControl(Oa.STOP)}resetContext(){this.sendPlaybackControl(Oa.RESET_CONTEXT)}close(){this.conn.close()}}function P4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function k4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function U4(n,e,t){const i=new W2;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=aU(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class L4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new M4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Tx(e.config.tools)&&Ex(E);const A=B4(E);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const R=this.apiClient.getApiKey();let k="BidiGenerateContent",P="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",P="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${k}?${P}=${R}`}let w=()=>{};const L=new Promise(R=>{w=R}),F=e.callbacks,B=function(){var R;(R=F==null?void 0:F.onopen)===null||R===void 0||R.call(F),w({})},$=this.apiClient,X={onopen:B,onmessage:R=>{U4($,F.onmessage,R)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(R){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(R){}},W=this.webSocketFactory.create(v,F4(A),X);W.connect(),await L;let ae=Ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const R=this.apiClient.getProject(),k=this.apiClient.getLocation();ae=`projects/${R}/locations/${k}/`+ae}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ef.AUDIO]}:e.config.responseModalities=[ef.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],D=[];for(const R of ce)if(this.isCallableTool(R)){const k=R;D.push(await k.tool())}else D.push(R);D.length>0&&(e.config.tools=D);const N={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=nU(this.apiClient,N):de=tU(this.apiClient,N),delete de.config,W.send(JSON.stringify(de)),new q4(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const O4={turnComplete:!0};class q4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=hi(t.turns),e.isVertexAI()||(i=i.map(o=>bf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(V4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},O4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:oU(e)}:t={realtimeInput:rU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function F4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function B4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rS=10;function oS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ya(u)){o=!0;break}if(!o)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ya(n){return"callTool"in n&&typeof n.callTool=="function"}function z4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ya(o)))!==null&&i!==void 0?i:!1}function aS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ya(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function lS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G4 extends Us{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,l,u,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!z4(t)||oS(t.config))return await this.generateContentInternal(m);const p=aS(t);if(p.length>0){const F=p.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let v,E;const A=hi(m.contents),w=(l=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:rS;let L=0;for(;L<w&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const F=v.candidates[0].content,B=[];for(const $ of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Ya($)){const W=await $.callTool(v.functionCalls);B.push(...W)}L++,E={role:"user",parts:B},m.contents=hi(m.contents),m.contents.push(F),m.contents.push(E),lS(m.config)&&(A.push(F),A.push(E))}return lS(m.config)&&(v.automaticFunctionCallingHistory=A),v},this.generateContentStream=async t=>{var i,o,l,u,f;if(this.maybeMoveToResponseJsonSchem(t),oS(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const m=aS(t);if(m.length>0){const E=m.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let l;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new zo(ks.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,l,u,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>Ya(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&Tx(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Ex(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var t,i,o;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ya(u)){const f=u,m=await f.tool();for(const p of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var t,i,o;const l=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:rS;let u=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,v,E){var A,w;return Ha(this,arguments,function*(){for(var L,F,B,$;f<l;){u&&(f++,u=!1);const de=yield _t(p.processParamsMaybeAddMcpUsage(E)),ce=yield _t(p.generateContentStreamInternal(de)),D=[],N=[];try{for(var X=!0,W=(F=void 0,Su(ce)),ae;ae=yield _t(W.next()),L=ae.done,!L;X=!0){$=ae.value,X=!1;const R=$;if(yield yield _t(R),R.candidates&&(!((A=R.candidates[0])===null||A===void 0)&&A.content)){N.push(R.candidates[0].content);for(const k of(w=R.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(f<l&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(k.functionCall.name)){const P=yield _t(v.get(k.functionCall.name).callTool([k.functionCall]));D.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(R){F={error:R}}finally{try{!X&&!L&&(B=W.return)&&(yield _t(B.call(W)))}finally{if(F)throw F.error}}if(D.length>0){u=!0;const R=new lu;R.candidates=[{content:{role:"user",parts:D}}],yield yield _t(R);const k=[];k.push(...N),k.push({role:"user",parts:D});const P=hi(E.contents).concat(k);E.contents=P}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=eS(this.apiClient,e);return f=fe("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=nS(v),A=new lu;return Object.assign(A,E),A})}else{const p=ZE(this.apiClient,e);return f=fe("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=tS(v),A=new lu;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=eS(this.apiClient,e);return f=fe("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Ha(this,arguments,function*(){var A,w,L,F;try{for(var B=!0,$=Su(E),X;X=yield _t($.next()),A=X.done,!A;B=!0){F=X.value,B=!1;const W=F,ae=nS(yield _t(W.json()));ae.sdkHttpResponse={headers:W.headers};const de=new lu;Object.assign(de,ae),yield yield _t(de)}}catch(W){w={error:W}}finally{try{!B&&!A&&(L=$.return)&&(yield _t(L.call($)))}finally{if(w)throw w.error}}})})}else{const p=ZE(this.apiClient,e);return f=fe("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return Ha(this,arguments,function*(){var A,w,L,F;try{for(var B=!0,$=Su(E),X;X=yield _t($.next()),A=X.done,!A;B=!0){F=X.value,B=!1;const W=F,ae=tS(yield _t(W.json()));ae.sdkHttpResponse={headers:W.headers};const de=new lu;Object.assign(de,ae),yield yield _t(de)}}catch(W){w={error:W}}finally{try{!B&&!A&&(L=$.return)&&(yield _t(L.call($)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=LU(this.apiClient,e);return f=fe("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=qU(v),A=new UE;return Object.assign(A,E),A})}else{const p=UU(this.apiClient,e);return f=fe("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=OU(v),A=new UE;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=$U(this.apiClient,e);return f=fe("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=WU(v),A=new LE;return Object.assign(A,E),A})}else{const p=QU(this.apiClient,e);return f=fe("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=XU(v),A=new LE;return Object.assign(A,E),A})}}async editImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=DU(this.apiClient,e);return l=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=PU(m),v=new B2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=$L(this.apiClient,e);return l=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=XL(m),v=new z2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=ML(this.apiClient,e);return l=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=DL(m),v=new G2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=OL(this.apiClient,e);return l=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=qL(m),v=new H2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=pL(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Mp(v))}else{const p=mL(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Np(v))}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=CL(this.apiClient,e);return f=fe("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=wL(v),A=new OE;return Object.assign(A,E),A})}else{const p=AL(this.apiClient,e);return f=fe("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=xL(v),A=new OE;return Object.assign(A,E),A})}}async update(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=jL(this.apiClient,e);return f=fe("{model}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Mp(v))}else{const p=KL(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Np(v))}}async delete(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=RU(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=NU(v),A=new qE;return Object.assign(A,E),A})}else{const p=IU(this.apiClient,e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=bU(v),A=new qE;return Object.assign(A,E),A})}}async countTokens(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=CU(this.apiClient,e);return f=fe("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=wU(v),A=new FE;return Object.assign(A,E),A})}else{const p=AU(this.apiClient,e);return f=fe("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=xU(v),A=new FE;return Object.assign(A,E),A})}}async computeTokens(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=gU(this.apiClient,e);return l=fe("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=yU(m),v=new Y2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=sL(this.apiClient,e);return f=fe("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=nL(v),A=new tf;return Object.assign(A,E),A})}else{const p=iL(this.apiClient,e);return f=fe("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const E=tL(v),A=new tf;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H4 extends Us{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=V2(e);return f=fe("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const p=k2(e);return f=fe("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=I2(e);return l=fe("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y4(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function J4(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>tO(l))),h(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function K4(n,e,t){const i={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=d(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&h(t,["bidiGenerateContentSetup"],eO(n,f));const m=d(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&h(t,["fieldMask"],m),i}function j4(n,e){const t={},i=d(e,["config"]);return i!=null&&h(t,["config"],K4(n,i,t)),t}function Q4(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function $4(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function X4(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function W4(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Z4(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Pg(E));const A=d(n,["thinkingConfig"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","thinkingConfig"],A);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const L=d(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],J4(hn(L)));const F=d(n,["tools"]);if(e!==void 0&&F!=null){let ce=al(F);Array.isArray(ce)&&(ce=ce.map(D=>iO(ol(D)))),h(e,["setup","tools"],ce)}const B=d(n,["sessionResumption"]);e!==void 0&&B!=null&&h(e,["setup","sessionResumption"],nO(B));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=d(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const W=d(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&h(e,["setup","realtimeInputConfig"],W);const ae=d(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const de=d(n,["proactivity"]);return e!==void 0&&de!=null&&h(e,["setup","proactivity"],de),t}function eO(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["setup","model"],Ze(n,i));const o=d(e,["config"]);return o!=null&&h(t,["config"],Z4(o,t)),t}function tO(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],Q4(l));const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],$4(u));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],Y4(m));const p=d(n,["text"]);p!=null&&h(e,["text"],p);const v=d(n,["thought"]);v!=null&&h(e,["thought"],v);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=d(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function nO(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iO(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],X4(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],W4(m));const p=d(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sO(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function rO(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=sO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(p=>u.includes(p)?`generationConfig.${p}`:p));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class oO extends Us{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=j4(this.apiClient,e);l=fe("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const m=rO(f,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aO(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function lO(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&aO(i,e),e}function uO(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function cO(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function dO(n){const e={},t=d(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&cO(i,e),e}function fO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const o=d(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hO extends Us{constructor(e){super(),this.apiClient=e,this.list=async t=>new zo(ks.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uO(e);return l=fe("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lO(e);o=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dO(e);return l=fe("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=fO(m),v=new J2;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mO extends Us{constructor(e,t=new hO(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new zo(ks.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=s4(e);return l=fe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=a4(e);return l=fe("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=o4(e);o=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=h4(e);return l=fe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=m4(m),v=new K2;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=p4(e);return l=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=g4(m),v=new j2;return Object.assign(v,p),v})}}async importFile(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=c4(e);return l=fe("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=u4(m),v=new Rg;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pO(n,e){const t={},i=d(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function gO(n,e){const t={},i=d(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function yO(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function _O(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function vO(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&h(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(n,["learningRateMultiplier"]);if(u!=null&&h(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(n,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function TO(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec"],uS(w))}else if(o==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec"],uS(w))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=d(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(m==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let p=d(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(p==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const A=d(n,["beta"]);return e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),i}function EO(n,e){const t={},i=d(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&DO(l);const u=d(n,["config"]);return u!=null&&vO(u,t),t}function SO(n,e){const t={},i=d(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&PO(l,t,e);const u=d(n,["config"]);return u!=null&&TO(u,t,e),t}function AO(n,e){const t={},i=d(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function CO(n,e){const t={},i=d(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function xO(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),i}function wO(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),i}function IO(n,e){const t={},i=d(n,["config"]);return i!=null&&xO(i,t),t}function RO(n,e){const t={},i=d(n,["config"]);return i!=null&&wO(i,t),t}function bO(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=d(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Sx(f))),h(t,["tuningJobs"],u)}return t}function NO(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=d(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Pp(f))),h(t,["tuningJobs"],u)}return t}function MO(n,e){const t={},i=d(n,["name"]);i!=null&&h(t,["model"],i);const o=d(n,["name"]);return o!=null&&h(t,["endpoint"],o),t}function DO(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),h(t,["examples","examples"],o)}return t}function PO(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Sx(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&h(t,["name"],o);const l=d(n,["state"]);l!=null&&h(t,["state"],nx(l));const u=d(n,["createTime"]);u!=null&&h(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["tuningTask","completeTime"]);m!=null&&h(t,["endTime"],m);const p=d(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=d(n,["description"]);v!=null&&h(t,["description"],v);const E=d(n,["baseModel"]);E!=null&&h(t,["baseModel"],E);const A=d(n,["_self"]);return A!=null&&h(t,["tunedModel"],MO(A)),t}function Pp(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&h(t,["name"],o);const l=d(n,["state"]);l!=null&&h(t,["state"],nx(l));const u=d(n,["createTime"]);u!=null&&h(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(t,["endTime"],m);const p=d(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=d(n,["error"]);v!=null&&h(t,["error"],v);const E=d(n,["description"]);E!=null&&h(t,["description"],E);const A=d(n,["baseModel"]);A!=null&&h(t,["baseModel"],A);const w=d(n,["tunedModel"]);w!=null&&h(t,["tunedModel"],w);const L=d(n,["preTunedModel"]);L!=null&&h(t,["preTunedModel"],L);const F=d(n,["supervisedTuningSpec"]);F!=null&&h(t,["supervisedTuningSpec"],F);const B=d(n,["preferenceOptimizationSpec"]);B!=null&&h(t,["preferenceOptimizationSpec"],B);const $=d(n,["tuningDataStats"]);$!=null&&h(t,["tuningDataStats"],$);const X=d(n,["encryptionSpec"]);X!=null&&h(t,["encryptionSpec"],X);const W=d(n,["partnerModelTuningSpec"]);W!=null&&h(t,["partnerModelTuningSpec"],W);const ae=d(n,["customBaseModel"]);ae!=null&&h(t,["customBaseModel"],ae);const de=d(n,["experiment"]);de!=null&&h(t,["experiment"],de);const ce=d(n,["labels"]);ce!=null&&h(t,["labels"],ce);const D=d(n,["outputUri"]);D!=null&&h(t,["outputUri"],D);const N=d(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const R=d(n,["serviceAccount"]);R!=null&&h(t,["serviceAccount"],R);const k=d(n,["tunedModelDisplayName"]);k!=null&&h(t,["tunedModelDisplayName"],k);const P=d(n,["veoTuningSpec"]);return P!=null&&h(t,["veoTuningSpec"],P),t}function kO(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&h(t,["name"],o);const l=d(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=d(n,["done"]);u!=null&&h(t,["done"],u);const f=d(n,["error"]);return f!=null&&h(t,["error"],f),t}function uS(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&h(t,["validationDatasetUri"],i);const o=d(n,["vertexDatasetResource"]);return o!=null&&h(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VO extends Us{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(ks.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:wp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=CO(e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>Pp(v))}else{const p=AO(e);return f=fe("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>Sx(v))}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=RO(e);return f=fe("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=NO(v),A=new BE;return Object.assign(A,E),A})}else{const p=IO(e);return f=fe("tunedModels",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=bO(v),A=new BE;return Object.assign(A,E),A})}}async cancel(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=gO(e);return f=fe("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=_O(v),A=new zE;return Object.assign(A,E),A})}else{const p=pO(e);return f=fe("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=yO(v),A=new zE;return Object.assign(A,E),A})}}async tuneInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=SO(e,e);return l=fe("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>Pp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EO(e);return l=fe("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>kO(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UO{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const LO=1024*1024*8,OO=3,qO=1e3,FO=2,sf="x-goog-upload-status";async function BO(n,e,t){var i;const o=await Ax(n,e,t),l=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[sf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function zO(n,e,t){var i;const o=await Ax(n,e,t),l=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[sf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=$C(l),f=new bg;return Object.assign(f,u),f}async function Ax(n,e,t){var i,o;let l=0,u=0,f=new Ip(new Response),m="upload";for(l=n.size;u<l;){const p=Math.min(LO,l-u),v=n.slice(u,u+p);u+p>=l&&(m+=", finalize");let E=0,A=qO;for(;E<OO&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[sf]));)E++,await HO(A),A=A*FO;if(u+=p,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[sf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function GO(n){return{size:n.size,type:n.type}}function HO(n){return new Promise(e=>setTimeout(e,n))}class YO{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BO(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zO(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await GO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JO{create(e,t,i){return new KO(e,t,i)}}class KO{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cS="x-goog-api-key";class jO{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(cS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QO="gl-node/";class $O{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=x2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new jO(this.apiKey);this.apiClient=new C4({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:QO+"web",uploader:new YO,downloader:new UO}),this.models=new G4(this.apiClient),this.live=new L4(this.apiClient,o,new JO),this.batches=new eV(this.apiClient),this.chats=new VV(this.models,this.apiClient),this.caches=new DV(this.apiClient),this.files=new YV(this.apiClient),this.operations=new H4(this.apiClient),this.authTokens=new oO(this.apiClient),this.tunings=new VO(this.apiClient),this.fileSearchStores=new mO(this.apiClient)}}const ft=()=>Math.random().toString(36).substring(2,9),Ym=[{id:ft(),text:"Ps, para que os quero, se tenho asas para voar?",author:"Frida Kahlo",category:"AUTOAMOR"},{id:ft(),text:"A beleza comea no momento em que voc decide ser voc mesma.",author:"Coco Chanel",category:"AUTOESTIMA"},{id:ft(),text:"Voc  suficiente exatamente como .",author:"Meghan Markle",category:"AUTOAMOR"},{id:ft(),text:"No h nada mais raro, nem mais bonito, do que uma mulher sendo ela mesma.",author:"Desconhecida",category:"AUTOESTIMA"},{id:ft(),text:"Apaixone-se por si mesma todos os dias.",author:"Desconhecida",category:"AUTOAMOR"},{id:ft(),text:"Eu no sou descendente de escravos. Eu descendo de seres humanos que foram escravizados.",author:"Makota Valdina",category:"FORA"},{id:ft(),text:"No pea permisso para liderar. Lidere.",author:"Kamala Harris",category:"LIDERANA"},{id:ft(),text:"O ato mais corajoso  pensar por voc mesma. Em voz alta.",author:"Coco Chanel",category:"CARREIRA"},{id:ft(),text:"Voc pode ter tudo. S no pode ter tudo ao mesmo tempo.",author:"Oprah Winfrey",category:"CARREIRA"},{id:ft(),text:"Sua voz  sua ferramenta mais poderosa.",author:"Malala Yousafzai",category:"LIDERANA"},{id:ft(),text:"A intuio  a sabedoria da alma sussurrando.",author:"Desconhecida",category:"INTUIO"},{id:ft(),text:"Respeite seus ciclos. Voc no  uma mquina,  natureza.",author:"Desconhecida",category:"CICLOS"},{id:ft(),text:"H uma fora selvagem dentro de toda mulher que clama por liberdade.",author:"Clarissa Pinkola Ests",category:"SAGRADO FEMININO"},{id:ft(),text:"Eu sou minha prpria musa.",author:"Frida Kahlo",category:"INTUIO"},{id:ft(),text:"Voc pode me fuzilar com palavras... mas ainda assim, como o ar, eu vou me levantar.",author:"Maya Angelou",category:"RESILINCIA"},{id:ft(),text:"A liberdade  pouco. O que eu desejo ainda no tem nome.",author:"Clarice Lispector",category:"SUPERAO"},{id:ft(),text:"Eu sobrevivo porque o fogo dentro de mim queima mais forte que o fogo ao redor.",author:"Desconhecida",category:"FORA"},{id:ft(),text:"Transformei minhas feridas em sabedoria.",author:"Oprah Winfrey",category:"SUPERAO"},{id:ft(),text:"No existe me perfeita. Existem milhes de maneiras de ser uma boa me.",author:"Jill Churchill",category:"MATERNIDADE"},{id:ft(),text:"Cuidar de si mesma  parte de cuidar da sua famlia.",author:"Desconhecida",category:"MATERNIDADE"},{id:ft(),text:"Voc est criando o futuro. Respire fundo, me.",author:"Desconhecida",category:"FAMLIA"},{id:ft(),text:"A felicidade  um perfume que voc no pode passar nos outros sem conseguir algumas gotas em si mesma.",author:"Desconhecida",category:"FELICIDADE"},{id:ft(),text:"Gratido transforma o que temos em suficiente.",author:"Melody Beattie",category:"GRATIDO"},{id:ft(),text:"Renda-se, como eu me rendi. Mergulhe no que voc no conhece como eu mergulhei.",author:"Clarice Lispector",category:"ESPIRITUALIDADE"},{id:ft(),text:"Quando uma mulher ajuda outra, ambas se curam.",author:"Desconhecida",category:"SORORIDADE"},{id:ft(),text:"Cercada de mulheres fortes, me tornei uma.",author:"Desconhecida",category:"AMIZADE"},{id:ft(),text:"O sucesso de outra mulher no apaga o seu.",author:"Desconhecida",category:"SORORIDADE"}],rf=(n,e=10)=>{let t=n.length>0?Ym.filter(o=>o.category&&n.some(l=>l.toUpperCase().includes(o.category.toUpperCase())||o.category.toUpperCase().includes(l.toUpperCase()))):Ym;if(t.length<e){const o=Ym.filter(l=>!t.includes(l));t=[...t,...o]}return t.sort(()=>.5-Math.random()).slice(0,e).map(o=>({...o,id:`local-${Math.random().toString(36).substring(2,9)}`,liked:!1,imageUrl:"",backgroundImage:""}))},Yu=new $O({apiKey:"PLACEHOLDER_API_KEY"});class Au extends Error{constructor(e,t="RESOURCE_EXHAUSTED"){super(e),this.status=t,this.name="QuotaExceededError"}}const Jm=rf([],5),Ju="gemini-2.5-flash",XO=n=>new Promise(e=>setTimeout(e,n)),WO=async()=>{var l;const e=`
        Atue como uma mentora de sabedoria feminina.
        Gere a "Motivao do Dia" para hoje, ${new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}.
        
        DIRETRIZES:
        1. **PBLICO:** Mulheres modernas (mes, profissionais, estudantes).
        2. **TOM:** Acolhedor, forte, intuitivo e empoderador.
        3. **ORIGINALIDADE:** Evite clichs. Fale sobre fora interior, ciclos, intuio ou autoconfiana.
        4. **AUTORAS:** Priorize citaes de mulheres inspiradoras (famosas ou provrbios).
        5. **LINGUAGEM:** Use o gnero feminino (ex: "guerreira", "pronta", "segura").
    `,t={type:mt.OBJECT,properties:{text:{type:mt.STRING,description:"A citao inspiradora (mx 20 palavras)."},author:{type:mt.STRING,description:"O nome da autora."},category:{type:mt.STRING,description:"Uma palavra-chave em maisculo (ex: AUTOESTIMA)."}},required:["text","author","category"]};let i=0;const o=3;for(;i<o;)try{const u=await Yu.models.generateContent({model:Ju,contents:e,config:{responseMimeType:"application/json",responseSchema:t,temperature:.9}}),f=JSON.parse(u.text||"{}");return{text:f.text||"A beleza comea no momento em que voc decide ser voc mesma.",author:f.author||"Coco Chanel",category:((l=f.category)==null?void 0:l.toUpperCase())||"AUTOESTIMA",imageUrl:""}}catch(u){i++;const f=(u==null?void 0:u.message)||JSON.stringify(u);if(f.includes("429")||f.includes("Quota")||f.includes("RESOURCE_EXHAUSTED"))throw new Au("Quota exceeded.");if(console.warn(`Attempt ${i} failed for daily motivation:`,u),i>=o){const m=rf([],1)[0];return{text:(m==null?void 0:m.text)||"Ps, para que os quero, se tenho asas para voar?",author:(m==null?void 0:m.author)||"Frida Kahlo",category:(m==null?void 0:m.category)||"LIBERDADE",imageUrl:""}}await XO(1e3)}return null},N3=async n=>{const e=n.appGoals||[],t=n.improvementAreas||[],i=`
        Atue como uma mentora de vida para mulheres. Crie um "Foco Dirio" para ${n.name}.
        Humor atual: ${n.feeling||"Neutro"}.
        Objetivos: ${[...e,...t].join(", ")}.
        
        Gere uma micro-ao de autocuidado ou um mantra de empoderamento curto para hoje.
        Use linguagem feminina.
    `,o={type:mt.OBJECT,properties:{title:{type:mt.STRING,description:"Ttulo curto (mx 3 palavras)"},text:{type:mt.STRING,description:"Descrio direta e acolhedora (mx 15 palavras)"}},required:["title","text"]};try{const l=await Yu.models.generateContent({model:Ju,contents:i,config:{responseMimeType:"application/json",responseSchema:o}});return JSON.parse(l.text||"{}")}catch{return{title:"Seja Gentil Consigo",text:"Respire fundo. Voc est fazendo o melhor que pode."}}},Km=async(n,e,t,i)=>{const o=n.topics||[];if(t&&(!e||e.length===0))return console.log("Instant Load: Serving local quotes"),rf(i?[i]:o,12);const l=e?e.slice(-20).map(v=>v.text.substring(0,15)).join(" | "):"",u=i||(o.length>0?o.join(", "):"Autoestima, Fora, Mulher"),m=`
        ${`
        Voc  uma curadora de sabedoria feminina.
        Usuria: ${n.name}, Humor: ${n.feeling||"Neutro"}.
        Tpicos Focais: ${u}.
        
        ESTILO DE CURADORIA:
        1. **FEMININO & FORTE:** Frases que empoderam, acolhem e validam a experincia da mulher.
        2. **PROFUNDIDADE:** Busque citaes sobre ciclos, intuio, maternidade, liderana feminina, sororidade.
        3. **AUTORAS:** Priorize mulheres (escritoras, filsofas, lderes, artistas).
        4. **IDIOMA:** Portugus do Brasil impecvel.
        5. **FORMATO:** Gere um lote de 8 CITAES.
    `}
        Gere 8 citaes esteticamente agradveis e impactantes para mulheres.
        No repita estes incios: [${l}]
    `,p={type:mt.ARRAY,items:{type:mt.OBJECT,properties:{text:{type:mt.STRING,description:"O texto da citao."},author:{type:mt.STRING,description:"Autora (nome curto).",nullable:!0},category:{type:mt.STRING,description:"Categoria breve.",nullable:!0}},required:["text"]}};try{const v=await Yu.models.generateContent({model:Ju,contents:m,config:{responseMimeType:"application/json",responseSchema:p,temperature:1}});return JSON.parse(v.text||"[]").map(A=>({id:Math.random().toString(36).substring(2,12),text:A.text,author:A.author||"Desconhecida",category:A.category||"Inspirao",liked:!1,imageUrl:"",backgroundImage:""}))}catch(v){console.warn("Error generating quotes (handling fallback):",v);const E=(v==null?void 0:v.message)||JSON.stringify(v);if(E.includes("429")||E.includes("Quota")||E.includes("RESOURCE_EXHAUSTED"))throw new Au("Cota excedida");return rf(i?[i]:o,5)}},M3=async n=>{const e=`
        Citao: "${n.text}".
        Pblico: Mulheres.
        Crie 3 perguntas de introspeco profundas, curtas e pessoais para a usuria refletir sobre sua vida, emoes ou poder.
        Use um tom gentil e provocativo (no bom sentido).
    `,t={type:mt.ARRAY,items:{type:mt.STRING}};try{const i=await Yu.models.generateContent({model:Ju,contents:e,config:{responseMimeType:"application/json",responseSchema:t}});return JSON.parse(i.text||"[]")}catch{return["Como isso ressoa no seu corao?","O que sua intuio diz sobre isso?","Como aplicar isso hoje?"]}},D3=async(n,e,t)=>{const i=`
        Atue como uma mentora sbia, mstica e acolhedora.
        Citao: "${n.text}".
        Reflexo escolhida pela usuria: "${e}".
        Usuria: ${t.name}.
        
        Fornea uma resposta estruturada em 3 partes curtas.
        Use formatao **negrito** (asteriscos) apenas para palavras-chave muito importantes (mximo 1 ou 2 vezes).
        
        1. INSIGHT: Uma reflexo profunda sobre o tema (2 frases).
        2. AO: Um micro-hbito prtico para fazer hoje (1 frase).
        3. MANTRA: Uma afirmao curta e poderosa em primeira pessoa.
    `,o={type:mt.OBJECT,properties:{insight:{type:mt.STRING,description:"A sabedoria ou reflexo."},action:{type:mt.STRING,description:"Uma ao prtica."},mantra:{type:mt.STRING,description:"Uma afirmao curta."}},required:["insight","action","mantra"]};try{const l=await Yu.models.generateContent({model:Ju,contents:i,config:{responseMimeType:"application/json",responseSchema:o}});return JSON.parse(l.text||"{}")}catch{return{insight:"Confie no seu processo, querida. A resposta que voc busca j est dentro de voc.",action:"Tire 5 minutos hoje para respirar e se ouvir.",mantra:"Eu sou suficiente e minha intuio me guia."}}},ZO=["Excelente","Bom","Normal","Mau","Terrvel"],e3=({onComplete:n})=>{const{userData:e}=Vn(),[t,i]=ee.useState(null),o=()=>{t&&n(t)};return T.jsx("div",{className:"bg-gray-50 h-full w-full text-gray-800 flex flex-col items-center overflow-hidden",children:T.jsx("div",{className:"w-full h-full flex-grow flex flex-col animate-slide-in-up",children:T.jsx(Tn,{title:"Humor do Dia",subtitle:`Como voc est se sentindo hoje, ${(e==null?void 0:e.name)||"voc"}?`,footer:T.jsx(Bo,{onClick:o,disabled:!t,text:"Atualizar Humor"}),children:T.jsx("div",{role:"radiogroup","aria-label":"Seu humor hoje",className:"space-y-3 w-full",children:ZO.map(l=>T.jsxs("button",{onClick:()=>i(l),className:`w-full p-4 rounded-xl text-left transition-all duration-200 flex items-center justify-between font-medium text-lg border-2 ${t===l?"bg-violet-500 border-violet-500 text-white shadow-lg":"bg-white border-gray-200 hover:border-gray-300 text-gray-800"}`,role:"radio","aria-checked":t===l,children:[T.jsx("span",{children:l}),t===l&&T.jsx(dn,{className:"text-2xl text-white","aria-hidden":"true"})]},l))})})})})},t3=({text:n="Pensando",className:e=""})=>T.jsx("div",{className:`flex flex-col justify-center items-center text-center text-gray-600 ${e}`,role:"status","aria-live":"polite",children:T.jsxs("div",{className:"relative",children:[T.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:[n,"..."]}),T.jsxs("div",{className:"flex space-x-2 justify-center","aria-hidden":"true",children:[T.jsx("span",{className:"thinking-dot",style:{animationDelay:"0s"}}),T.jsx("span",{className:"thinking-dot",style:{animationDelay:"0.2s"}}),T.jsx("span",{className:"thinking-dot",style:{animationDelay:"0.4s"}})]})]})}),n3=({active:n})=>{if(!n)return null;const e=Array.from({length:15});return T.jsx("div",{className:"absolute inset-0 pointer-events-none","aria-hidden":"true",children:e.map((t,i)=>{const o=(Math.random()-.5)*150,l=(Math.random()-.5)*150,u=Math.random()*5+2,f=Math.random()*.5+.5,m=Math.random()*.2;return T.jsx("div",{className:"particle",style:{"--x":`${o}px`,"--y":`${l}px`,width:`${u}px`,height:`${u}px`,animationDuration:`${f}s`,animationDelay:`${m}s`,position:"absolute",top:"50%",left:"50%",background:"#ef4444",borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`explode ${f}s ease-out ${m}s forwards`}},i)})})},i3=ee.memo(({quote:n,onDoubleTap:e})=>{const t=ee.useRef(0),i=l=>{const u=Date.now();u-t.current<300&&e(n.id),t.current=u},o=l=>{const u=l.length;return u<40?"text-4xl md:text-6xl font-bold tracking-tight leading-tight":u<80?"text-3xl md:text-5xl font-bold tracking-normal leading-snug":u<140?"text-2xl md:text-4xl font-semibold leading-relaxed":"text-xl md:text-3xl font-medium leading-relaxed"};return T.jsxs("article",{className:"relative w-full h-full flex-shrink-0 snap-start flex flex-col justify-center items-center p-8 md:p-12 text-center text-white overflow-hidden aurora-background",onTouchEnd:i,onClick:i,"aria-label":`Citao de ${n.author}`,children:[T.jsx("div",{className:"absolute inset-0 opacity-[0.06] pointer-events-none bg-noise z-0 mix-blend-overlay"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/90 z-0 pointer-events-none"}),T.jsxs("div",{className:"relative z-10 max-w-4xl flex flex-col items-center justify-center transform transition-all duration-700 ease-out animate-slide-in-up pb-24 md:pb-0",children:[T.jsx("h1",{className:`${o(n.text)} text-white font-sora drop-shadow-2xl px-2 md:px-4`,style:{textShadow:"0 4px 40px rgba(0,0,0,0.5)",textWrap:"balance"},children:n.text}),T.jsx("div",{className:"w-16 h-[2px] bg-white/30 rounded-full my-10"}),n.author&&T.jsx("p",{className:"text-sm md:text-base font-bold text-white/90 tracking-[0.2em] uppercase font-sora drop-shadow-md",children:n.author})]})]})}),s3=({quotes:n,isLoading:e,onLike:t,onShare:i,onExplore:o,onRead:l,loadMore:u,likedQuoteId:f,onRefresh:m})=>{const p=ee.useRef(null),v=ee.useRef(null),E=ee.useRef(!1),[A,w]=ee.useState(0),[L,F]=ee.useState(!1),[B,$]=ee.useState(0),X=ee.useRef(0),W=ee.useRef(!1),ae=80;ee.useEffect(()=>{const P=new IntersectionObserver(U=>{U[0].isIntersecting&&!e&&!E.current&&(E.current=!0,u().finally(()=>{E.current=!1}))},{rootMargin:"0px 0px 150% 0px",threshold:.01});return v.current&&P.observe(v.current),()=>P.disconnect()},[e,u]),ee.useEffect(()=>{const P=p.current;if(!P)return;const U=()=>{const M=Math.round(P.scrollTop/P.clientHeight);M!==A&&(w(M),l&&l())};return P.addEventListener("scroll",U,{passive:!0}),()=>P.removeEventListener("scroll",U)},[A,l]);const de=P=>{var U;((U=p.current)==null?void 0:U.scrollTop)===0&&!L&&(X.current=P.touches[0].clientY,W.current=!0)},ce=P=>{if(!W.current)return;const U=P.touches[0].clientY-X.current;U>0?$(Math.min(U*.4,ae+60)):(W.current=!1,$(0))},D=()=>{W.current&&(W.current=!1,B>=ae?(F(!0),m().finally(()=>{F(!1),$(0)})):$(0))},N=n[A],R=f===(N==null?void 0:N.id),k=ee.useCallback(P=>{const U=n.find(M=>M.id===P);U&&t(P,U.liked)},[n,t]);return T.jsxs("section",{className:"relative w-full h-full bg-black overflow-hidden",children:[T.jsx("div",{className:"absolute top-24 left-0 right-0 z-30 flex justify-center items-center pointer-events-none transition-transform duration-300 ease-out",style:{transform:`translateY(${B>0?B*.5:-100}px)`,opacity:B>0?1:0},children:T.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-full p-3 ring-1 ring-white/20 shadow-xl flex items-center justify-center",children:L?T.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent"}):T.jsx(FP,{className:"text-white text-2xl",style:{transform:`rotate(${B*3}deg)`}})})}),T.jsxs("div",{ref:p,className:"relative z-10 w-full h-full snap-y snap-mandatory overflow-y-auto scrollbar-hide touch-pan-y",onTouchStart:de,onTouchMove:ce,onTouchEnd:D,children:[n.map((P,U)=>T.jsx(i3,{quote:P,isActive:U===A,onDoubleTap:k},P.id)),(e||n.length===0)&&T.jsx("div",{className:"w-full h-full flex-shrink-0 snap-start flex flex-col justify-center items-center bg-black",children:T.jsx(t3,{text:n.length===0?"Preparando inspirao":"Carregando mais",className:"text-violet-200"})}),T.jsx("div",{ref:v,className:"h-1 w-full pointer-events-none"})]}),T.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-40 pointer-events-none transition-all duration-500 ease-out flex items-center justify-center ${R?"scale-125 opacity-100":"scale-50 opacity-0"}`,children:T.jsx(Cp,{filled:!0,className:"text-[120px] text-white drop-shadow-2xl filter shadow-red-500"})}),N&&T.jsxs("div",{className:"absolute bottom-10 left-0 right-0 z-30 flex justify-center items-end gap-8 pb-[env(safe-area-inset-bottom)] pointer-events-none",children:[T.jsxs("div",{className:"flex flex-col items-center gap-2 pointer-events-auto transform transition-transform hover:-translate-y-1",children:[T.jsxs("button",{onClick:()=>o(N),className:"group relative w-14 h-14 rounded-full bg-black/40 backdrop-blur-md border border-white/10 flex items-center justify-center transition-all duration-300 active:scale-90 hover:bg-violet-900/40 hover:border-violet-500/50 hover:shadow-[0_0_20px_rgba(139,92,246,0.3)]","aria-label":"Explorar",children:[T.jsx(Ro,{className:"text-[26px] text-white/90 group-hover:text-white transition-colors"}),T.jsx("div",{className:"absolute inset-0 rounded-full border border-white/5 opacity-0 group-hover:opacity-100 transition-opacity"})]}),T.jsx("span",{className:"text-[10px] font-bold tracking-widest uppercase drop-shadow-md transition-colors text-white/50 group-hover:text-violet-300",children:"Explorar"})]}),T.jsx("div",{className:"flex flex-col items-center gap-2 pointer-events-auto -mb-2 transform transition-transform hover:-translate-y-1",children:T.jsxs("button",{onClick:()=>t(N.id,N.liked),className:`relative group w-20 h-20 rounded-full flex items-center justify-center transition-all duration-300 shadow-2xl active:scale-90 ${N.liked?"bg-gradient-to-tr from-red-600 to-pink-500 shadow-red-500/50 scale-105":"bg-black/50 backdrop-blur-xl border border-white/10 hover:border-white/30"}`,"aria-label":"Curtir",children:[T.jsx(Cp,{filled:N.liked,className:`text-[42px] mt-[2px] transition-all duration-300 ${N.liked?"text-white":"text-white/90 group-hover:text-white"} ${R?"animate-pop":""}`}),!N.liked&&T.jsx("div",{className:"absolute inset-0 rounded-full border border-white/5 animate-ping opacity-20"}),T.jsx(n3,{active:!!R})]})}),T.jsxs("div",{className:"flex flex-col items-center gap-2 pointer-events-auto transform transition-transform hover:-translate-y-1",children:[T.jsxs("button",{onClick:()=>i(N),className:"group relative w-14 h-14 rounded-full bg-black/40 backdrop-blur-md border border-white/10 flex items-center justify-center transition-all duration-300 hover:bg-green-900/40 hover:border-green-500/50 hover:shadow-[0_0_20px_rgba(34,197,94,0.3)] active:scale-90","aria-label":"Compartilhar",children:[T.jsx(MP,{className:"text-[26px] ml-[2px] mt-[1px] text-white/90 group-hover:text-white transition-colors"}),T.jsx("div",{className:"absolute inset-0 rounded-full border border-white/5 opacity-0 group-hover:opacity-100 transition-opacity"})]}),T.jsx("span",{className:"text-[10px] font-bold tracking-widest uppercase text-white/50 drop-shadow-md group-hover:text-green-300 transition-colors",children:"Postar"})]})]})]})},r3=({onLogin:n,onSignup:e,onBack:t,onAdminAccess:i})=>{const[o,l]=ee.useState("login"),[u,f]=ee.useState({name:"",phone:"",cpf:"",email:"",password:""}),[m,p]=ee.useState(!0),[v,E]=ee.useState(!1),[A,w]=ee.useState(null),[L,F]=ee.useState(!1),[B,$]=ee.useState(!1),[X,W]=ee.useState({hasUpper:!1,hasLower:!1,hasNumber:!1,hasSpecial:!1,hasLength:!1});ee.useEffect(()=>{const M=u.password;W({hasUpper:/[A-Z]/.test(M),hasLower:/[a-z]/.test(M),hasNumber:/[0-9]/.test(M),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test(M),hasLength:M.length>=8})},[u.password]),ee.useEffect(()=>{const M=ae(u.cpf);E(M)},[u.cpf]);const ae=M=>{const Se=M.replace(/[^\d]+/g,"");if(Se.length!==11||/^(\d)\1+$/.test(Se))return!1;let Ie=0,J;for(let re=1;re<=9;re++)Ie=Ie+parseInt(Se.substring(re-1,re))*(11-re);if(J=Ie*10%11,(J===10||J===11)&&(J=0),J!==parseInt(Se.substring(9,10)))return!1;Ie=0;for(let re=1;re<=10;re++)Ie=Ie+parseInt(Se.substring(re-1,re))*(12-re);return J=Ie*10%11,(J===10||J===11)&&(J=0),J===parseInt(Se.substring(10,11))},de=M=>{const Se=M.replace(/\D/g,""),Ie={0:"(",2:") ",7:"-"};let J="";for(let re=0;re<Se.length;re++)Ie[re]&&re<11&&(J+=Ie[re]),J+=Se[re];return J.substring(0,15)},ce=M=>M.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),D=M=>{let{name:Se,value:Ie}=M.target;Se==="phone"?Ie=de(Ie):Se==="cpf"&&(Ie=ce(Ie)),f({...u,[Se]:Ie}),A&&w(null)},N=async M=>{M.preventDefault(),w(null),F(!0);try{o==="login"?(await n({email:u.email,password:u.password,remember:m}),$(!0)):Object.values(X).every(Boolean)&&v&&(await e({name:u.name,email:u.email,password:u.password,phone:u.phone,cpf:u.cpf,remember:m}),$(!0))}catch{F(!1)}},R=()=>{alert("Login com Google requer configurao adicional no Firebase Console.")},k=!u.email||!u.password||L,P=!u.name||!u.email||!u.password||!v||!u.phone||!Object.values(X).every(Boolean)||L,U=()=>u.cpf.length===0||u.cpf.length<14?"border-white/10 focus:border-violet-500/50":v?"border-green-500/50 focus:border-green-500":"border-red-500/50 focus:border-red-500";return T.jsxs("div",{className:"fixed inset-0 z-50 bg-[#050505] text-white flex flex-col items-center justify-center p-4 overflow-hidden font-sans",children:[T.jsx("div",{className:"absolute inset-0 aurora-background opacity-60 pointer-events-none"}),T.jsx("div",{className:"absolute inset-0 bg-noise opacity-[0.05] pointer-events-none mix-blend-overlay"}),t&&!B&&T.jsx("button",{onClick:t,className:"absolute top-6 left-6 z-20 w-10 h-10 rounded-full bg-black/20 backdrop-blur-md border border-white/10 flex items-center justify-center hover:bg-black/40 transition-colors",children:T.jsx(If,{className:"text-2xl"})}),T.jsxs("div",{className:"relative z-10 w-full max-w-md h-full flex flex-col justify-center",children:[T.jsxs("div",{className:`flex flex-col items-center mb-6 flex-shrink-0 transition-all duration-500 ease-out ${B?"scale-0 opacity-0":"scale-100 opacity-100 animate-slide-in-up"}`,children:[T.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-violet-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-[0_0_30px_rgba(124,58,237,0.4)] mb-4 transform rotate-3",children:T.jsx(Ro,{className:"text-3xl text-white"})}),T.jsxs("h1",{className:"text-3xl font-bold font-sora tracking-tight",children:["Inspira",T.jsx("span",{className:"text-violet-500",children:"+"})]})]}),T.jsxs("div",{className:"bg-[#111]/80 backdrop-blur-xl border border-white/10 p-6 md:p-8 rounded-3xl shadow-2xl overflow-y-auto max-h-[75vh] scrollbar-hide relative transition-all duration-500 animate-slide-in-up",style:{animationDelay:"100ms"},children:[B&&T.jsxs("div",{className:"absolute inset-0 z-50 bg-[#111] flex flex-col items-center justify-center rounded-3xl animate-fade-in p-8 text-center",children:[T.jsx("div",{className:"w-24 h-24 rounded-full bg-green-500/20 flex items-center justify-center mb-6 animate-pop shadow-[0_0_30px_rgba(34,197,94,0.3)] border border-green-500/30",children:T.jsx(Zd,{className:"text-5xl text-green-500"})}),T.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-sora",children:o==="login"?"Entrando...":"Sucesso!"}),T.jsx("p",{className:"text-gray-400 mb-6 font-sans",children:o==="login"?"Preparando sua inspirao diria.":"Sua conta foi criada."}),T.jsxs("div",{className:"flex items-center gap-2 text-violet-400 text-sm font-bold animate-pulse",children:[T.jsx(Ro,{}),T.jsx("span",{children:"Entrando no app..."})]})]}),T.jsxs("div",{className:`transition-opacity duration-300 ${B?"opacity-0 pointer-events-none":"opacity-100"}`,children:[T.jsxs("div",{className:"flex p-1 bg-black/40 rounded-xl mb-6 relative border border-white/5 flex-shrink-0",children:[T.jsx("div",{className:`absolute top-1 bottom-1 w-[calc(50%-4px)] bg-violet-600 rounded-lg transition-all duration-300 ease-spring shadow-lg ${o==="login"?"left-1":"left-[calc(50%+4px)]"}`}),T.jsx("button",{onClick:()=>l("login"),className:`flex-1 py-3 text-sm font-bold relative z-10 transition-colors duration-300 ${o==="login"?"text-white":"text-gray-400 hover:text-white"}`,children:"Entrar"}),T.jsx("button",{onClick:()=>l("signup"),className:`flex-1 py-3 text-sm font-bold relative z-10 transition-colors duration-300 ${o==="signup"?"text-white":"text-gray-400 hover:text-white"}`,children:"Criar Conta"})]}),T.jsxs("form",{onSubmit:N,className:"space-y-4",children:[T.jsxs("div",{className:`space-y-4 overflow-hidden transition-all duration-500 ease-in-out ${o==="signup"?"max-h-[350px] opacity-100 translate-y-0":"max-h-0 opacity-0 -translate-y-4"}`,children:[T.jsxs("div",{className:"relative group",children:[T.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:T.jsx(wf,{className:"text-gray-500 group-focus-within:text-violet-400 transition-colors"})}),T.jsx("input",{type:"text",name:"name",value:u.name,onChange:D,placeholder:"Nome completo",required:o==="signup",tabIndex:o==="signup"?0:-1,className:"w-full py-3.5 pl-12 pr-4 bg-black/30 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500/50 focus:bg-black/50 transition-all text-sm md:text-base"})]}),T.jsxs("div",{className:"relative group",children:[T.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:T.jsx(PP,{className:`group-focus-within:text-violet-400 transition-colors ${v?"text-green-500":"text-gray-500"}`})}),T.jsx("input",{type:"text",name:"cpf",value:u.cpf,onChange:D,placeholder:"CPF",required:o==="signup",tabIndex:o==="signup"?0:-1,maxLength:14,className:`w-full py-3.5 pl-12 pr-4 bg-black/30 border rounded-xl text-white placeholder-gray-500 focus:outline-none focus:bg-black/50 transition-all text-sm md:text-base ${U()}`}),u.cpf.length===14&&!v&&o==="signup"&&T.jsx("div",{className:"absolute right-3 top-3.5 text-red-500 animate-pulse",children:T.jsx(Ap,{})})]}),T.jsxs("div",{className:"relative group",children:[T.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:T.jsx(JP,{className:"text-gray-500 group-focus-within:text-violet-400 transition-colors"})}),T.jsx("div",{className:"absolute inset-y-0 left-12 flex items-center pointer-events-none",children:T.jsx("span",{className:"text-gray-400 text-sm md:text-base font-medium pr-1 border-r border-white/10 h-5 flex items-center",children:"+55"})}),T.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:D,placeholder:"(00) 00000-0000",required:o==="signup",tabIndex:o==="signup"?0:-1,className:"w-full py-3.5 pl-[85px] pr-4 bg-black/30 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500/50 focus:bg-black/50 transition-all text-sm md:text-base"})]})]}),T.jsxs("div",{className:"relative group",children:[T.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:T.jsx(YP,{className:"text-gray-500 group-focus-within:text-violet-400 transition-colors"})}),T.jsx("input",{type:"email",name:"email",value:u.email,onChange:D,placeholder:"E-mail",required:!0,className:"w-full py-3.5 pl-12 pr-4 bg-black/30 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500/50 focus:bg-black/50 transition-all text-sm md:text-base"})]}),T.jsxs("div",{className:"relative group",children:[T.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:T.jsx(JC,{className:"text-gray-500 group-focus-within:text-violet-400 transition-colors"})}),T.jsx("input",{type:"password",name:"password",value:u.password,onChange:D,placeholder:"Senha",required:!0,className:"w-full py-3.5 pl-12 pr-4 bg-black/30 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500/50 focus:bg-black/50 transition-all text-sm md:text-base"})]}),T.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${o==="signup"?"max-h-[150px] opacity-100 translate-y-0":"max-h-0 opacity-0 -translate-y-2"}`,children:T.jsxs("div",{className:"p-3 bg-black/20 rounded-lg border border-white/5 mt-2",children:[T.jsx("p",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-wider mb-2",children:"A senha deve conter:"}),T.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[T.jsx(uu,{label:"Mnimo 8 caracteres",met:X.hasLength}),T.jsx(uu,{label:"Letra Maiscula",met:X.hasUpper}),T.jsx(uu,{label:"Letra Minscula",met:X.hasLower}),T.jsx(uu,{label:"Nmero",met:X.hasNumber}),T.jsx(uu,{label:"Caractere Especial",met:X.hasSpecial})]})]})}),T.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${o==="login"?"max-h-[40px] opacity-100":"max-h-0 opacity-0"}`,children:T.jsxs("div",{className:"flex justify-between items-center pt-1",children:[T.jsxs("label",{className:"flex items-center cursor-pointer group select-none",children:[T.jsx("div",{className:`w-4 h-4 rounded border transition-colors flex items-center justify-center ${m?"bg-violet-600 border-violet-600":"bg-transparent border-gray-600 group-hover:border-gray-400"}`,children:m&&T.jsx(Zd,{className:"text-white text-[10px]"})}),T.jsx("input",{type:"checkbox",className:"hidden",checked:m,onChange:M=>p(M.target.checked)}),T.jsx("span",{className:`ml-2 text-xs transition-colors ${m?"text-gray-200":"text-gray-500 group-hover:text-gray-400"}`,children:"Lembrar de mim"})]}),T.jsx("button",{type:"button",className:"text-xs text-gray-400 hover:text-violet-400 transition-colors",children:"Esqueceu a senha?"})]})}),T.jsxs("div",{className:"pt-2",children:[A&&T.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm mb-3 bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:[T.jsx(jC,{className:"text-lg flex-shrink-0"}),T.jsx("span",{children:A})]}),T.jsx("button",{type:"submit",disabled:o==="login"?k:P,className:"w-full bg-gradient-to-r from-violet-600 to-indigo-600 text-white font-bold py-4 rounded-xl shadow-[0_0_20px_rgba(124,58,237,0.3)] hover:shadow-[0_0_30px_rgba(124,58,237,0.5)] active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:L?T.jsx("span",{children:"Processando..."}):T.jsxs(T.Fragment,{children:[T.jsx("span",{children:o==="login"?"Acessar App":"Comear Agora"}),T.jsx(wg,{})]})})]})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-4 my-6",children:[T.jsx("div",{className:"h-px bg-white/10 flex-1"}),T.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider",children:"Ou continue com"}),T.jsx("div",{className:"h-px bg-white/10 flex-1"})]}),T.jsxs("button",{type:"button",onClick:R,className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold py-3.5 rounded-xl transition-all flex items-center justify-center gap-3 group active:scale-95",children:[T.jsx(NP,{className:"w-5 h-5"}),T.jsx("span",{className:"text-sm font-medium text-gray-200 group-hover:text-white transition-colors",children:"Google"})]})]})]})]}),T.jsxs("div",{className:`text-center mt-6 mb-4 flex-shrink-0 transition-opacity duration-300 ${B?"opacity-0":"opacity-100"}`,children:[T.jsxs("p",{className:"text-xs text-gray-600",children:["Ao continuar, voc concorda com nossos ",T.jsx("br",{})," Termos de Uso e Poltica de Privacidade."]}),i&&T.jsxs("button",{onClick:i,className:"mt-6 text-[10px] text-gray-700 hover:text-gray-500 flex items-center justify-center gap-1 mx-auto opacity-50 hover:opacity-100 transition-all",children:[T.jsx(kP,{className:"text-sm"})," Admin"]})]})]})]})},uu=({label:n,met:e})=>T.jsxs("div",{className:`flex items-center gap-1.5 transition-colors duration-300 ${e?"text-green-400":"text-gray-500"}`,children:[e?T.jsx(Zd,{className:"text-xs"}):T.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-600"}),T.jsx("span",{className:"text-[10px] font-medium",children:n})]}),dS=({onClose:n})=>T.jsxs("div",{className:"fixed inset-0 z-[60] bg-[#050505] text-white flex flex-col animate-slide-in-up overflow-hidden",children:[T.jsxs("header",{className:"flex items-center p-4 border-b border-white/10 bg-[#050505]/90 backdrop-blur-md z-10",children:[T.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 transition-colors",children:T.jsx(If,{className:"text-2xl"})}),T.jsx("h1",{className:"text-lg font-bold flex-grow text-center font-serif",children:"Termos de Uso"}),T.jsx("div",{className:"w-10"})]}),T.jsxs("main",{className:"flex-grow overflow-y-auto p-6 md:p-8 space-y-6 text-gray-300 font-sans text-sm md:text-base leading-relaxed scrollbar-hide",children:[T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"1. Aceitao dos Termos"}),T.jsx("p",{children:"Ao baixar, instalar ou utilizar o aplicativo Inspira+, voc concorda em cumprir estes Termos de Uso. Se voc no concordar com algum destes termos, no utilize o aplicativo."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"2. Descrio do Servio"}),T.jsx("p",{children:"O Inspira+  uma plataforma de bem-estar e motivao diria focada no pblico feminino. O servio oferece citaes, reflexes e ferramentas de gamificao geradas por Inteligncia Artificial e curadoria humana."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"3. Uso do Contedo"}),T.jsx("p",{children:"Todo o contedo gerado (textos, imagens, udios)  para uso pessoal e no comercial. Voc pode compartilhar as citaes nas redes sociais utilizando as ferramentas nativas do aplicativo, mantendo os crditos ao Inspira+."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"4. Assinaturas e Pagamentos"}),T.jsx("p",{children:"O Inspira+ oferece funcionalidades Premium mediante assinatura. Os pagamentos so processados por plataformas terceiras seguras (Google Play Store, Apple App Store, Hotmart ou similar). Cancelamentos e reembolsos seguem as polticas especficas da plataforma onde a compra foi realizada."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"5. Iseno de Responsabilidade Mdica"}),T.jsxs("p",{children:["O contedo do Inspira+ tem carter motivacional e educativo. ",T.jsx("strong",{children:"No substitui acompanhamento psicolgico, psiquitrico ou mdico profissional."})," Em casos de crises de sade mental, procure ajuda profissional imediatamente."]})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"6. Alteraes nos Termos"}),T.jsx("p",{children:"Reservamo-nos o direito de modificar estes termos a qualquer momento. O uso contnuo do aplicativo aps as alteraes constitui aceitao dos novos termos."})]}),T.jsx("div",{className:"pt-8 pb-12 text-center text-xs text-gray-500",children:T.jsx("p",{children:"ltima atualizao: Outubro de 2023"})})]})]}),fS=({onClose:n})=>T.jsxs("div",{className:"fixed inset-0 z-[60] bg-[#050505] text-white flex flex-col animate-slide-in-up overflow-hidden",children:[T.jsxs("header",{className:"flex items-center p-4 border-b border-white/10 bg-[#050505]/90 backdrop-blur-md z-10",children:[T.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 transition-colors",children:T.jsx(If,{className:"text-2xl"})}),T.jsx("h1",{className:"text-lg font-bold flex-grow text-center font-serif",children:"Poltica de Privacidade"}),T.jsx("div",{className:"w-10"})]}),T.jsxs("main",{className:"flex-grow overflow-y-auto p-6 md:p-8 space-y-6 text-gray-300 font-sans text-sm md:text-base leading-relaxed scrollbar-hide",children:[T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"1. Coleta de Dados"}),T.jsx("p",{children:"Respeitamos sua privacidade. Coletamos apenas os dados essenciais para personalizar sua experincia (como nome, preferncias de tpicos e humor). A maioria dos dados  armazenada localmente no seu dispositivo."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"2. Uso de Inteligncia Artificial"}),T.jsx("p",{children:"Utilizamos a API do Google Gemini para gerar contedo personalizado. Ao usar funcionalidades de IA, os prompts de texto (sem identificao pessoal sensvel) so enviados para processamento e no so retidos para treinamento de modelos pela nossa aplicao."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"3. Armazenamento Local"}),T.jsx("p",{children:"Priorizamos o armazenamento local (no seu prprio celular) para histrico de humor, citaes favoritas e progresso na jornada. Isso garante que voc tenha controle total sobre seus dados."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"4. Compartilhamento de Dados"}),T.jsx("p",{children:"No vendemos, alugamos ou compartilhamos seus dados pessoais com terceiros para fins de marketing. Dados annimos de uso podem ser usados para melhorar a performance do aplicativo."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"5. Segurana"}),T.jsx("p",{children:"Empregamos medidas de segurana padro da indstria para proteger suas informaes. Pagamentos so processados por gateways criptografados externos, e no temos acesso aos seus dados financeiros completos."})]}),T.jsxs("section",{children:[T.jsx("h2",{className:"text-white font-bold text-lg mb-2",children:"6. Seus Direitos"}),T.jsx("p",{children:"Voc tem o direito de solicitar a excluso de sua conta e de todos os dados associados a qualquer momento atravs das configuraes do aplicativo ou entrando em contato com nosso suporte."})]}),T.jsx("div",{className:"pt-8 pb-12 text-center text-xs text-gray-500",children:T.jsx("p",{children:"ltima atualizao: Outubro de 2023"})})]})]}),o3=({onClose:n,setToastMessage:e})=>{const[t,i]=ee.useState([]),[o,l]=ee.useState(""),[u,f]=ee.useState(!1),[m,p]=ee.useState(!1),[v,E]=ee.useState(""),[A,w]=ee.useState(""),[L,F]=ee.useState(""),[B,$]=ee.useState(!1);ee.useEffect(()=>{X()},[]);const X=async()=>{p(!0);try{const R=await SP(lP(Ir,"users")),k=[];R.forEach(P=>{const U=P.data();k.push({id:P.id,email:U.email||"No Email",data:U})}),i(k)}catch(R){console.error("Error loading users:",R),e({message:"Erro ao carregar usurios.",type:"error"})}finally{p(!1)}},W=async(R,k)=>{const P=t.find(J=>J.id===R);if(!P)return;const U=new Date,M=P.data.subscriptionExpiry?new Date(P.data.subscriptionExpiry):new Date,Se=M>U?M:U,Ie=new Date(Se);k==="month"?Ie.setMonth(Ie.getMonth()+1):Ie.setFullYear(Ie.getFullYear()+1);try{await Sp(Io(Ir,"users",R),{isPremium:!0,subscriptionExpiry:Ie.toISOString()}),e({message:"Assinatura renovada!",type:"success"}),X()}catch{e({message:"Erro ao atualizar.",type:"error"})}},ae=async R=>{try{await Sp(Io(Ir,"users",R),{isPremium:!1,subscriptionExpiry:""}),e({message:"Assinatura cancelada.",type:"success"}),X()}catch{e({message:"Erro ao cancelar.",type:"error"})}},de=async R=>{if(window.confirm("Tem certeza? Isso apaga os dados do banco, mas a conta de autenticao permanece (limitao do SDK cliente)."))try{await AP(Io(Ir,"users",R)),e({message:"Dados do usurio excludos.",type:"success"}),X()}catch{e({message:"Erro ao excluir.",type:"error"})}},ce=async R=>{if(R.preventDefault(),alert("Ateno: Criar um usurio aqui far o logout da sua conta de admin atual, pois o Firebase Auth Client SDK apenas suporta um usurio ativo por vez. Voc ter que relogar como admin depois."),!(!v||!L||!A))try{const P=(await ZS(cA(),v,A)).user,U=new Date().toISOString().split("T")[0],M=new Date;M.setMonth(M.getMonth()+1);const Se={onboardingComplete:!0,isPremium:B,subscriptionExpiry:B?M.toISOString():void 0,name:L,email:v,stats:{xp:0,level:1,currentStreak:1,lastLoginDate:U,quests:[],totalQuotesRead:0,totalShares:0,totalLikes:0},improvementAreas:[],appGoals:[],topics:[]};await Ep(Io(Ir,"users",P.uid),Se),window.location.reload()}catch(k){console.error(k),e({message:`Erro: ${k.message}`,type:"error"})}},D=R=>R?new Date(R).toLocaleDateString("pt-BR"):"-",N=t.filter(R=>R.email&&R.email.toLowerCase().includes(o.toLowerCase())||R.data.name&&R.data.name.toLowerCase().includes(o.toLowerCase()));return T.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#050505] text-white flex flex-col overflow-hidden animate-fade-in",children:[T.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-[#0a0a0a]",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-600 flex items-center justify-center",children:T.jsx(wf,{className:"text-2xl text-white"})}),T.jsx("h1",{className:"text-xl font-bold font-serif",children:"Admin (Firebase)"})]}),T.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition-colors",children:T.jsx(Ap,{className:"text-xl"})})]}),T.jsxs("main",{className:"flex-grow overflow-y-auto p-6",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-8",children:[T.jsx("input",{type:"text",placeholder:"Buscar...",value:o,onChange:R=>l(R.target.value),className:"bg-[#111] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 w-full md:w-96"}),T.jsx("button",{onClick:()=>f(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-6 py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:T.jsx("span",{children:"+ Criar Conta"})})]}),m&&T.jsx("div",{className:"text-center py-4",children:"Carregando dados do Firestore..."}),T.jsx("div",{className:"space-y-4",children:!m&&N.length===0?T.jsx("div",{className:"text-center text-gray-500 py-10",children:"Nenhum usurio encontrado."}):N.map(R=>T.jsxs("div",{className:"bg-[#111] border border-white/5 rounded-2xl p-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-6 hover:border-white/10 transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-4 min-w-[250px]",children:[T.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold ${R.data.isPremium?"bg-gradient-to-br from-amber-500 to-orange-600 text-white":"bg-gray-800 text-gray-400"}`,children:R.data.name?R.data.name.charAt(0).toUpperCase():"?"}),T.jsxs("div",{children:[T.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[R.data.name||"Sem nome",R.data.isPremium&&T.jsx(Wd,{className:"text-amber-500 text-xs"})]}),T.jsx("p",{className:"text-sm text-gray-400",children:R.email||R.id})]})]}),T.jsxs("div",{className:"min-w-[150px]",children:[T.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Status"}),R.data.isPremium?T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-amber-400 font-bold text-sm",children:"Premium Ativo"}),T.jsxs("span",{className:"text-xs text-gray-400",children:["Expira: ",D(R.data.subscriptionExpiry)]})]}):T.jsx("span",{className:"text-gray-400 font-bold text-sm",children:"Gratuito"})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[T.jsxs("div",{className:"flex items-center bg-black/30 rounded-lg p-1 border border-white/5",children:[T.jsx("button",{onClick:()=>W(R.id,"month"),className:"px-3 py-2 text-xs font-bold text-green-400 hover:bg-green-500/10 rounded-md transition-colors",title:"Adicionar 1 Ms",children:"+1 Ms"}),T.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),T.jsx("button",{onClick:()=>W(R.id,"year"),className:"px-3 py-2 text-xs font-bold text-green-400 hover:bg-green-500/10 rounded-md transition-colors",title:"Adicionar 1 Ano",children:"+1 Ano"})]}),R.data.isPremium&&T.jsx("button",{onClick:()=>ae(R.id),className:"px-4 py-2 text-xs font-bold text-amber-500 hover:bg-amber-500/10 rounded-lg border border-amber-500/30 transition-colors",children:"Cancelar"}),T.jsx("button",{onClick:()=>de(R.id),className:"px-4 py-2 text-xs font-bold text-red-500 hover:bg-red-500/10 rounded-lg border border-red-500/30 transition-colors ml-2",children:"Excluir"})]})]},R.id))})]}),u&&T.jsx("div",{className:"fixed inset-0 z-[110] bg-black/80 flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-[#1a1a1c] w-full max-w-md rounded-2xl p-6 border border-white/10 shadow-2xl animate-pop",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-xl font-bold font-serif",children:"Criar Novo Usurio"}),T.jsx("button",{onClick:()=>f(!1),children:T.jsx(Ap,{className:"text-gray-400 hover:text-white"})})]}),T.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"E-mail"}),T.jsx("input",{type:"email",required:!0,value:v,onChange:R=>E(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Senha"}),T.jsx("input",{type:"password",required:!0,value:A,onChange:R=>w(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Nome"}),T.jsx("input",{type:"text",required:!0,value:L,onChange:R=>F(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"})]}),T.jsx("div",{className:"flex items-center gap-3 py-2",children:T.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[T.jsx("input",{type:"checkbox",checked:B,onChange:R=>$(R.target.checked),className:"rounded border-gray-600 bg-black/30 text-indigo-600 focus:ring-indigo-500"}),T.jsx("span",{className:"text-sm font-medium text-white",children:"Criar como Premium?"})]})}),T.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition-colors mt-4",children:"Criar Conta (Far Logout do Admin)"})]})]})})]})},a3=({onRenew:n,onLogout:e})=>T.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#050505] text-white flex flex-col items-center justify-center p-6 overflow-hidden animate-fade-in",children:[T.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[90%] h-[50%] bg-red-900/20 rounded-full blur-[120px] pointer-events-none animate-pulse-slow"}),T.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[90%] h-[50%] bg-amber-900/10 rounded-full blur-[100px] pointer-events-none"}),T.jsx("div",{className:"absolute inset-0 bg-noise opacity-[0.05] pointer-events-none mix-blend-overlay"}),T.jsxs("div",{className:"relative z-10 w-full max-w-md text-center space-y-8",children:[T.jsxs("div",{className:"relative mx-auto w-24 h-24 flex items-center justify-center",children:[T.jsx("div",{className:"absolute inset-0 bg-red-500/20 rounded-full animate-ping opacity-20"}),T.jsx("div",{className:"relative w-full h-full bg-gradient-to-br from-red-900 to-black border border-red-500/50 rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(239,68,68,0.3)]",children:T.jsx(JC,{className:"text-4xl text-red-500"})})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold text-white",children:"Acesso Restrito"}),T.jsx("p",{className:"text-gray-400 font-sans leading-relaxed text-base md:text-lg",children:"O Inspira+  uma comunidade exclusiva para assinantes Premium. Para iniciar ou continuar sua jornada de inspirao, ative seu acesso agora."})]}),T.jsxs("div",{className:"space-y-4 pt-4",children:[T.jsxs("button",{onClick:n,className:"w-full bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold py-4 rounded-xl shadow-[0_0_30px_rgba(245,158,11,0.3)] hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-3 group",children:[T.jsx(Wd,{className:"text-xl"}),T.jsx("span",{children:"Assinar Premium"}),T.jsx(wg,{className:"group-hover:translate-x-1 transition-transform"})]}),T.jsxs("button",{onClick:e,className:"w-full bg-white/5 border border-white/10 hover:bg-white/10 text-gray-400 hover:text-white font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2",children:[T.jsx(BP,{className:"text-xl"}),T.jsx("span",{children:"Sair da conta"})]})]}),T.jsx("p",{className:"text-xs text-gray-600 pt-8",children:"Se voc acredita que isso  um erro, entre em contato com o suporte."})]})]}),l3=ee.lazy(()=>Br(()=>import("./FilterModal-CwVIqhHX.js"),[]).then(n=>({default:n.FilterModal}))),u3=ee.lazy(()=>Br(()=>import("./ExploreModal-asU8G7Re.js"),[]).then(n=>({default:n.ExploreModal}))),c3=ee.lazy(()=>Br(()=>import("./DailyMotivationScreen-BMoHI1S0.js"),[]).then(n=>({default:n.DailyMotivationScreen}))),d3=ee.lazy(()=>Br(()=>import("./ProfileScreen-D1PpA7gg.js"),[]).then(n=>({default:n.ProfileScreen}))),f3=ee.lazy(()=>Br(()=>import("./PremiumCheckoutScreen-CYcSEGND.js"),[]).then(n=>({default:n.PremiumCheckoutScreen}))),h3=ee.lazy(()=>Br(()=>import("./ShareModal-BjXDgvS9.js"),[]).then(n=>({default:n.ShareModal}))),m3=ee.lazy(()=>Br(()=>import("./GamificationModal-Bwry7oDn.js"),[]).then(n=>({default:n.GamificationModal}))),p3=ee.lazy(()=>Br(()=>import("./LevelUpModal-t33cVwrb.js"),[]).then(n=>({default:n.LevelUpModal}))),vd=(n=30)=>{if(typeof window<"u"&&window.navigator&&"vibrate"in window.navigator)try{window.navigator.vibrate(n)}catch(e){console.warn("Haptic feedback is not supported or failed.",e)}},g3=()=>{var ls,Fn;const{userData:n,updateUserData:e,loading:t,completeQuest:i,initializeUser:o}=Vn(),{login:l,signup:u,logout:f,isAuthenticated:m,isLoading:p,authError:v}=GC(),[E,A]=ee.useState(!1),[w,L]=ee.useState(!1),[F,B]=ee.useState(null),[$,X]=ee.useState(null),[W,ae]=ee.useState(!1),[de,ce]=ee.useState(!1),[D,N]=ee.useState(!1),[R,k]=ee.useState([]),[P,U]=ee.useState(!0),[M,Se]=ee.useState(!1),[Ie,J]=ee.useState(!1),[re,he]=ee.useState(null),[Fe,Qe]=ee.useState(!1),[q,ne]=ee.useState(!1),[le,me]=ee.useState(null),[Ce,Re]=ee.useState(null),[Ue,xt]=ee.useState(null),[ht,Di]=ee.useState(!1),[mi,pi]=ee.useState(!1),[Un,En]=ee.useState(null),[Pi,is]=ee.useState(!0),[Os,qs]=ee.useState(!1),[wt,It]=ee.useState(!1),[gi,Fs]=ee.useState(!1),[Go,Kt]=ee.useState(!1),[ki,Bs]=ee.useState(!1),[Kr,yi]=ee.useState(!1),[Ho,jr]=ee.useState(null),[Qr,$r]=ee.useState(!1),[Ln,kt]=ee.useState(!1),[pn,Et]=ee.useState(null),[Yo,ss]=ee.useState(!1),Xr=!!(n!=null&&n.onboardingComplete),$n=ee.useMemo(()=>{if(!n||!n.isPremium)return!1;if(n.subscriptionExpiry){const ye=new Date(n.subscriptionExpiry);if(new Date>ye)return!1}return!0},[n]),rs=ee.useMemo(()=>new URLSearchParams(window.location.search).get("share")==="true",[]);ee.useEffect(()=>{v&&he({message:v,type:"error"})},[v]),ee.useEffect(()=>{F==="signup"&&m&&$&&!t?o({name:$.name,onboardingComplete:!0}).then(()=>{he({message:"Conta criada com sucesso!",type:"success"}),B(null),X(null),L(!1)}):F==="login"&&m&&!t&&(n&&!n.onboardingComplete&&e({onboardingComplete:!0}),he({message:"Bem-vindo(a) de volta!",type:"success"}),B(null),L(!1))},[F,m,t,$,o,n,e]),ee.useEffect(()=>{(async()=>{const $e=`dailyMotivation-${new Date().toISOString().split("T")[0]}`;try{const Ve=localStorage.getItem($e);if(Ve)En(JSON.parse(Ve));else{Object.keys(localStorage).forEach(Cn=>{Cn.startsWith("dailyMotivation-")&&localStorage.removeItem(Cn)});const yn=await WO();yn&&(En(yn),localStorage.setItem($e,JSON.stringify(yn)))}}catch(Ve){console.error("Error generating daily motivation:",Ve);const yn={text:"A persistncia realiza o impossvel.",author:"Provrbio Chins",category:"Persistncia",imageUrl:""};Ve instanceof Au?he({message:"Cota de gerao diria excedida.",type:"error"}):he({message:"Falha ao carregar motivao diria. Exibindo uma alternativa.",type:"error"}),En(yn)}finally{is(!1)}})()},[]);const pt=ye=>{ye&&ye.leveledUp&&(Et(ye.newLevel),vd([50,50,50]))},Sn=ee.useCallback(async()=>{if(!n||mi)return;const ye=R.length===0;ye&&U(!0);try{const je=await Km(n,R,ye,le);k($e=>{const Ve=new Set($e.map(Cn=>Cn.text)),yn=je.filter(Cn=>!Ve.has(Cn.text));return[...$e,...yn]}),ye&&setTimeout(async()=>{const $e=await Km(n,je,!1,le);k(Ve=>{const yn=new Set(Ve.map(xn=>xn.text)),Cn=$e.filter(xn=>!yn.has(xn.text));return[...Ve,...Cn]})},1e3)}catch(je){console.error("Error generating quotes:",je),je instanceof Au?(pi(!0),he({message:"Limite de uso dirio da IA atingido. Tente novamente amanh.",type:"error"}),ye&&k(Jm),setTimeout(()=>pi(!1),6e4)):(he({message:"Falha ao buscar citaes. Tente novamente.",type:"error"}),ye&&k(Jm))}finally{U(!1)}},[n,R,le,mi]),Xn=ee.useCallback(async()=>{if(!(!n||mi)){U(!0);try{const ye=await Km(n,[],!0,le);k(ye),he({message:"Citaes atualizadas!",type:"success"})}catch(ye){console.error("Error refreshing quotes:",ye),ye instanceof Au?(pi(!0),he({message:"Limite de uso dirio da IA atingido. Tente novamente amanh.",type:"error"}),k(Jm),setTimeout(()=>pi(!1),6e4)):he({message:"Falha ao atualizar. Tente novamente.",type:"error"})}finally{U(!1)}}},[n,le,mi]);ee.useEffect(()=>{if(re){const ye=setTimeout(()=>he(null),4e3);return()=>clearTimeout(ye)}},[re]),ee.useEffect(()=>{n&&R.length===0&&!Pi&&Sn()},[n,Sn,Pi]);const An=ee.useCallback((ye,je)=>{if(vd(),!je){he({message:"Adicionada aos favoritos!",type:"success"}),Re(ye),setTimeout(()=>Re(null),1e3);const $e=i("like_quote");pt($e)}k($e=>$e.map(Ve=>Ve.id===ye?{...Ve,liked:!Ve.liked}:Ve))},[i]),Jo=ee.useCallback(ye=>{jr(ye),Bs(!0),vd();const je=i("share_quote");pt(je)},[i]),Ko=ee.useCallback(()=>{const ye=i("read_quotes");pt(ye)},[i]),On=()=>{J(!0),setTimeout(()=>{Se(!1),J(!1)},500)},os=()=>{kt(!0),setTimeout(()=>{$r(!1),kt(!1)},500)},ul=()=>{ss(!0),setTimeout(()=>{Et(null),ss(!1)},500)},Vi=()=>{ne(!0),setTimeout(()=>{Qe(!1),ne(!1)},500)},zs=()=>{It(!0),setTimeout(()=>{qs(!1),It(!1)},500)},Gs=()=>{Kt(!0),setTimeout(()=>{Fs(!1),Kt(!1)},500)},as=()=>{const ye=new Date;ye.setMonth(ye.getMonth()+1),e({isPremium:!0,subscriptionExpiry:ye.toISOString()}),Gs(),he({message:"Bem-vindo(a) ao Premium! Obrigado pelo seu apoio.",type:"success"})},_i=ye=>{le!==ye&&(me(ye),k([])),Vi()},Wr=ye=>{xt(ye)},qn=()=>{Di(!0),setTimeout(()=>{xt(null),Di(!1)},500)},gn=ee.useMemo(()=>`daily-${new Date().toISOString().split("T")[0]}`,[]),it=ee.useMemo(()=>{if(!Un)return null;const ye=R.find(je=>je.id===gn);return{id:gn,text:Un.text,author:Un.author,category:Un.category,liked:ye?ye.liked:!1,imageUrl:Un.imageUrl,backgroundImage:""}},[Un,gn,R]),Vt=ee.useCallback(()=>{if(!it)return;vd();const ye=it.liked,je=R.some($e=>$e.id===it.id);if(!ye){he({message:"Adicionada aos favoritos!",type:"success"}),Re(it.id),setTimeout(()=>Re(null),1e3);const $e=i("like_quote");pt($e)}k(je?$e=>$e.map(Ve=>Ve.id===it.id?{...Ve,liked:!ye}:Ve):$e=>[...$e,{...it,liked:!0}])},[it,R,i]),Wn=()=>{yi(!0),setTimeout(()=>{Bs(!1),jr(null),yi(!1)},500)},Hs=()=>{Fs(!0)},cl=async ye=>{B("login");try{await l(ye)}catch{B(null)}},jo=async ye=>{X(ye),B("signup");try{await u(ye)}catch{B(null)}},Zr=ee.useCallback(()=>{L(!0),Se(!1),J(!1),f()},[f]);if(rs)return T.jsx(E2,{});if(ee.useEffect(()=>{if(Xr){const ye=localStorage.getItem("inspiraMoodCheckin"),je=1440*60*1e3,$e=new Date().getTime();(!ye||$e-parseInt(ye,10)>je)&&A(!0)}},[Xr]),t||p)return T.jsx("div",{className:"h-full w-full flex items-center justify-center bg-black text-gray-50",children:T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-violet-500"})});const Zn=ye=>{e({feeling:ye}),localStorage.setItem("inspiraMoodCheckin",new Date().getTime().toString()),A(!1)};return D?T.jsx(o3,{onClose:()=>N(!1),setToastMessage:he}):w?T.jsx(r3,{onLogin:cl,onSignup:jo,onBack:()=>L(!1),onAdminAccess:()=>N(!0)}):m?n?!$n&&!gi?T.jsx(a3,{onRenew:()=>Fs(!0),onLogout:Zr}):gi?T.jsx(ee.Suspense,{fallback:T.jsx("div",{className:"fixed inset-0 bg-black z-50"}),children:T.jsx(f3,{onBack:Gs,onPurchaseComplete:as,isClosing:Go})}):E?T.jsx(e3,{onComplete:Zn}):T.jsxs("main",{className:"relative h-full w-full bg-black text-gray-50 font-sans overflow-hidden",role:"main",children:[T.jsxs("div",{className:`w-full h-full transition-all duration-500 ease-in-out ${M||Fe||Ue||Os||ki||Qr?"scale-95 brightness-75":"scale-100 brightness-100"}`,children:[T.jsx(s3,{quotes:R,isLoading:P,onLike:An,onShare:Jo,onExplore:Wr,onRead:Ko,loadMore:Sn,sharingQuoteId:null,likedQuoteId:Ce,onRefresh:Xn}),T.jsxs("header",{className:"absolute top-0 left-0 right-0 p-4 md:p-6 flex justify-between items-center z-20 pointer-events-none",children:[T.jsxs("div",{className:"pointer-events-auto flex items-center space-x-2",children:[Pi?T.jsx("div",{className:"h-10 w-10 bg-white/50 rounded-full animate-pulse shadow-md","aria-hidden":"true"}):T.jsx("button",{onClick:()=>qs(!0),className:"w-10 h-10 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/40 transition-colors ring-1 ring-white/20 flex items-center justify-center transform active:scale-95","aria-label":"Ver Motivao do Dia",children:T.jsx(LP,{className:"text-amber-500 text-[24px]"})}),T.jsxs("button",{onClick:()=>$r(!0),className:"h-10 px-4 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/40 transition-colors ring-1 ring-white/20 flex items-center justify-center gap-3 transform active:scale-95","aria-label":"Ver Jornada",children:[T.jsx("div",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-gradient-to-tr from-orange-500 to-amber-300 shadow-[0_0_10px_rgba(251,191,36,0.5)]",children:T.jsx(OP,{className:"text-[20px] text-white"})}),T.jsx("span",{className:"text-white font-bold text-base leading-none",children:((ls=n==null?void 0:n.stats)==null?void 0:ls.level)||1}),(Fn=n==null?void 0:n.stats)!=null&&Fn.currentStreak?T.jsxs("div",{className:"flex items-center text-orange-400 text-xs gap-1 ml-1 border-l border-white/10 pl-2 leading-none",children:[T.jsx(qP,{className:"text-lg"}),T.jsx("span",{className:"font-bold",children:n.stats.currentStreak})]}):null]})]}),T.jsxs("div",{role:"navigation","aria-label":"Navegao Principal",className:"pointer-events-auto flex items-center space-x-2",children:[T.jsx("button",{"aria-label":"Filtrar tpicos",onClick:()=>Qe(!0),className:"w-10 h-10 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/40 transition-colors ring-1 ring-white/20 flex items-center justify-center transform active:scale-95",children:T.jsx(UP,{className:"text-white text-[24px]"})}),T.jsx("button",{"aria-label":"Ver perfil",onClick:()=>Se(!0),className:"w-10 h-10 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/40 transition-colors ring-1 ring-white/20 flex items-center justify-center transform active:scale-95",children:T.jsx(wf,{className:"text-white text-[24px]"})})]})]})]}),T.jsxs(ee.Suspense,{fallback:T.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none"}),children:[Os&&T.jsx(c3,{isClosing:wt,quote:it,isLoading:Pi,onBack:zs,onNavigateToProfile:()=>{zs(),setTimeout(()=>Se(!0),500)},onLike:Vt,onShare:Jo,onExplore:Wr,sharingQuoteId:null,likedQuoteId:Ce}),Qr&&T.jsx(m3,{stats:(n==null?void 0:n.stats)||{},onClose:os,isClosing:Ln}),pn&&T.jsx(p3,{newLevel:pn,onClose:ul,isClosing:Yo}),Ue&&T.jsx(u3,{quote:Ue,onClose:qn,isClosing:ht}),Fe&&T.jsx(l3,{activeFilter:le,onSelectFilter:_i,onClose:Vi,isClosing:q,isPremium:!0,onTriggerPremium:Hs}),M&&T.jsx(d3,{onBack:On,quotes:R,onLike:An,setToastMessage:he,isClosing:Ie,onGoToPremium:()=>{On(),setTimeout(()=>Fs(!0),100)},onLogout:Zr,onShowTerms:()=>ae(!0),onShowPrivacy:()=>ce(!0)}),ki&&Ho&&T.jsx(h3,{quote:Ho,onClose:Wn,isClosing:Kr})]}),W&&T.jsx(dS,{onClose:()=>ae(!1)}),de&&T.jsx(fS,{onClose:()=>ce(!1)}),re&&T.jsx("div",{className:"fixed bottom-36 left-0 w-full z-[100] flex justify-center pointer-events-none",children:T.jsxs("div",{role:"status","aria-live":"polite",className:"animate-slide-in-up flex items-center justify-center gap-3 px-6 py-3.5 rounded-full bg-black/60 backdrop-blur-xl border border-white/10 shadow-[0_8px_30px_rgb(0,0,0,0.3)] transition-all max-w-[90vw] pointer-events-auto",children:[T.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${re.type==="success"?"bg-violet-500/20 text-violet-300":"bg-orange-500/20 text-orange-300"}`,children:re.type==="success"?T.jsx(Zd,{className:"text-sm"}):T.jsx(jC,{className:"text-sm"})}),T.jsx("span",{className:"text-sm font-medium text-white/90 font-sans tracking-wide",children:re.message})]})})]}):T.jsx("div",{className:"h-full w-full bg-black"}):T.jsxs(T.Fragment,{children:[T.jsx(T2,{onLoginClick:()=>L(!0),onShowTerms:()=>ae(!0),onShowPrivacy:()=>ce(!0)}),W&&T.jsx(dS,{onClose:()=>ae(!1)}),de&&T.jsx(fS,{onClose:()=>ce(!1)})]})},y3=()=>T.jsx(IP,{children:T.jsx(bP,{children:T.jsx(g3,{})})});class _3 extends mS.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?T.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-900 text-white p-8 text-center font-sans",children:[T.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4 font-serif",children:"Algo deu errado."}),T.jsx("p",{className:"mb-6 text-gray-300",children:"No se preocupe, estamos cuidando disso."}),T.jsx("button",{onClick:()=>window.location.reload(),className:"bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-6 rounded-full transition-colors",children:"Recarregar"})]}):this.props.children}}const Cx=document.getElementById("root");if(!Cx)throw new Error("Could not find root element to mount to");const v3=dI.createRoot(Cx);v3.render(T.jsx(mS.StrictMode,{children:T.jsx(_3,{children:T.jsx(y3,{})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});export{R3 as B,Ap as C,b3 as D,w3 as E,qP as F,Bo as G,Cp as H,x3 as L,n3 as P,Ro as S,t3 as T,wf as U,If as a,I3 as b,Zd as c,A3 as d,D3 as e,LP as f,M3 as g,MP as h,GC as i,T as j,C3 as k,Wd as l,E3 as m,BP as n,S3 as o,N3 as p,DP as q,ee as r,JC as s,OP as t,Vn as u};
